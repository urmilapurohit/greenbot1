function CalculateSTC(){$("#JobSystemDetails_CalculatedSTC").val(""),$("#JobSystemDetails_CalculatedSTCForSWH").val();var e=$("#BasicDetails_JobType").val(),t=$("#JobSystemDetails_SystemSize").val(),a=$("#BasicDetails_strInstallationDate").val(),r="";if(null!=a&&null!=a&&""!=a){var n=ConvertDateToTick(a,ProjectConfiguration_GetDateFormat);r=moment(n).format("YYYY-MM-DD")}var l=$("#JobSTCDetails_DeemingPeriod").val(),s=InstallationPostcodeFromjson,i=$("#hdnSystemBrand").val(),o=$("#hdnSystemModel").val();1==e?null!=r&&""!=r&&null!=l&&""!=l&&null!=s&&""!=s&&null!=t&&""!=t?$.ajax({url:urlCalculateSTC,data:{sguType:"SolarDeemed",expectedInstallDate:r,deemingPeriod:l,postcode:s,systemsize:t},contentType:"application/json",method:"get",success:function(e){if("false"==e.toLowerCase())$("#spanJobSystemDetails_CalculatedSTC").show().text("STC Value cannot be calculated since REC website is down.").fadeOut(6e3);else{var t=JSON.parse(e);if("Failed"==t.status)$("#spanJobSystemDetails_CalculatedSTC").show().text(t.fieldErrors[0].defaultMessage);else{var a=t;$("#JobSystemDetails_CalculatedSTC").val(a)}}}}):$("#spanJobSystemDetails_CalculatedSTC").show().text("Installation Date, STC DeemingPeriod,Installation postcode and System size are required for it.").fadeOut(6e3):2==e?null!=r&&""!=r&&null!=r&&null!=s&&""!=s&&null!=s&&null!=i&&""!=i&&null!=o&&""!=o?$.ajax({url:urlCalculateSWHSTC,data:{expectedInstallDate:r,postcode:s,systemBrand:i,systemModel:o},contentType:"application/json",method:"get",success:function(e){var t=JSON.parse(e);if("Failed"==t.status)$("#spanJobSystemDetails_CalculatedSTCForSWH").show().text(t.errors[0]);else{var a=t.result.numStc;$("#JobSystemDetails_CalculatedSTCForSWH").val(a)}}}):$("#spanJobSystemDetails_CalculatedSTCForSWH").show().text("Installation Date,System brand,System Model,Owner postcode are required for it."):($("#spanJobSystemDetails_CalculatedSTC").show().text("Please select Job Type.").fadeOut(6e3),$("#spanJobSystemDetails_CalculatedSTCForSWH").show().text("Please select Job Type.").fadeOut(6e3))}function PopupSerialNumber(){$("#serialNumberPopup").html("");var e=$("#JobSystemDetails_SerialNumbers").val().trim(),t=JSON.stringify({serialNumbers:$("#JobSystemDetails_SerialNumbers").val(),jobID:$("#BasicDetails_JobID").val()});$.ajax({url:urlCheckDuplicateSerialNumbers,type:"post",dataType:"json",data:t,cache:!1,async:!0,contentType:"application/json; charset=utf-8",success:function(t){if(t.length>0){MasterSerialArray=[],JobSerialArray=[];var a=$.parseJSON(t);$.grep(a,function(e,t){e.IsExistInMaster?JobSerialArray.push(e.ExistsSerialNumber):MasterSerialArray.push(e.ExistsSerialNumber)});var r=e.split("\n");r=r.filter(function(e){return e.length>0});for(var n=1;n<r.length+1;n++)-1!==JobSerialArray.indexOf(r[n-1])?$("#serialNumberPopup").append("<li><span style='background-color: rgba(30, 121, 204, 0.21);'>"+n+" :"+r[n-1]+"</span></li>"):-1!==MasterSerialArray.indexOf(r[n-1])?$("#serialNumberPopup").append("<li><span style='background-color: rgba(220, 82, 109, 0.21);'>"+n+" :"+r[n-1]+"</span></li>"):$("#serialNumberPopup").append("<li><span>"+n+" :"+r[n-1]+"</span></li>")}else MasterSerialArray=[],JobSerialArray=[];$("#popupSerialNumber").modal({backdrop:"static",keyboard:!1})}})}function FillDropDownOfPanelBrandModel(){$("#searchPanelBrand").autocomplete({minLength:0,source:function(e,t){var a=[];$("#hdnPanelBrand").val(""),$.each(panelBrandList,function(e,t){t.text.toLowerCase().indexOf($("#searchPanelBrand").val().toLowerCase())>-1&&a.push({Title:t.text,id:t.value})}),t($.map(a,function(e){return{label:e.Title,value:e.Title,id:e.id}}))},select:function(e,t){$("#hdnPanelBrand").val(t.item.id),$("#JobPanelDetails_NoOfPanel").prop("disabled",!1),$("#JobPanelDetails_NoOfPanel").val(""),FillDropdownSupplierByManufacturer(encodeURIComponent(t.item.value));var a=$("#searchPanelModel").val();FillStartEndDateForPanel(t.item.value,a)}}).on("focus",function(){$(this).keydown()}),$("#searchPanelBrand").autocomplete("instance")._renderItem=function(e,t){var a=new RegExp($.trim(this.term.toLowerCase())),r=t.label.replace(a,"<span style='font-weight:600;'>"+$.trim(this.term.toLowerCase())+"</span>");return e.addClass("autocompleteChangeUser"),$("<li style='font-size:14px;'></li>").data("item.autocomplete",t).append("<a>"+r+"</a>").appendTo(e)},$("#searchPanelModel").autocomplete({minLength:0,source:function(e,t){var a=[];$("#hdnPanelModel").val(""),$.each(panelModelList,function(e,t){t.text.toLowerCase().indexOf($("#searchPanelModel").val().toLowerCase())>-1&&a.push({Title:t.text,id:t.value})}),t($.map(a,function(e){return{label:e.Title,value:e.Title,id:e.id}}))},select:function(e,t){$("#JobPanelDetails_NoOfPanel").prop("disabled",!1),$("#searchPanelBrand").prop("disabled",!1),$("#hdnPanelModel").val(t.item.id),BindPanelBrand("",BasicDetails_JobType,"Brand",$("#hdnPanelModel").val())}}).on("focus",function(){$(this).keydown()}),$("#searchPanelModel").autocomplete("instance")._renderItem=function(e,t){var a=new RegExp($.trim(this.term.toLowerCase())),r=t.label.replace(a,"<span style='font-weight:600;'>"+$.trim(this.term.toLowerCase())+"</span>");return e.addClass("autocompleteChangeUser"),$("<li style='font-size:14px;'></li>").data("item.autocomplete",t).append("<a>"+r+"</a>").appendTo(e)},$("#tblPanel tr").each(function(){var e=$(this).find("td").eq(0).attr("class"),t=$(this).find("td").eq(1).attr("class"),a=$(this).find("td").eq(4).attr("class"),r=$(this).find("td").eq(5).attr("rowid"),n=$(this).find("td").eq(5).attr("data-supplier");PanelXml.push({ID:r,Brand:e,Model:t,Count:a,Supplier:n}),OldPanelXml.push({ID:r,Brand:e,Model:t,Count:a,Supplier:n})})}function FillDropDownOfSystemBrandModel(){$("#searchSystemBrand").autocomplete({minLength:0,source:function(e,t){var a=[];$("#hdnSystemBrand").val(""),$.each(systemBrandList,function(e,t){t.text.toLowerCase().indexOf($("#searchSystemBrand").val().toLowerCase())>-1&&a.push({Title:t.text,id:t.value})}),t($.map(a,function(e){return{label:e.Title,value:e.Title,id:e.id}}))},select:function(e,t){$("#hdnSystemBrand").val(t.item.id),$("#searchSystemModel").prop("disabled",!1),$("#JobSystemDetails_NoOfPanel1").prop("disabled",!1),$("#JobSystemDetails_NoOfPanel1").val("");var a=$("#searchSystemModel").val();FillStartEndDateForSWHBrandModel(t.item.value,a)}}).on("focus",function(){$(this).keydown()}),$("#searchSystemBrand").autocomplete("instance")._renderItem=function(e,t){var a=new RegExp($.trim(this.term.toLowerCase())),r=t.label.replace(a,"<span style='font-weight:600;'>"+$.trim(this.term.toLowerCase())+"</span>");return e.addClass("autocompleteChangeUser"),$("<li style='font-size:14px;'></li>").data("item.autocomplete",t).append("<a>"+r+"</a>").appendTo(e)},$("#searchSystemModel").autocomplete({minLength:0,source:function(e,t){var a=[];$("#hdnSystemModel").val(""),$.each(systemModelList,function(e,t){t.text.toLowerCase().indexOf($("#searchSystemModel").val().toLowerCase())>-1&&a.push({Title:t.text,id:t.value})}),t($.map(a,function(e){return{label:e.Title,value:e.Title,id:e.id}}))},select:function(e,t){$("#JobSystemDetails_NoOfPanel1").prop("disabled",!1),$("#searchSystemBrand").prop("disabled",!1),$("#hdnSystemModel").val(t.item.id),BindSystemBrand("",BasicDetails_JobType,"Brand",$("#hdnSystemModel").val())}}).on("focus",function(){$(this).keydown()}),$("#searchSystemModel").autocomplete("instance")._renderItem=function(e,t){var a=new RegExp($.trim(this.term.toLowerCase())),r=t.label.replace(a,"<span style='font-weight:600;'>"+$.trim(this.term.toLowerCase())+"</span>");return e.addClass("autocompleteChangeUser"),$("<li style='font-size:14px;'></li>").data("item.autocomplete",t).append("<a>"+r+"</a>").appendTo(e)},$("#tblSystem tr").each(function(){var e=$(this).find("td").eq(0).attr("class");$("#hdnSystemBrand").val(e);var t=$(this).find("td").eq(1).attr("class");$("#hdnSystemModel").val(t);var a=$(this).find("td").eq(4).attr("class"),r=$(this).find("td").eq(5).attr("rowid");systemXml.push({ID:r,Brand:e,Model:t,Count:a})}),ShowHideAddSystemButton()}function FillDropDownOfInverterBrandModel(){$("#searchInverterBrand").autocomplete({minLength:0,source:function(e,t){var a=[];$("#hdnInverterBrand").val(""),$.each(inverterBrandList,function(e,t){t.text.toLowerCase().indexOf($("#searchInverterBrand").val().toLowerCase())>-1&&a.push({Title:t.text,id:t.value})}),t($.map(a,function(e){return{label:e.Title,value:e.Title,id:e.id}}))},select:function(e,t){$("#hdnInverterBrand").val(t.item.id),$("#searchInverterSeries").prop("disabled",!1),$("#searchInverterNumber").prop("disabled",!1);t.item.value,$("#searchInverterSeries").val();var a=$("#searchInverterModel").val();BindInverterSeries("",a)}}).on("focus",function(){$(this).keydown()}),$("#searchInverterBrand").autocomplete("instance")._renderItem=function(e,t){var a=new RegExp($.trim(this.term.toLowerCase())),r=t.label.replace(a,"<span style='font-weight:600;'>"+$.trim(this.term.toLowerCase())+"</span>");return e.addClass("autocompleteChangeUser"),$("<li style='font-size:14px;'></li>").data("item.autocomplete",t).append("<a>"+r+"</a>").appendTo(e)},$("#searchInverterSeries").autocomplete({minLength:0,source:function(e,t){var a=[];$("#hdnInverterSeries").val(""),$.each(inverterSeriesList,function(e,t){t.text.toLowerCase().indexOf($("#searchInverterSeries").val().toLowerCase())>-1&&a.push({Title:t.text,id:t.value})}),t($.map(a,function(e){return{label:e.Title,value:e.Title,id:e.id}}))},select:function(e,t){$("#hdnInverterSeries").val(t.item.id),$("#searchInverterNumber").prop("disabled",!1);var a=$("#searchInverterBrand").val(),r=t.item.value,n=$("#searchInverterModel").val();FillStartEndDateForInverter(a,n,r)}}).on("focus",function(){$(this).keydown()}),$("#searchInverterSeries").autocomplete("instance")._renderItem=function(e,t){var a=new RegExp($.trim(this.term.toLowerCase())),r=t.label.replace(a,"<span style='font-weight:600;'>"+$.trim(this.term.toLowerCase())+"</span>");return e.addClass("autocompleteChangeUser"),$("<li style='font-size:14px;'></li>").data("item.autocomplete",t).append("<a>"+r+"</a>").appendTo(e)},$("#searchInverterModel").autocomplete({minLength:0,source:function(e,t){var a=[];$("#hdnInverterModel").val(""),$.each(inverterModelList,function(e,t){t.text.toLowerCase().indexOf($("#searchInverterModel").val().toLowerCase())>-1&&a.push({Title:t.text,id:t.value})}),t($.map(a,function(e){return{label:e.Title,value:e.Title,id:e.id}}))},select:function(e,t){$("#hdnInverterModel").val(t.item.id),$("#searchInverterBrand").prop("disabled",!1);$("#searchInverterBrand").val(),$("#searchInverterSeries").val(),t.item.value;BindInverterBrand("","",t.item.value)}}).on("focus",function(){$(this).keydown()}),$("#searchInverterModel").autocomplete("instance")._renderItem=function(e,t){var a=new RegExp($.trim(this.term.toLowerCase())),r=t.label.replace(a,"<span style='font-weight:600;'>"+$.trim(this.term.toLowerCase())+"</span>");return e.addClass("autocompleteChangeUser"),$("<li style='font-size:14px;'></li>").data("item.autocomplete",t).append("<a>"+r+"</a>").appendTo(e)},$("#tblInverter tr").each(function(){var e=$(this).find("td").eq(0).attr("class"),t=$(this).find("td").eq(1).attr("class"),a=$(this).find("td").eq(2).attr("class"),r=$(this).find("td").eq(5).attr("class"),n=$(this).find("td").eq(6).attr("rowid");InverterXml.push({ID:n,Brand:e,Series:t,Model:a,NoOfInverter:r}),OldInverterXml.push({ID:n,Brand:e,Series:t,Model:a,NoOfInverter:r})})}function FillDropDownOfBatteryManufacturerModel(){$("#searchBatteryManufacturer").autocomplete({minLength:0,source:function(e,t){var a=[];$("#hdnBatteryManufacturer").val(""),$.each(batteryManufacturerList,function(e,t){t.text.toLowerCase().indexOf($("#searchBatteryManufacturer").val().toLowerCase())>-1&&a.push({Title:t.text,id:t.value})}),t($.map(a,function(e){return{label:e.Title,value:e.Title,id:e.id}}))},select:function(e,t){$("#hdnBatteryManufacturer").val(t.item.id),$("#searchBatteryModelNumber").prop("disabled",!1),BindBatteryModelNumber("")}}).on("focus",function(){$(this).keydown()}),$("#searchBatteryManufacturer").autocomplete("instance")._renderItem=function(e,t){var a=new RegExp($.trim(this.term.toLowerCase())),r=t.label.replace(a,"<span style='font-weight:600;'>"+$.trim(this.term.toLowerCase())+"</span>");return e.addClass("autocompleteChangeUser"),$("<li style='font-size:14px;'></li>").data("item.autocomplete",t).append("<a>"+r+"</a>").appendTo(e)},$("#searchBatteryModelNumber").autocomplete({minLength:0,source:function(e,t){var a=[];$("#hdnBatteryModelNumber").val(""),$.each(batteryModelList,function(e,t){t.text.toLowerCase().indexOf($("#searchBatteryModelNumber").val().toLowerCase())>-1&&a.push({Title:t.text,id:t.value})}),t($.map(a,function(e){return{label:e.Title,value:e.Title,id:e.id}}))},select:function(e,t){$("#hdnBatteryModelNumber").val(t.item.id),EnableDisableBatteryManufacturerDetails()}}).on("focus",function(){$(this).keydown()}),$("#searchBatteryModelNumber").autocomplete("instance")._renderItem=function(e,t){var a=new RegExp($.trim(this.term.toLowerCase())),r=t.label.replace(a,"<span style='font-weight:600;'>"+$.trim(this.term.toLowerCase())+"</span>");return e.addClass("autocompleteChangeUser"),$("<li style='font-size:14px;'></li>").data("item.autocomplete",t).append("<a>"+r+"</a>").appendTo(e)},$("#tblBatteryManufacturer tr").each(function(){var e=$(this).find("td").eq(0).attr("class"),t=$(this).find("td").eq(1).attr("class"),a=$(this).find("td").eq(2).attr("rowid");batteryXml.push({JobBatteryManufacturerId:a,Manufacturer:e,ModelNumber:t})}),$("#popupboxPanelBrand").on("hidden.bs.modal",function(){$(".job-panel-supplier-popup-drpsupplier").hide()})}function BindPanelBrand(e,t,a,r,n=null){return $("#searchPanelBrand").val(""),$.ajax({type:"get",url:urlGetPanelBrand+a+"&CertificateHolder="+r+"&JobType="+t,dataType:"json",success:function(t){panelBrandList=[],$.each(t,function(e,t){panelBrandList.push({value:t.Value,text:t.Text})}),""!=e?($("#hdnPanelBrand").val(e),$.each(panelBrandList,function(t,a){a.value==e&&$("#searchPanelBrand").val(a.text)})):($("#hdnPanelBrand").val(""),$("#searchPanelBrand").val("")),FillDropdownSupplierByManufacturer($("#searchPanelBrand").val(),n)},error:function(e){alert("Failed to retrieve panel brand."+e)}}),!1}function BindSystemBrand(e,t,a,r,n){return $("#searchSystemBrand").val(""),$.ajax({type:"get",url:urlGetPanelBrand+a+"&CertificateHolder="+r+"&JobType="+t,dataType:"json",success:function(t){systemBrandList=[],$.each(t,function(e,t){systemBrandList.push({value:t.Value,text:t.Text})}),""!=e?($("#hdnSystemBrand").val(e),$.each(systemBrandList,function(t,a){a.value==e&&$("#searchSystemBrand").val(a.text)})):($("#hdnSystemBrand").val(""),$("#searchSystemBrand").val(""))},error:function(e){alert("Failed to retrieve system brand."+e)}}),!1}function BindPanelModel(e,t,a,r,n=null){return $("#searchPanelModel").val(""),$.ajax({type:"get",url:urlGetPanelModel+a+"&CertificateHolder="+escape(r)+"&JobType="+t,dataType:"json",success:function(a){panelModelList=[],$.each(a,function(e,t){panelModelList.push({value:t.Value,text:t.Text})}),""!=e?($("#hdnPanelModel").val(e),$.each(panelModelList,function(a,l){l.value==e&&($("#searchPanelModel").val(l.text),BindPanelBrand(r,t,"Brand",$("#hdnPanelModel").val(),n))})):($("#hdnPanelModel").val(""),$("#searchPanelModel").val(""))},error:function(e){alert("Failed to retrieve panel model."+e)}}),!1}function BindSystemModel(e,t,a,r){return $("#searchSystemModel").val(""),$.ajax({type:"get",url:urlGetPanelModel+a+"&CertificateHolder="+escape(r)+"&JobType="+t,dataType:"json",success:function(a){systemModelList=[],$.each(a,function(e,t){systemModelList.push({value:t.Value,text:t.Text})}),""!=e?($("#hdnSystemModel").val(e),$.each(systemModelList,function(a,n){n.value==e&&($("#searchSystemModel").val(n.text),BindSystemBrand(r,t,"Brand",$("#hdnSystemModel").val()))})):($("#hdnSystemModel").val(""),$("#searchSystemModel").val(""))},error:function(e){alert("Failed to retrieve system model."+e)}}),!1}function BindInverterSeries(e,t){return $("#searchInverterSeries").val(""),$.ajax({type:"get",url:urlGetInverterModel+encodeURIComponent($("#hdnInverterModel").val())+"&Manufacturer="+encodeURIComponent($("#hdnInverterBrand").val()),dataType:"json",success:function(t){inverterSeriesList=[],$.each(t,function(e,t){inverterSeriesList.push({value:t.Value,text:t.Text})}),""!=e?($("#hdnInverterSeries").val(e),$.each(inverterSeriesList,function(t,a){a.value==e&&$("#searchInverterSeries").val(a.text)})):($("#hdnInverterSeries").val(""),$("#searchInverterSeries").val(""))},error:function(e){alert("Failed to retrieve inverter series."+e)}}),!1}function BindInverterModel(e,t,a,r){return $("#searchInverterModel").val(""),$.ajax({type:"get",url:urlGetInverterSeries+encodeURIComponent($("#hdnInverterSeries").val())+"&Manufacturer="+encodeURIComponent($("#hdnInverterBrand").val()),dataType:"json",success:function(n){inverterModelList=[],$.each(n,function(e,t){inverterModelList.push({value:t.Value,text:t.Text})}),""!=e?($("#hdnInverterModel").val(e),$.each(inverterModelList,function(n,l){l.value==e&&($("#searchInverterModel").val(l.text),BindInverterBrand(t,a,e,r))})):($("#hdnInverterModel").val(""),$("#searchInverterModel").val(""))},error:function(e){alert("Failed to retrieve inverter model."+e)}}),!1}function BindBatteryModelNumber(e){return $("#searchBatteryModelNumber").val(""),$.ajax({type:"get",url:urlGetBatteryModel+$("#hdnBatteryManufacturer").val(),async:!1,dataType:"json",success:function(t){batteryModelList=[],$.each(t,function(e,t){batteryModelList.push({value:t.Value,text:t.Text})}),""!=e?($("#hdnBatteryModelNumber").val(e),$.each(batteryModelList,function(t,a){a.value==e&&$("#searchBatteryModelNumber").val(a.text)})):($("#hdnBatteryModelNumber").val(""),$("#searchBatteryModelNumber").val(""))},error:function(e){alert("Failed to retrieve battery model number."+e)}}),!1}function BindInverterBrand(e,t,a,r){return $("#searchInverterBrand").val(""),$.ajax({type:"get",url:urlGetInverterBrand+encodeURIComponent($("#hdnInverterModel").val()),dataType:"json",success:function(n){inverterBrandList=[],$.each(n,function(e,t){inverterBrandList.push({value:t.Value,text:t.Text})}),""!=e?($("#hdnInverterBrand").val(e),$.each(inverterBrandList,function(n,l){l.value==e&&($("#searchInverterNumber").val(r),$("#searchInverterBrand").val(l.text),BindInverterSeries(t,a))})):($("#hdnInverterBrand").val(""),$("#searchInverterBrand").val(""))},error:function(e){alert("Failed to retrieve inverter brand."+e)}}),!1}function BindBatteryManufacturer(e,t){return $("#searchBatteryManufacturer").val(""),$.ajax({type:"get",url:urlGetBatteryManufacturer,async:!1,dataType:"json",success:function(a){batteryManufacturerList=[],$.each(a,function(e,t){batteryManufacturerList.push({value:t.Value,text:t.Text})}),""!=e?($("#hdnBatteryManufacturer").val(e),$.each(batteryManufacturerList,function(a,r){r.value==e&&($("#searchBatteryManufacturer").val(r.text),BindBatteryModelNumber(t))})):($("#hdnBatteryManufacturer").val(""),$("#searchBatteryManufacturer").val(""))},error:function(e){alert("Failed to retrieve battery manufacturer."+e)}}),!1}function AddPanelBrandSave(e){var t=$("#BasicDetails_strInstallationDate").val(),a=$("#txtpanelStartDate").val(),r=$("#txtpanelEndDate").val(),n=new Date(r.split("/")[2]+"/"+r.split("/")[1]+"/"+r.split("/")[0]),l=new Date(a.split("/")[2]+"/"+a.split("/")[1]+"/"+a.split("/")[0]),s=new Date(t.split("/")[2]+"/"+t.split("/")[1]+"/"+t.split("/")[0]);if(s>=n||s<=l){if(!confirm("The selected Panel brand and model was not accredited at the time of installation - InstallationDate: "+t+" \nDo you still want to continue?"))return $("#loading-image").css("display","none"),!0;SavePanelBrandModel(e)}else SavePanelBrandModel(e)}function SavePanelBrandModel(e){var t=$("#hdnPanelBrand").val(),a=$("#hdnPanelModel").val(),r=$("#txtpanelStartDate").val(),n=$("#txtpanelEndDate").val(),l=$("#JobPanelDetails_NoOfPanel").val(),s=$("#drpSupplier").val();if($("#drpSupplier option").not("option[value='']").length>0&&""==s)return $("#spanJobPanelDetails_Supplier").show(),$("#loading-image").css("display","none"),!1;if(null!=t&&""!=t&&null!=a&&""!=a&&null!=l&&""!=l&&0!=l&&null!=r&&""!=r&&null!=n&&""!=n){if(null==e||""==e){var i=Fuid(),o=i,d="<tr id='"+o+"'>";d+='<td class="'+t+'"  width="40%">'+t+" </td>",d+='<td class="'+a+'"  width="40%">'+a+" </td>",d+='<td class="'+r+'"  width="7%">'+r+" </td>",d+='<td class="'+n+'"  width="7%">'+n+" </td>",d+='<td class="'+l+'"  width="7%" >'+l+" </td>",d+='<td  class=action id="tdAction" data-supplier="'+s+'" rowid="'+o+'"  width="15%"><a class="edit sprite-img" title="Edit" id="signEdit" style="cursor: pointer" href="javascript:void(0)" onclick="editPanel(\''+o+'\')"></a>&nbsp;&nbsp;<a class="delete sprite-img" title="Delete" id="signDelete" style="cursor: pointer" onclick="DeletePanelFromGrid(\''+o+"')\"></a></td>",d+="</tr>",$("#tblPanel").append(d);var u=0;""!=$("#JobSystemDetails_NoOfPanel").text()&&(u=$("#JobSystemDetails_NoOfPanel").text()),$("#JobSystemDetails_NoOfPanel").text(parseInt(u)+parseInt(l)),PanelXml.push({ID:o,Brand:t,Model:a,Count:l,Supplier:s})}else $.each(PanelXml,function(r,n){n.ID==e&&(n.Brand=t,n.Model=a,n.Count=l,n.Supplier=s)}),$("#tblPanel tr").each(function(){var i=$(this).find("td").eq(4).attr("class"),o=$(this).find("td").eq(5).attr("rowid");o==e&&($(this).find("td").eq(0).attr("class",t),$(this).find("td").eq(0).text(t),$(this).find("td").eq(1).attr("class",a),$(this).find("td").eq(1).text(a),$(this).find("td").eq(2).attr("class",r),$(this).find("td").eq(2).text(r),$(this).find("td").eq(3).attr("class",n),$(this).find("td").eq(3).text(n),$(this).find("td").eq(4).attr("class",l),$(this).find("td").eq(4).text(l),$(this).find("td").eq(5).attr("data-supplier",s),$("#JobSystemDetails_NoOfPanel").text(parseInt($("#JobSystemDetails_NoOfPanel").text())-i),$("#JobSystemDetails_NoOfPanel").text(parseInt($("#JobSystemDetails_NoOfPanel").text())+parseInt(l)))});$("#popupboxPanelBrand").modal("toggle"),$("#loading-image").css("display","none")}else $("#loading-image").css("display","none"),null!=t&&""!=t.trim()||$("#spanJobPanelDetails_Brand").show(),null!=a&&""!=a.trim()||$("#spanJobPanelDetails_Model").show(),null!=l&&""!=l.trim()&&"0"!=l||$("#spanNoOfPanelValue").show(),null!=s&&""!=s.trim()&&0!=s||$("#spanJobPanelDetails_Supplier").show(),null!=r&&""!=r.trim()||$("#spanJobPanelDetails_CECApprovedDate").show(),null!=n&&""!=n.trim()||$("#spanJobPanelDetails_ExpiryDate").show()}function AddSystemBrandSave(e){var t=$("#BasicDetails_strInstallationDate").val(),a=$("#txtSWHpanelStartDate").val(),r=$("#txtSWHpanelEndDate").val(),n=new Date(r.split("/")[2]+"/"+r.split("/")[1]+"/"+r.split("/")[0]),l=new Date(a.split("/")[2]+"/"+a.split("/")[1]+"/"+a.split("/")[0]),s=new Date(t.split("/")[2]+"/"+t.split("/")[1]+"/"+t.split("/")[0]);if(s>=n||s<=l){if(!confirm("The selected Panel brand and model was not accredited at the time of installation - InstallationDate: "+t+" \nDo you still want to continue?"))return $("#loading-image").css("display","none"),!0;saveSystemBrandModel(e)}else saveSystemBrandModel(e)}function saveSystemBrandModel(e){var t=$("#hdnSystemBrand").val(),a=$("#hdnSystemModel").val(),r=$("#txtSWHpanelStartDate").val(),n=$("#txtSWHpanelEndDate").val(),l=$("#JobSystemDetails_NoOfPanel1").val();if(null!=t&&""!=t&&null!=a&&""!=a&&null!=l&&""!=l&&0!=l&&null!=r&&""!=r&&null!=n&&""!=n){if(null==e||""==e){var s=Fuid(),i=s,o="<tr id='"+i+"'>";o+='<td class="'+t+'"  width="40%">'+t+" </td>",o+='<td class="'+a+'"  width="35%">'+a+" </td>",o+='<td class="'+r+'"  width="10%" >'+r+" </td>",o+='<td class="'+n+'"  width="10%" >'+n+" </td>",o+='<td class="'+l+'"  width="10%" >'+l+" </td>",o+='<td  class=action rowid="'+i+'" id="tdAction"  width="15%"><a class="edit sprite-img" title="Edit" id="signEdit" style="cursor: pointer" href="javascript:void(0)" onclick="editSystem(\''+i+'\')"></a>&nbsp;&nbsp;<a class="delete sprite-img" title="Delete" id="signDelete" style="cursor: pointer" onclick="DeleteSystemFromGrid(\''+i+"')\"></a></td>",o+="</tr>",$("#tblSystem").append(o);var d=0;""!=$("#JobSystemDetails_NoOfPanel").text()&&(d=$("#JobSystemDetails_NoOfPanel").text()),$("#JobSystemDetails_NoOfPanel").text(parseInt(d)+parseInt(l)),systemXml.push({ID:i,Brand:t,Model:a,Count:l})}else $.each(systemXml,function(s,i){i.ID==e&&(i.Brand=t,i.Model=a,i.Count=l,i.startDate=r,i.endDate=n)}),$("#tblSystem tr").each(function(){var s=$(this).find("td").eq(4).attr("class"),i=$(this).find("td").eq(5).attr("rowid");i==e&&($(this).find("td").eq(0).attr("class",t),$(this).find("td").eq(0).text(t),$(this).find("td").eq(1).attr("class",a),$(this).find("td").eq(1).text(a),$(this).find("td").eq(2).attr("class",r),$(this).find("td").eq(2).text(r),$(this).find("td").eq(3).attr("class",n),$(this).find("td").eq(3).text(n),$(this).find("td").eq(4).attr("class",l),$(this).find("td").eq(4).text(l),$("#JobSystemDetails_NoOfPanel").text(parseInt($("#JobSystemDetails_NoOfPanel").text())-s),$("#JobSystemDetails_NoOfPanel").text(parseInt($("#JobSystemDetails_NoOfPanel").text())+parseInt(l)))});$("#popupboxSystemBrand").modal("toggle"),$("#loading-image").css("display","none")}else $("#loading-image").css("display","none"),null!=t&&""!=t.trim()||$("#spanJobSystemDetails_Brand").show(),null!=a&&""!=a.trim()||$("#spanJobSystemDetails_Model").show(),null!=l&&""!=l.trim()&&"0"!=l||$("#spanJobSystemDetails_NoOfPanel").show(),null!=r&&""!=r.trim()||$("#spanJobSystemDetails_CECApprovedDate").show(),null!=n&&""!=n.trim()||$("#spanJobSystemDetails_ExpiryDate").show()}function AddInverterBrandSave(e){var t=$("#txtInverterStartDate").val(),a=$("#txtInverterEndDate").val(),r=$("#BasicDetails_strInstallationDate").val(),n=new Date(a.split("/")[2]+"/"+a.split("/")[1]+"/"+a.split("/")[0]),l=new Date(t.split("/")[2]+"/"+t.split("/")[1]+"/"+t.split("/")[0]),s=new Date(r.split("/")[2]+"/"+r.split("/")[1]+"/"+r.split("/")[0]);if(s>=n||s<=l){if(!confirm("The selected Inverter brand and model was not accredited at the time of installation - InstallationDate: "+r+" \nDo you still want to continue?"))return $("#loading-image").css("display","none"),!0;saveInverterBrandModel(e)}else saveInverterBrandModel(e)}function saveInverterBrandModel(e){var t=$("#hdnInverterBrand").val(),a=$("#hdnInverterModel").val(),r=$("#txtInverterStartDate").val(),n=$("#txtInverterEndDate").val(),l=$("#hdnInverterSeries").val(),s=$("#searchInverterNumber").val();if(null!=t&&""!=t&&null!=a&&""!=a&&null!=l&&""!=l&&null!=s&&""!=s&&0!=s&&null!=r&&""!=l&&null!=n&&""!=n){if(null==e||""==e){var i=Fuid(),o="<tr id='+ trId +'>";o+='<td class="'+t+'"  width="30%">'+t+" </td>",o+='<td class="'+l+'"  width="28%">'+l+" </td>",o+='<td class="'+a+'" width="28%">'+a+" </td>",o+='<td class="'+r+'" width="5%">'+r+" </td>",o+='<td class="'+n+'" width="5%">'+n+" </td>",o+='<td class="'+s+'" width="5%">'+s+" </td>",o+='<td  class=action rowid="'+i+'" id="tdAction"  width="5%" ><a class="edit sprite-img" title="Edit" id="signEdit" style="cursor: pointer" href="javascript:void(0)" onclick="editInverter(\''+i+'\')"></a>&nbsp;&nbsp;<a class="delete sprite-img" title="Delete" id="signDelete" style="cursor: pointer" onclick="DeleteInverterFromGrid(\''+i+"')\"></a></td>",o+="</tr>",$("#tblInverter").append(o);var d=0;""!=$("#JobSystemDetails_NoOfInverter").text()&&(d=$("#JobSystemDetails_NoOfInverter").text()),$("#JobSystemDetails_NoOfInverter").text(parseInt(d)+parseInt(s)),InverterXml.push({ID:i,Brand:t,Model:a,Series:l,NoOfInverter:s})}else $.each(InverterXml,function(r,n){n.ID==e&&(n.Brand=t,n.Model=a,n.Series=l,n.NoOfInverter=s)}),$("#tblInverter tr").each(function(){var i=$(this).find("td").eq(5).attr("class"),o=$(this).find("td").eq(6).attr("rowid");o==e&&($(this).find("td").eq(0).attr("class",t),$(this).find("td").eq(0).text(t),$(this).find("td").eq(1).attr("class",l),$(this).find("td").eq(1).text(l),$(this).find("td").eq(2).attr("class",a),$(this).find("td").eq(2).text(a),$(this).find("td").eq(3).attr("class",r),$(this).find("td").eq(3).text(r),$(this).find("td").eq(4).attr("class",n),$(this).find("td").eq(4).text(n),$(this).find("td").eq(5).attr("class",s),$(this).find("td").eq(5).text(s),$("#JobSystemDetails_NoOfInverter").text(parseInt($("#JobSystemDetails_NoOfInverter").text())-i),$("#JobSystemDetails_NoOfInverter").text(parseInt($("#JobSystemDetails_NoOfInverter").text())+parseInt(s)))});$("#popupboxInverterBrand").modal("toggle"),$("#loading-image").css("display","none")}else $("#loading-image").css("display","none"),null!=t&&""!=t.trim()||$("#spanJobInverterDetails_Brand").show(),null!=a&&""!=a.trim()||$("#spanJobInverterDetails_Model").show(),null!=l&&""!=l.trim()||$("#spanJobInverterDetails_Series").show(),0!=s.trim()&&""!=s.trim()||$("#spanNoOfInverterValue").show(),null!=r&&""!=r.trim()||$("#spanJobInverterDetails_CECApprovedDate").show(),null!=n&&""!=n.trim()||$("#spanJobInverterDetails_ExpiryDate").show()}function AddBatteryManufacturerModelSave(e){var t=$("#hdnBatteryManufacturer").val(),a=$("#hdnBatteryModelNumber").val(),r=$("#JobSTCDetails_batterySystemPartOfAnAggregatedControl").val(),n=$("#JobSTCDetails_changedSettingOfBatteryStorageSystem").val();if(null!=t&&""!=t&&null!=a&&""!=a&&""!=r&&""!=n){if(null==e||""==e){var l=Fuid(),s="<tr id='+ trId +'>";s+='<td class="'+t+'"  width="35%">'+t+" </td>",s+='<td class="'+a+'" width="25%">'+a+" </td>",s+='<td  class=action rowid="'+l+'" id="tdAction"  width="15%" ><a class="edit sprite-img" title="Edit" id="signEdit" style="cursor: pointer" href="javascript:void(0)" onclick="editBatteryManufacturer(\''+l+'\')"></a>&nbsp;&nbsp;<a class="delete sprite-img" title="Delete" id="signDelete" style="cursor: pointer" onclick="DeleteBatteryManufacturerFromGrid(\''+l+"')\"></a></td>",s+="</tr>",$("#tblBatteryManufacturer").append(s),batteryXml.push({JobBatteryManufacturerId:l,Manufacturer:t,ModelNumber:a})}else $.each(batteryXml,function(r,n){n.JobBatteryManufacturerId==e&&(n.Manufacturer=t,n.ModelNumber=a)}),$("#tblBatteryManufacturer tr").each(function(){var r=$(this).find("td").eq(2).attr("rowid");r==e&&($(this).find("td").eq(0).attr("class",t),$(this).find("td").eq(0).text(t),$(this).find("td").eq(1).attr("class",a),$(this).find("td").eq(1).text(a))});$("#popupboxBatteryManufacturer").modal("toggle"),$("#loading-image").css("display","none")}else $("#loading-image").css("display","none"),null!=t&&""!=t.trim()||$("#spanJobBatteryManufacturer").show(),null!=a&&""!=a.trim()||$("#spanJobBatteryModelNumber").show(),""==r&&$("#spanBatterySystemPartOfAnAggregatedControl").show(),""==n&&$("#spanChangedSettingOfBatteryStorageSystem").show()}function ClearPanelModelBrand(){$("#hdnPanelBrand").val(""),$("#searchPanelBrand").val(""),$("#hdnPanelModel").val(""),$("#searchPanelModel").val(""),$("#searchPanelBrand").prop("disabled",!0),$("#JobPanelDetails_NoOfPanel").val(""),$("#JobPanelDetails_NoOfPanel").prop("disabled",!0),$("#spanJobPanelDetails_Brand").hide(),$("#spanJobPanelDetails_Model").hide(),$("#spanJobPanelDetails_Supplier").hide(),$("#spanNoOfPanelValue").hide(),$("#hdnPanelRowId").val(""),$("#txtpanelStartDate").val(""),$("#txtpanelEndDate").val("")}function ClearInverterModelBrand(){$("#hdnInverterBrand").val(""),$("#searchInverterBrand").val(""),$("#hdnInverterSeries").val(""),$("#searchInverterSeries").val(""),$("#searchInverterSeries").prop("disabled",!0),$("#hdnInverterModel").val(""),$("#searchInverterModel").val(""),$("#spanJobInverterDetails_Brand").hide(),$("#spanJobInverterDetails_Series").hide(),$("#spanJobInverterDetails_Model").hide(),$("#hdnInverterRowId").val(""),$("#searchInverterNumber").val(""),$("#searchInverterNumber").prop("disabled",!0),$("#spanNoOfInverterValue").hide(),$("#txtInverterStartDate").val(""),$("#txtInverterEndDate").val("")}function ClearBatteryManufacturer(){$("#hdnBatteryManufacturer").val(""),$("#searchBatteryManufacturer").val(""),$("#hdnBatteryModelNumber").val(""),
$("#searchBatteryModelNumber").val(""),$("#searchBatteryModelNumber").prop("disabled",!0),$("#spanJobBatteryManufacturer").hide(),$("#spanJobBatteryModelNumber").hide(),$("#spanBatterySystemPartOfAnAggregatedControl").hide(),$("#spanChangedSettingOfBatteryStorageSystem").hide(),$("#hdnBatteryManufacturerRowId").val(""),EnableDisableBatteryManufacturerDetails()}function ClearSystemModelBrand(){$("#hdnSystemBrand").val(""),$("#searchSystemBrand").val(""),$("#hdnSystemModel").val(""),$("#searchSystemModel").val(""),$("#JobSystemDetails_NoOfPanel1").val(""),$("#spanJobSystemDetails_Brand").hide(),$("#spanJobSystemDetails_Model").hide(),$("#spanJobSystemDetails_NoOfPanel").hide(),$("#hdnSystemRowId").val(""),$("#txtSWHpanelStartDate").val(""),$("#txtSWHpanelEndDate").val("")}function editPanel(e){ClearPanelModelBrand(),$("#popupboxPanelBrand").modal({backdrop:"static",keyboard:!1}),$.each(PanelXml,function(t,a){a.ID==e&&($("#searchPanelBrand").prop("disabled",!1),$("#JobPanelDetails_NoOfPanel").prop("disabled",!1),BindPanelModel(a.Model,BasicDetails_JobType,"Model",a.Brand,a.Supplier),$("#JobPanelDetails_NoOfPanel").val(a.Count),$("#hdnPanelRowId").val(e),FillDropdownSupplierByManufacturer(a.Brand,a.Supplier),FillStartEndDateForPanel(a.Brand,a.Model))})}function editSystem(e){ClearSystemModelBrand(),$("#popupboxSystemBrand").modal({backdrop:"static",keyboard:!1}),$.each(systemXml,function(t,a){a.ID==e&&($("#searchSystemBrand").prop("disabled",!1),$("#JobSystemDetails_NoOfPanel1").prop("disabled",!1),BindSystemModel(a.Model,BasicDetails_JobType,"Model",a.Brand,null),$("#JobSystemDetails_NoOfPanel1").val(a.Count),$("#hdnSystemRowId").val(e),FillStartEndDateForSWHBrandModel(a.Brand,a.Model))})}function editInverter(e){ClearInverterModelBrand(),$("#popupboxInverterBrand").modal({backdrop:"static",keyboard:!1}),$.each(InverterXml,function(t,a){a.ID==e&&($("#searchInverterSeries").prop("disabled",!1),$("#searchInverterModel").prop("disabled",!1),$("#searchInverterNumber").prop("disabled",!1),BindInverterModel(a.Model,a.Brand,a.Series,a.NoOfInverter),$("#searchInverterNumber").val(a.NoOfInverter),$("#hdnInverterRowId").val(e),FillStartEndDateForInverter(a.Brand,a.Model,a.Series))})}function editBatteryManufacturer(e){ClearBatteryManufacturer(),$("#popupboxBatteryManufacturer").modal({backdrop:"static",keyboard:!1}),$.each(batteryXml,function(t,a){a.JobBatteryManufacturerId==e&&($("#searchBatteryManufacturer").prop("disabled",!1),$("#searchBatteryModelNumber").prop("disabled",!1),BindBatteryManufacturer(a.Manufacturer,a.ModelNumber),$("#hdnBatteryManufacturerRowId").val(e))}),EnableDisableBatteryManufacturerDetails()}function DeletePanelFromGrid(e){confirm("Are you sure you want to delete this panel?")&&(PanelXml=$.grep(PanelXml,function(t,a){return t.ID!=e||($("#JobSystemDetails_NoOfPanel").text(parseInt($("#JobSystemDetails_NoOfPanel").text())-parseInt(t.Count)),document.getElementById("tblPanel").deleteRow(a),!1)}))}function DeleteSystemFromGrid(e){confirm("Are you sure you want to delete this system detail?")&&(systemXml=$.grep(systemXml,function(t,a){return t.ID!=e||($("#JobSystemDetails_NoOfPanel").text(0),document.getElementById("tblSystem").deleteRow(a),!1)}),ShowHideAddSystemButton())}function DeleteInverterFromGrid(e){confirm("Are you sure you want to delete this Inverter?")&&(InverterXml=$.grep(InverterXml,function(t,a){return t.ID!=e||($("#JobSystemDetails_NoOfInverter").text(parseInt($("#JobSystemDetails_NoOfInverter").text())-parseInt(t.NoOfInverter)),document.getElementById("tblInverter").deleteRow(a),!1)}))}function DeleteBatteryManufacturerFromGrid(e){confirm("Are you sure you want to delete this Battery manufacturer?")&&(batteryXml=$.grep(batteryXml,function(t,a){return t.JobBatteryManufacturerId!=e||(document.getElementById("tblBatteryManufacturer").deleteRow(a),!1)}))}function MakePanelModelNumDisabled(){$("#searchPanelBrand").prop("disabled",!0),$("#searchPanelBrand").val(""),$("#JobPanelDetails_NoOfPanel").prop("disabled",!0),$("#JobPanelDetails_NoOfPanel").val(""),$("#hdnPanelModel").val(""),$("#drpSupplier").prop("disabled",!0),$("#drpSupplier").html("")}function MakeInverterModelSeriesDisabled(){$("#searchInverterSeries").prop("disabled",!0),$("#searchInverterSeries").val(""),$("#hdnInverterSeries").val(""),$("#searchInverterBrand").prop("disabled",!0),$("#searchInverterBrand").val(""),$("#searchInverterBrand").val(""),$("#searchInverterNumber").val(""),$("#searchInverterNumber").prop("disabled",!0)}function MakeBatteryModelNumberDisabled(){$("#searchBatteryModelNumber").prop("disabled",!0),$("#searchBatteryModelNumber").val(""),$("#hdnBatteryModelNumber").val("")}function MakeSystemModelSeriesDisabled(){$("#searchSystemBrand").prop("disabled",!0),$("#searchSystemBrand").val(""),$("#JobSystemDetails_NoOfPanel1").prop("disabled",!0),$("#JobSystemDetails_NoOfPanel1").val(""),$("#hdnSystemModel").val("")}function EnableDisableBatteryManufacturerDetails(){$("#hdnBatteryManufacturer").val().length>0&&$("#hdnBatteryModelNumber").val().length>0?$(".batteryManufacturerDetails").find("select").prop("disabled",!1):$(".batteryManufacturerDetails").find("select").prop("disabled",!0)}function ShowHideAddSystemButton(){systemXml.length>0?$("#btnSystemBrandAdd").hide():$("#btnSystemBrandAdd").show()}function Fuid(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function FillDropdownSupplierByManufacturer(e,t){FillDropDown("drpSupplier",urlGetSupplierByManufacturer+"?ManufacturerName="+e,null!=t&&""!=t&&null!=t&&""!=t?t:0,!0,SupplierDropdownEnable(),"Select Supplier")}function FillStartEndDateForPanel(e,t){$.ajax({url:urlgetStartEndDateForPanel,data:{manufacturer:e,model:t},contentType:"application/json",method:"get",success:function(e){1==e.status?($("#txtpanelStartDate").val(e.startDate),$("#txtpanelEndDate").val(e.endDate)):($("#txtpanelStartDate").val(""),$("#txtpanelEndDate").val(""))}})}function FillStartEndDateForInverter(e,t,a){$.ajax({url:urlgetStartEndDateForInverter,data:{Brand:e,Model:t,series:a},contentType:"application/json",method:"get",success:function(e){1==e.status?($("#txtInverterStartDate").val(e.startDate),$("#txtInverterEndDate").val(e.endDate)):($("#txtInverterStartDate").val(""),$("#txtInverterEndDate").val(""))}})}function FillStartEndDateForSWHBrandModel(e,t){$.ajax({url:urlgetStartEndDateForSWHBrandModel,data:{Brand:e,Model:t},contentType:"application/json",method:"get",success:function(e){1==e.status?($("#txtSWHpanelStartDate").val(e.startDate),$("#txtSWHpanelEndDate").val(e.endDate)):($("#txtSWHpanelStartDate").val(""),$("#txtSWHpanelEndDate").val(""))}})}function SupplierDropdownEnable(){setTimeout(function(){""==$("#drpSupplier").val()&&$("#drpSupplier option").length>0&&1==$("#drpSupplier option").not("option[value='']").length?($(".job-panel-supplier-popup-drpsupplier").show(),$("#drpSupplier option").not("option[value='']").eq(0).prop("selected",!0),$("#drpSupplier").attr("disabled",!0)):$("#drpSupplier option").length>0&&$("#drpSupplier option").not("option[value='']").length>0?($(".job-panel-supplier-popup-drpsupplier").show(),1==$("#drpSupplier option").not("option[value='']").length?$("#drpSupplier").attr("disabled",!0):$("#drpSupplier").attr("disabled",!1)):($(".job-panel-supplier-popup-drpsupplier").hide(),$("#drpSupplier").attr("disabled",!0))},1e3)}$(document).ready(function(){$("#btnClosepopupboxPanelBrand").click(function(){$("#popupboxPanelBrand").modal("toggle")}),$("#btnClosepopupboxInverterBrand").click(function(){$("#popupboxInverterBrand").modal("toggle")}),$("#btnClosepopupboxBatteryManufacturer").click(function(){$("#popupboxBatteryManufacturer").modal("toggle")}),$("#btnClosepopupboxSystemBrand").click(function(){$("#popupboxSystemBrand").modal("toggle")}),$("#btnAddPanel").click(function(){$("#loading-image").css("display","");var e=$("#hdnPanelRowId").val();AddPanelBrandSave(e)}),$("#btnAddSystem").click(function(){$("#loading-image").css("display","");var e=$("#hdnSystemRowId").val();AddSystemBrandSave(e)}),$("#btnAddInverter").click(function(){$("#loading-image").css("display","");var e=$("#hdnInverterRowId").val();AddInverterBrandSave(e)}),$("#btnAddBatteryManfacturer").click(function(){$("#loading-image").css("display","");var e=$("#hdnBatteryManufacturerRowId").val();AddBatteryManufacturerModelSave(e)}),$("#resetPanelBrand").click(function(){var e=$("#hdnPanelRowId").val();ClearPanelModelBrand(),$("#hdnPanelRowId").val(e)}),$("#resetSystemBrand").click(function(){var e=$("#hdnSystemRowId").val();ClearSystemModelBrand(),$("#hdnSystemRowId").val(e),$("#JobSystemDetails_InstallationType").val("")}),$("#resetInverterBrand").click(function(){var e=$("#hdnInverterRowId").val();ClearInverterModelBrand(),$("#hdnInverterRowId").val(e)}),$("#resetBatteryManfacturer").click(function(){var e=$("#hdnBatteryManufacturerRowId").val();ClearBatteryManufacturer(),$("#hdnBatteryManufacturerRowId").val(e)}),$("#searchPanelBrand").change(function(){""!=$("#searchPanelBrand").val()&&null!=$("#searchPanelBrand").val()||($("#JobPanelDetails_NoOfPanel").prop("disabled",!0),$("#JobPanelDetails_NoOfPanel").val(""));var e=$("#searchPanelBrand").val(),t=$("#searchPanelModel").val();FillStartEndDateForPanel(e,t)}),$("#searchSystemBrand").change(function(){""!=$("#searchSystemBrand").val()&&null!=$("#searchSystemBrand").val()||($("#JobSystemDetails_NoOfPanel").prop("disabled",!0),$("#JobSystemDetails_NoOfPanel").val(""));var e=$("#searchSystemBrand").val(),t=$("#searchSystemModel").val();FillStartEndDateForSWHBrandModel(e,t)}),$("#searchInverterBrand").change(function(){""!=$("#searchInverterBrand").val()&&null!=$("#searchInverterBrand").val()||($("#searchInverterNumber").prop("disabled",!0),$("#searchInverterNumber").val(""));var e=$("#searchInverterBrand").val(),t=$("#searchInverterSeries").val(),a=$("#searchInverterModel").val();FillStartEndDateForInverter(e,a,t)}),$("#searchInverterModel").change(function(){""!=$("#searchInverterModel").val()&&null!=$("#searchInverterModel").val()||MakeInverterModelSeriesDisabled(),$("#txtInverterStartDate").val(""),$("#txtInverterEndDate").val("")}),$("#searchBatteryManufacturer").change(function(){""!=$("#searchBatteryManufacturer").val()&&null!=$("#searchBatteryManufacturer").val()||MakeBatteryModelNumberDisabled(),EnableDisableBatteryManufacturerDetails()}),$("#searchBatteryModelNumber").change(function(){""!=$("#searchBatteryModelNumber").val()&&null!=$("#searchBatteryModelNumber").val()||EnableDisableBatteryManufacturerDetails()}),$("#searchPanelModel").change(function(){""!=$("#searchPanelModel").val()&&null!=$("#searchPanelModel").val()||MakePanelModelNumDisabled(),$("#txtpanelStartDate").val(""),$("#txtpanelEndDate").val("")}),$("#searchSystemModel").change(function(){""!=$("#searchSystemModel").val()&&null!=$("#searchSystemModel").val()||MakeSystemModelSeriesDisabled(),$("#txtSWHpanelStartDate").val(""),$("#txtSWHpanelEndDate").val("")}),$("#searchInverterSeries").change(function(){""!=$("#searchInverterSeries").val()&&null!=$("#searchInverterSeries").val()||($("#searchInverterModel").prop("disabled",!0),$("#searchInverterModel").val(""),$("#hdnInverterModel").val(""))}),$("#btnPopupSerialNumber").click(function(){PopupSerialNumber()})});