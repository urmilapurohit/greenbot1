function GetCompnayName(){return""==customCompanyName||customCompanyName,customCompanyName}function validateForm(){return $("#ValidationSummary").hide(),$("#msgSection").hide(),"3"==$("#IsVerified").val()&&$("#chkIsSignatureVerified").prop("checked")&&$("#chkIsSelfieVerified").prop("checked")&&$("#chkIsDriverLicVerified").prop("checked")&&$("#chkIsOtherDocVerified").prop("checked")?(showErrorMessage("At least one document need to be unverified for set verification status to rejected."),!1):7!=userTypeId||$("#IsPVDUser").prop("checked")||$("#IsSWHUser").prop("checked")?(removeSolarElecticianValidation(),$("#IsAutoRequest").val($("#AutoRequestSwitch").prop("checked")),$(".SE").find("[idClass='docVerification']").each(function(){$(this).rules("add",{required:!1})}),$.validator.unobtrusive.parse("#UserDetails"),addressValidation(),!!($("#UserDetails").valid()&&CheckShowMessages()&&addRules())||(addRules(),!1)):(alert("At least one work type should be selected."),!1)}function initialize(e){$("#CompanyName").change(function(){$.each(e,function(e,i){var t=i.CompanyName,o=$("select#CompanyName option:selected").val();t==o&&($("#fromDate").val(i.strFromDate),$("#toDate").val(i.strToDate))})})}function ChangeUserType(e){$(".form-box").find("input:first").focus(),$("input[type=text]").each(function(){$(this).attr("class","form-control valid")}),$(".field-validation-error").attr("class","field-validation-valid"),""==e?defaultHideField():1==e?($(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".RAM").hide(),$(".SCA").hide(),$(".FCO").hide(),$(".SCO").hide(),$(".SE").hide(),$(".SSC").hide(),$(".SC").hide(),$(".FSA").show(),$(".defaultFormBot").show()):2==e?($(".FSA").hide(),$(".FCO").hide(),$(".RAM").hide(),$(".SCA").hide(),$(".SCO").hide(),$(".SSC").hide(),$(".SE").hide(),$(".SC").hide(),$(".RA").show(),$("#dvIsWholeSaler").show(),ShowHideWholeSalerInvoice(),"3"==$("#UsageType").val()&&$(".SAAS").show(),$(".defaultFormBot").show()):3==e?($(".FSA").hide(),$(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".RAM").hide(),$(".SCA").hide(),$(".SCO").hide(),$(".SE").hide(),$(".SSC").hide(),$(".SC").hide(),$(".FCO").show(),$(".defaultFormBot").show()):4==e?($(".FSA").hide(),$(".FCO").hide(),$(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".RAM").hide(),$(".SCO").hide(),$(".SE").hide(),$(".SSC").hide(),$(".SC").hide(),$(".SCA").show(),$(".ProfileSCO").show(),$(".ProfileRA").hide(),$(".defaultFormBot").show(),$("#lblCECAccreditationNumber").addClass("required")):5==e?($(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".SCA").hide(),$(".FCO").hide(),$(".FSA").hide(),$(".SCO").hide(),$(".SE").hide(),$(".SSC").hide(),$(".SC").hide(),$(".RAM").show(),$(".defaultFormBot").show()):6==e?($(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".SCA").hide(),$(".FCO").hide(),$(".FSA").hide(),$(".SCO").hide(),$(".RAM").hide(),$(".SE").hide(),$(".SC").hide(),$(".SSC").show(),$(".defaultFormBot").show()):7==e?(ShowHideForSEandSWH(),$(".SWH").hide(),7!=sessionUserTypeId?$(".OnlySE").hide():$(".OnlySE").show(),$("#lblCECAccreditationNumber").addClass("required"),$(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice()):10==e?(ShowHideForSEandSWH(),$(".hideForSWH").hide(),$(".SWH").show(),7!=sessionUserTypeId?$(".OnlySE").hide():$(".OnlySE").show(),$("#lblSWHLicenseNumber").addClass("required"),$(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice()):8==e?($(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".SCA").hide(),$(".FCO").hide(),$(".FSA").hide(),$(".RAM").hide(),$(".SE").hide(),$(".SSC").hide(),$(".SC").hide(),$(".SCO").show(),$("#UserTypeId").val("8"),$(".defaultFormBot").show()):($(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".SCA").hide(),$(".FCO").hide(),$(".FSA").hide(),$(".RAM").hide(),$(".SE").hide(),$(".SSC").hide(),$(".SC0").hide(),$(".SC").show(),$(".ProfileSCO").show(),$(".ProfileRA").hide(),$(".defaultFormBot").show())}function ShowHideForSEandSWH(){$(".RA").hide(),$(".SCA").hide(),$(".FCO").hide(),$(".FSA").hide(),$(".SCO").hide(),$(".RAM").hide(),$(".SSC").hide(),$(".SC").hide(),$(".ProfileSCO").show(),$(".ProfileRA").hide(),$(".defaultFormBot").show(),$(".SE").show()}function getNameFromPath(e){var i=new RegExp(/([^\/\\]+)$/),t=i.exec(e);return null==t?null:t[0]}function SaveStatusAndNote(){var e=$("#Status").val(),i=$("#Note").val(),t=modelUserId;$.ajax({url:'@Url.Action("InsertStatusNote", "User")',type:"POST",async:!1,data:JSON.stringify({Id:t,Status:e,Note:i}),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){e.success&&(7==userTypeId?window.location.href=getSEURL:window.location.href=getSCAURL)}})}function POAddress(e){$(".POID").find("input[type=text]").each(function(){}),$(".POID").find(".field-validation-error").attr("class","field-validation-valid"),1==e?($(".DPA").show(),$(".PDA").hide(),$("#PostalAddressID").attr("class","form-control valid"),$("#PostalDeliveryNumber").attr("class","form-control valid")):($(".DPA").hide(),$(".PDA").show(),$("#UnitTypeId").attr("class","form-control valid"),$("#UnitNumber").attr("class","form-control valid"),$("#StreetNumber").attr("class","form-control valid"),$("#StreetTypeId").attr("class","form-control valid"),$("#StreetName").attr("class","form-control valid"))}function getDropDownValue(){return!!validateForm()}function addRules(){return 7!=userTypeId||(ValidateFieldBasedOnWorkType(),"2"!=$("#IsVerified").val().toString().toLowerCase()||0!=$("#chkIsSignatureVerified").prop("checked")&&0!=$("#chkIsSelfieVerified").prop("checked")&&0!=$("#chkIsDriverLicVerified").prop("checked")&&0!=$("#chkIsOtherDocVerified").prop("checked"))?(4==userTypeId&&$("#CECAccreditationNumber").rules("add",{required:!0,messages:{required:"CEC Accreditation Number is required."}}),4!=userTypeId&&6!=userTypeId&&8!=userTypeId||removeValidationOnTabChangeInstallerDesigner(),1!=$("#chkSCA").is(":checked")||4!=userTypeId||(0!=$("#tblDocuments1 tr").length||($(".alert").hide(),$("#errorMsgRegion").html(closeButton+"Please upload atleast one proof of identity document."),$("#errorMsgRegion").show(),!1))):(showErrorMessage("Please verify all the documents"),$("html, body").animate({scrollTop:0},"slow"),!1)}function addressValidation(){$("#UnitTypeId").rules("add",{required:!1}),$("#UnitNumber").rules("add",{required:!1}),""==$("#UnitTypeId").val()&&""==$("#UnitNumber").val()&&($("#lblUnitNumber").removeClass("required"),$("#lblUnitTypeID").removeClass("required"),$("#UnitNumber").rules("add",{required:!1}),$("#UnitTypeId").rules("add",{required:!1}),$("#UnitNumber").next("span").attr("class","field-validation-valid"),$("#lblStreetNumber").addClass("required"),$("#StreetNumber").rules("add",{required:!0,messages:{required:"Street Number is required."}})),$("#UnitTypeId").val()>0&&""!=$("#UnitNumber").val()&&($("#lblStreetNumber").removeClass("required"),$("#StreetNumber").rules("add",{required:!1}),$("#lblUnitNumber").removeClass("required"),$("#lblUnitTypeID").removeClass("required"),$("#UnitNumber").rules("add",{required:!1}),$("#UnitTypeId").rules("add",{required:!1})),$("#UnitTypeId").val()>0&&""==$("#UnitNumber").val()&&($("#UnitNumber").rules("add",{required:!0,messages:{required:"Unit Number is required."}}),$("#lblUnitNumber").addClass("required"),$("#lblStreetNumber").removeClass("required"),$("#StreetNumber").rules("add",{required:!1})),""==$("#UnitTypeId").val()&&""!=$("#UnitNumber").val()&&($("#lblUnitNumber").removeClass("required"),$("#lblUnitTypeID").removeClass("required"),$("#UnitNumber").rules("add",{required:!1}),$("#UnitTypeId").rules("add",{required:!1}),$("#lblStreetNumber").addClass("required"),$("#StreetNumber").rules("add",{required:!0,messages:{required:"Street Number is required."}}))}function DeleteDocumentFolderOnCancel(){var e=USERID,i=[];i=document.getElementsByName("FileNamesCreate");var t=document.getElementsByName("Signature");t[0].id;if(i.length>0)for(var o=0;o<i.length;o++){var a=i[o].id;DeleteFileFromUserOnCancel(a,e)}}$(document).ready(function(){if(1!=sessionUserTypeId&&3!=sessionUserTypeId&&2!=sessionUserTypeId&&5!=sessionUserTypeId||($("#lblUserName").removeClass("required"),$("#UserName").rules("add",{required:!1}),$("#lblPassword").removeClass("required"),$("#Password").rules("add",{required:!1})),$(".viewPre").show(),$(".SE").find("[idClass='docVerification']").each(function(){$(this).rules("add",{required:!1})}),dropDownData.push({id:"UnitTypeId",key:"UnitType",value:unitTypeID,hasSelect:!0,callback:null,defaultText:null,proc:"UnitType_BindDropdown",param:[],bText:"UnitTypeName",bValue:"UnitTypeID"},{id:"StreetTypeId",key:"StreetType",value:streetTypeId,hasSelect:!0,callback:null,defaultText:null,proc:"StreetType_BindDropdown",param:[],bText:"StreetTypeName",bValue:"StreetTypeID"},{id:"PostalAddressID",key:"PostalAddress",value:postalAddressID,hasSelect:!0,callback:null,defaultText:null,proc:"PostalAddress_BindDropdown",param:[],bText:"PostalDeliveryType",bValue:"PostalAddressID"},{id:"RoleID",key:"Role",value:modelRoleId,hasSelect:!0,callback:null,defaultText:null,proc:"Role_BindDropDown",param:[{UserType:userTypeId},{CreatedBy:sessionLoggedInUserId}],bText:"Name",bValue:"RoleId"},{id:"UserTypeId",key:"UserType",value:userTypeId,hasSelect:!0,callback:null,defaultText:null,proc:"UserType_BindDropdown",param:[],bText:"UserTypeName",bValue:"UserTypeID"}),0!=userTypeId&&ChangeUserType(userTypeId),2==modelStatus&&$(".btnSubmit").hide(),1!=sessionUserTypeId&&3!=sessionUserTypeId||$(".btnSubmit").show(),""!=$("#imgSign").attr("src")){var e=$("#imgSign").attr("src"),i=modelUserId,t=a+"UserDocuments/"+i,o=t+"/"+e;SRCSign=o,$("#imgSign").attr("class",e),$("#imgSignature").show()}if(""!=$("#imgSelfieImage").attr("src")){e=$("#imgSelfieImage").attr("src"),i=modelUserId;var a=a;t=a+"UserDocuments/"+i,o=t+"/"+e;SRCSelfie=o,$("#imgSelfieImage").attr("class",e),$("#imgSelfie").show()}""!=strFromDate&&"0001-01-01"!=strFromDate||$("#fromDate").val(""),"0001-01-01"!=strToDate&&""!=strToDate||$("#toDate").val(""),4==userTypeId&&(0==chkSTC?($(".chkisSTC").hide(),$(".chkSCASignUp").hide()):($(".chkisSTC").show(),$(".chkSCASignUp").show())),$("#Status").val(parseInt(modelStatus)),$("#IsVerified").val(isverified),$("[name=SEDesigner][value="+SEDesigner+"]").prop("checked",!0),$(".viewPre").show(),$(".ViewBtn").hide(),$(".viewDetail").hide(),$(".SCAShowUsername").show(),$(".SCAcode").show(),""==$("#UnitTypeId option:selected").val()?($("#lblUnitNumber").removeClass("required"),$("#lblUnitTypeID").removeClass("required"),$("#lblStreetNumber").addClass("required")):($("#lblUnitNumber").addClass("required"),$("#lblUnitTypeID").addClass("required"),$("#lblStreetNumber").removeClass("required")),$("#btnClosePopUpBox").click(function(){$("#popupbox").modal("hide")}),$("#btnClosePopUpBoxSE").click(function(){$("#popupboxSE").modal("toggle")}),$("#btnClosepopupProof").click(function(){$("#popupProof").modal("toggle")}),$("#btnClosePopUpBoxSelfie").click(function(){$("#popupboxSelfie").modal("toggle")}),$("#btnViewCancel").click(function(){4==userTypeId?window.location.href=getSCAURL:window.location.href=getSEURL}),$("#horizontalTab").easyResponsiveTabs({type:"default",width:"auto",fit:!0,closed:"accordion",activate:function(e){addressValidation();var i=$(this);return 7!=userTypeId||$("#IsPVDUser").prop("checked")||$("#IsSWHUser").prop("checked")?isValid&&CheckShowMessages()&&addRules()?(activeTab=i.attr("id"),"t3"==activeTab&&4==userTypeId&&autoCompleteRAM(modelRAMId,modelResellerId),void("t6"==activeTab&&$.ajax({type:"GET",url:getInstallerDesignerAddedByProfileURL,data:{usertypeId:userTypeId,solarcompanyId:modelSolarCompanyId},contentType:"application/json",success:function(e){$("#instDesignerAddedByProfile").html(e)}}))):(i.removeClass("resp-tab-active"),$(".resp-tab-content-active").css("display","none").removeClass("resp-tab-content-active"),$("#"+activeTab).addClass("resp-tab-active"),$(".tab"+activeTab.replace("t","")).addClass("resp-tab-content-active").css("display","block"),CheckShowMessages(),addRules(),!1):(i.removeClass("resp-tab-active"),$(".resp-tab-content-active").css("display","none").removeClass("resp-tab-content-active"),$("#"+activeTab).addClass("resp-tab-active"),$(".tab"+activeTab.replace("t","")).addClass("resp-tab-content-active").css("display","block"),alert("At least one work type should be selected."),!1)}}),addressID=addressId,POAddress(addressID),$("#AddressID").val(parseInt(addressId)),$("#verticalTab").easyResponsiveTabs({type:"vertical",width:"auto",fit:!0});var s=companyName;-1!=s.indexOf("&#39")?s=s.replace(/&#39;/g,"'"):-1!=s.indexOf("&amp")?str=s.replace(/&amp;/g,"&"):-1!=s.indexOf("&quot")?s=s.replace(/&quot;/g,'"'):-1!=s.indexOf("&lt")?s=s.replace(/&lt;/g,"<"):-1!=s.indexOf("&gt")&&(s=s.replace(/&gt;/g,">")),$("#CompanyName").append($("<option></option>").val(s).html(s)),$("#CompanyName").val(s),$(".form-box").find("input:first").focus(),$("#txtTown").autocomplete({minLength:3,source:function(e,i){$.ajax({type:"GET",url:processRequestURL,dataType:"json",data:{excludePostBoxFlag:!0,q:e.term},success:function(e){var t=JSON.parse(e);t.localities.locality instanceof Array?i($.map(t.localities.locality,function(e){return{label:e.location+", "+e.state+", "+e.postcode,value:e.location,state:e.state,postcode:e.postcode}})):i($.map(t.localities,function(e){return{label:e.location+", "+e.state+", "+e.postcode,value:e.location,state:e.state,postcode:e.postcode}}))}})},select:function(e,i){$("#txtState").val(i.item.state),$("#txtPostCode").val(i.item.postcode)}}),$("#txtPostCode").autocomplete({minLength:3,source:function(e,i){$.ajax({type:"GET",url:processRequestURL,dataType:"json",data:{excludePostBoxFlag:!0,q:e.term},success:function(e){var t=JSON.parse(e);t.localities.locality instanceof Array?i($.map(t.localities.locality,function(e){return{label:e.location+", "+e.state+", "+e.postcode,value:e.postcode,state:e.state,location:e.location}})):i($.map(t.localities,function(e){return{label:e.location+", "+e.state+", "+e.postcode,value:e.postcode,state:e.state,location:e.location}}))}})},select:function(e,i){$("#txtState").val(i.item.state),$("#txtTown").val(i.item.location)}}),dropDownData.bindDropdown()}),$("#ValidationSummaryClose").click(function(){$("#ValidationSummary").hide()}),$("#UserTypeId").change(function(){var e=$("#UserTypeId option:selected").val();ChangeUserType(e)}),$("#CompanyABN").change(function(){var e=$("#CompanyABN").val();$.ajax({type:"GET",url:getGetCompanyABNURL,data:{id:e},contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){if(0!=e)return $("#CompanyName option").length>1?($("#CompanyName").empty(),$("#CompanyName").append($("<option></option>").val("").html("Select")),$.each(e,function(e,i){$("#CompanyName").append($("<option></option>").val(i.CompanyName).html(i.CompanyName))})):$.each(e,function(e,i){$("#CompanyName").append($("<option></option>").val(i.CompanyName).html(i.CompanyName))}),initialize(e),e;$("#CompanyName").empty(),$("#fromDate").val(""),$("#toDate").val(""),$("#CompanyName").append($("<option></option>").val("").html("Select"))}})}),$("#imgSignature").click(function(){$("#loading-image").css("display",""),SRCSign=proofDocumentURL+"UserDocuments/"+modelUserId+"/"+$("#imgSign").attr("class"),$("#imgSign").attr("src",SRCSign),$("#imgSign").load(function(){logoWidth=this.width,logoHeight=this.height,$("#popupbox").modal({backdrop:"static",keyboard:!1}),$(window).height()<=logoHeight?($("#imgSign").closest("div").height($(window).height()-205),$("#imgSign").closest("div").css("overflow-y","scroll"),$("#imgSign").height(logoHeight)):($("#imgSign").height(logoHeight),$("#imgSign").closest("div").removeAttr("style")),screen.width<=logoWidth||logoWidth>=screen.width-250?($("#popupbox").find(".modal-dialog").width(screen.width-250),$("#imgSign").width(logoWidth)):($("#imgSign").width(logoWidth),$("#popupbox").find(".modal-dialog").width(logoWidth)),$("#loading-image").css("display","none")}),$("#imgSign").unbind("error"),$("#imgSign").attr("src",SRCSign).error(function(){alert("Image does not exist."),$("#loading-image").css("display","none")})}),$("#imgSignatureSE").click(function(){$("#loading-image").css("display",""),modelUserId>0&&(SRCSign=proofDocumentURL+"UserDocuments/"+modelUserId+"/"+$("#imgSign").attr("class")),$("#imgSignSE").attr("src",SRCSign),$("#imgSignSE").load(function(){logoWidth=this.width,logoHeight=this.height,$("#popupboxSE").modal({backdrop:"static",keyboard:!1}),$(window).height()<=logoHeight?($("#imgSignSE").closest("div").height($(window).height()-205),$("#imgSignSE").closest("div").css("overflow-y","scroll"),$("#imgSignSE").height(logoHeight)):($("#imgSignSE").height(logoHeight),$("#imgSignSE").closest("div").removeAttr("style")),screen.width<=logoWidth||logoWidth>=screen.width-250?($("#popupboxSE").find(".modal-dialog").width(screen.width-250),$("#imgSignSE").width(logoWidth)):($("#imgSignSE").width(logoWidth),$("#popupboxSE").find(".modal-dialog").width(logoWidth)),$("#loading-image").css("display","none")}),$("#imgSignSE").unbind("error"),$("#imgSignSE").attr("src",SRCSign).error(function(){alert("Image does not exist."),$("#loading-image").css("display","none")})}),$(".resp-tabs-list li").click(function(e,i){$(this);addRules(),isValid=$("#UserDetails").valid()}),$("#AddressID").change(function(){var e=$("#AddressID option:selected").val();POAddress(e)}),$("#chkSCA").change(function(){$(this).is(":checked")?$(".chkSCASignUp").show():$(".chkSCASignUp").hide()}),$("#IsSAASUser").change(function(){if(ShowHideWholeSalerInvoice(),$("#IsSAASUser").is(":checked")){var e=$("#InvoicerAddressID").val();POInvoicerAddress(e)}});