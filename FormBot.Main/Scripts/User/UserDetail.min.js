function POWholesalerAddress(e){1==e?($(".DPAWholesaler").show(),$(".PDAWholesaler").hide()):($(".DPAWholesaler").hide(),$(".PDAWholesaler").show())}function POInvoicerAddress(e){1==e?($(".DPAInvoicer").show(),$(".PDAInvoicer").hide()):($(".DPAInvoicer").hide(),$(".PDAInvoicer").show())}function ShowHideWholeSalerInvoice(){$("#IsSAASUser").is(":checked")?("2"==userTypeId&&($("#t10").show(),$(".tab10btn").hide(),$(".tab10Next").show(),$(".SAAS").show(),$(".PersonlDetailsNext").hide(),$("#prevBtnFromSAASTabToWholeSalerTab").hide(),$("#prevBtnFromSAASTabToAccountDetailTab").show(),$(".PersonlDetailsNextForInstallerAndDesigner").hide(),$(".NextBtnToInstallerTabFromAccountTab").hide(),$(".ParentBtnOfAccountDetail").hide()),"1"==userTypeId&&($("#t10").show(),$(".ParentBtnOfPersonalDetail").hide(),$(".PersonlDetailsNext").show(),$(".PersonlDetailsNextForInstallerAndDesigner").hide(),$(".SAAS").show()),"3"==userTypeId&&($("#t10").show(),$(".ParentBtnOfPersonalDetail").hide(),$(".PersonlDetailsNext").show(),$(".PersonlDetailsNextForInstallerAndDesigner").hide(),$(".SAAS").show()),"5"==userTypeId&&($("#t10").show(),$(".ParentBtnOfPersonalDetail").hide(),$(".PersonlDetailsNext").show(),$(".PersonlDetailsNextForInstallerAndDesigner").hide(),$(".SAAS").show()),"6"==userTypeId&&($(".NextBtnToInstallerTabFromAccountTab").show(),$(".BtnFromInstallerTabToSaasTab").show(),$(".ParentBtnOfAccountDetail").hide(),$("#t10").show(),$(".ParentBtnOfPersonalDetail").hide(),$(".PersonlDetailsNext").hide(),$(".PersonlDetailsNextForInstallerAndDesigner").hide(),$(".SAAS").show()),"9"==userTypeId&&($("#t10").show(),$(".NextBtnToInstallerTabFromAccountTab").hide(),$(".ParentBtnOfPersonalDetail").hide(),$(".ParentBtnOfAccountDetail").hide(),$(".PersonlDetailsNext").hide(),$(".tab10Next").show(),$(".SAAS").show(),$(".PersonlDetailsNextForInstallerAndDesigner").hide()),"8"==userTypeId&&($("#t10").show(),$(".NextBtnToInstallerTabFromAccountTab").show(),$(".ParentBtnOfPersonalDetail").hide(),$(".ParentBtnOfAccountDetail").hide(),$(".PersonlDetailsNextForInstallerAndDesigner").show(),$(".PersonlDetailsNext").hide(),$(".SAAS").show()),"7"==userTypeId&&($("#t10").show(),$(".SAAS").show(),$(".ParentBtnOfAccountDetail").hide(),$(".NextBtnToInstallerTabFromAccountTab").hide(),$(".PersonlDetailsNext").hide(),$(".PersonlDetailsNextForInstallerAndDesigner").hide(),$(".tab10Next").show()),"12"==userTypeId&&($("#t10").show(),$(".SAAS").show(),$(".ParentBtnOfAccountDetail").hide(),$(".NextBtnToInstallerTabFromAccountTab").hide(),$(".tab10Next").show()),"4"==userTypeId&&($("#t10").show(),$(".SAAS").show(),$(".PersonlDetailsNext").hide(),$(".PersonlDetailsNextForInstallerAndDesigner").hide(),$(".NextBtnToInstallerTabFromAccountTab").hide(),$(".tab10Next").hide())):("2"==userTypeId&&($("#t10").hide(),$(".SAAS").hide(),$(".tab10Next").hide(),$(".PersonlDetailsNext").hide(),$("#prevBtnFromSAASTabToWholeSalerTab").show(),$("#prevBtnFromSAASTabToAccountDetailTab").hide(),$(".PersonlDetailsNextForInstallerAndDesigner").hide(),$(".NextBtnToInstallerTabFromAccountTab").hide(),$(".ParentBtnOfAccountDetail").hide()),"1"==userTypeId&&($(".ParentBtnOfPersonalDetail").show(),$(".PersonlDetailsNext").hide(),$(".PersonlDetailsNextForInstallerAndDesigner").hide(),$("#t10").hide(),$(".SAAS").hide()),"3"==userTypeId&&($(".ParentBtnOfPersonalDetail").show(),$(".PersonlDetailsNext").hide(),$(".PersonlDetailsNextForInstallerAndDesigner").hide(),$("#t10").hide(),$(".SAAS").hide()),"5"==userTypeId&&($(".ParentBtnOfPersonalDetail").show(),$(".PersonlDetailsNext").hide(),$(".PersonlDetailsNextForInstallerAndDesigner").hide(),$("#t10").hide(),$(".SAAS").hide()),"6"==userTypeId&&($(".NextBtnToInstallerTabFromAccountTab").hide(),$(".BtnFromInstallerTabToSaasTab").hide(),$(".PersonlDetailsNext").hide(),$(".PersonlDetailsNextForInstallerAndDesigner").hide(),$("#t10").hide(),$(".SAAS").hide()),"9"==userTypeId&&($(".NextBtnToInstallerTabFromAccountTab").hide(),$(".ParentBtnOfPersonalDetail").show(),$(".ParentBtnOfAccountDetail").hide(),$(".PersonlDetailsNext").hide(),$(".PersonlDetailsNextForInstallerAndDesigner").hide(),$(".tab10Next").hide(),$("#t10").hide(),$(".SAAS").hide()),"8"==userTypeId&&($("#t10").hide(),$(".NextBtnToInstallerTabFromAccountTab").show(),$(".ParentBtnOfPersonalDetail").show(),$(".ParentBtnOfAccountDetail").hide(),$(".PersonlDetailsNextForInstallerAndDesigner").hide(),$(".PersonlDetailsNext").hide(),$(".SAAS").hide()),"7"==userTypeId&&($("#t10").hide(),$(".SAAS").hide(),$(".ParentBtnOfAccountDetail").show(),$(".NextBtnToInstallerTabFromAccountTab").show(),$(".PersonlDetailsNext").hide(),$(".PersonlDetailsNextForInstallerAndDesigner").hide(),$(".tab10Next").hide()),"12"==userTypeId&&($("#t10").hide(),$(".SAAS").hide(),$(".ParentBtnOfAccountDetail").show(),$(".NextBtnToInstallerTabFromAccountTab").show(),$(".tab10Next").hide()),"4"==userTypeId&&($("#t10").show(),$(".SAAS").show(),$(".PersonlDetailsNext").hide(),$(".PersonlDetailsNextForInstallerAndDesigner").hide(),$(".NextBtnToInstallerTabFromAccountTab").hide(),$(".tab10Next").hide())),$("#IsWholeSaler").is(":checked")?($("#t7").show(),$("#wholeSalerTabSavebtn").show(),$("#tab10NextFromWholesaler").hide(),$(".tab10btn").hide(),$(".tab7Next").show()):($("#t7").hide(),$("#wholeSalerTabSavebtn").hide(),$(".tab7Next").hide()),$("#IsSAASUser").is(":checked")&&$("#IsWholeSaler").is(":checked")?($(".tab7Next").show(),$(".tab10Next").hide(),$("#wholeSalerTabSavebtn").hide(),$("#tab10NextFromWholesaler").show(),$(".tab10btn").hide(),$("#prevBtnFromSAASTabToWholeSalerTab").show(),$("#prevBtnFromSAASTabToAccountDetailTab").hide()):$("#IsSAASUser").is(":checked")||$("#IsWholeSaler").is(":checked")||($(".tab7Next").hide(),$(".tab10Next").hide(),$("#tab10NextFromWholesaler").hide(),$(".tab10btn").show(),$("#prevBtnFromSAASTabToWholeSalerTab").hide(),$("#prevBtnFromSAASTabToAccountDetailTab").show())}function ShowHidePVD(){var e=$("input[name='InstallerUserType']:checked").val();0==e?($('label[for="installerDesignerView_Email"]').removeClass("required"),$("#installerDesignerView_Email").attr("idClass","installerDesignerNotRequired"),$(".showPVD").show(),$(".showSWH").hide(),$("#installerDesignerView_FirstName").attr("readonly","readonly"),$("#installerDesignerView_LastName").attr("readonly","readonly")):1==e&&($('label[for="installerDesignerView_Email"]').addClass("required"),$("#installerDesignerView_Email").attr("idClass","installerDesignerRequired"),$(".showPVD").hide(),$(".showSWH").show(),$("#installerDesignerView_FirstName").removeAttr("readonly"),$("#installerDesignerView_LastName").removeAttr("readonly"))}function ResetInstallerDesigner(){RemoveValidationMsgAndBorder(),$(".installerDesignerDiv").find("[idClass='installerDesignerRequired']").each(function(){$(this).val("")}),$(".installerDesignerDiv").find("[idClass='installerDesignerNotRequired']").each(function(){$(this).val("")}),$("#installerDesignerView_InstallerDesignerId").val(0),$("#imgSignatureInstallDesign").hide(),$("[name='installerDesignerView.SESignature']").val(""),$(".installerDesignerDiv").find("[name='SEDesignRoleId']").filter("[value=2]").prop("checked",!0),1==sessionLoggedInUserId&&($("#SolarSubContractorID").val(0),$("#ResellerId").val($("#ResellerId option:first").val()),$("#searchSolarCompany").val("")),$("#installerDesignerView_AddressID").val(1),$("#addInstallerDesigner").html('<span class="sprite-img save_ic"></span> Add Installer/Designer'),$("#installerDesignerView_CECAccreditationNumber").removeAttr("readonly"),$("#installerDesignerView_ElectricalContractorsLicenseNumber").removeAttr("readonly"),$("#installerDesignerView_SWHLicenseNumber").removeAttr("readonly"),$("#installerDesignerView_Email").removeAttr("readonly"),$(".PDAInstallerDesigner").each(function(){$(this).hide()}),$(".DPAInstallerDesigner").each(function(){$(this).show()}),$("#installerDesignerView_CECAccreditationNumber").attr("onblur","checkExistInstallerDesigner(this,'InstallerDesigner AccreditationNumber')")}function CancelInstallerDesigner(){ResetInstallerDesigner(),$("#btnResetInstallerDesigner").show(),$("#btnCancelInstallerDesigner").hide()}function GetSolarCompanyIdforInstallerDesigner(){var e=0;return e=6!=userTypeId&&4!=userTypeId||1!=sessionUserTypeId&&3!=sessionUserTypeId&&2!=sessionUserTypeId&&5!=sessionUserTypeId?sessionSolarCompanyId:modelSolarCompanyId,e}function POAddressInstallerDesigner(e){1==e?($(".DPAInstallerDesigner").show(),$(".PDAInstallerDesigner").hide()):($(".DPAInstallerDesigner").hide(),$(".PDAInstallerDesigner").show())}function checkExistInstallerDesigner(e,t){var a=e.id,l="",s=e.value,i=0;i=GetSolarCompanyIdforInstallerDesigner(),""!=s&&null!=s&&($.ajax({url:projectURL+"CheckUserExist",data:{UserValue:s,FieldName:a,userId:userID,resellerID:resellerID,solarCompanyId:parseInt(i)},async:!1,contentType:"application/json",method:"get",success:function(e){var t;0==e.status?(t=e.message,l=!1,$(".alert").hide(),$("#errorMsgRegion").html(closeButton+t),$("#errorMsgRegion").show()):l=!0;if(0==l)return $("#installerDesignerView_FirstName").val(""),$("#installerDesignerView_LastName").val(""),$("#installerDesignerView_Email").val(""),$("#installerDesignerView_Phone").val(""),$("#installerDesignerView_Mobile").val(""),$("#installerDesignerView_ElectricalContractorsLicenseNumber").val(""),$(".installerDesignerDiv").find("[name='SEDesignRoleId']").filter("[value=2]").prop("checked",!0),$("#installerDesignerView_AddressID").val(1),$("#installerDesignerView_UnitTypeID").val(""),$("#installerDesignerView_UnitNumber").val(""),$("#installerDesignerView_StreetNumber").val(""),$("#installerDesignerView_StreetName").val(""),$("#installerDesignerView_StreetTypeID").val(""),$("#installerDesignerView_Town").val(""),$("#installerDesignerView_State").val(""),$("#installerDesignerView_PostCode").val(""),!1;$("#errorMsgRegion").hide(),$("#successMsgRegion").hide();var a=JSON.parse(e.accreditedData);return $("#installerDesignerView_FirstName").val(a.FirstName),$("#installerDesignerView_LastName").val(a.LastName),$("#installerDesignerView_Email").val(a.Email),$("#installerDesignerView_Phone").val(a.Inst_Phone),$("#installerDesignerView_Mobile").val(a.Inst_Mobile),$("#installerDesignerView_ElectricalContractorsLicenseNumber").val(a.LicensedElectricianNumber),$(".installerDesignerDiv").find("[name='SEDesignRoleId']").filter("[value="+a.RoleId+"]").prop("checked",!0),$("#installerDesignerView_AddressID").val(1),parseInt(a.Inst_UnitTypeID)>0?$("#installerDesignerView_UnitTypeID").val(a.Inst_UnitTypeID):$("#installerDesignerView_UnitTypeID").val(""),$("#installerDesignerView_UnitNumber").val(a.MailingAddressUnitNumber),$("#installerDesignerView_StreetNumber").val(a.MailingAddressStreetNumber),$("#installerDesignerView_StreetName").val(a.MailingAddressStreetName),parseInt(a.StreetTypeID)>0?$("#installerDesignerView_StreetTypeID").val(a.StreetTypeID):$("#installerDesignerView_StreetTypeID").val(""),$("#installerDesignerView_Town").val(a.MailingCity),$("#installerDesignerView_State").val(a.Abbreviation),$("#installerDesignerView_PostCode").val(a.PostalCode),!1}}),$("#"+e.id).closest("form").valid())}function showErrorMessage(e){$(".alert").hide(),$("#successMsgRegion").hide(),$("#errorMsgRegion").html(closeButton+e),$("#errorMsgRegion").show()}function showSuccessMessage(e){$(".alert").hide(),$("#errorMsgRegion").hide(),$("#successMsgRegion").html(closeButton+e),$("#successMsgRegion").show()}function showErrorMessageForPopup(e){$(".alertForPopup").hide(),$("#successMsgRegionForPopup").hide(),$("#errorMsgRegionForPopup").html(closeButton+e),$("#errorMsgRegionForPopup").show()}function showSuccessMessageForPopup(e){$(".alertForPopup").hide(),$("#errorMsgRegionForPopup").hide(),$("#successMsgRegionForPopup").html(closeButton+e),$("#successMsgRegionForPopup").show()}function removeSolarElecticianValidation(){$(".installerDesignerDiv").find("[idClass='installerDesignerRequired']").each(function(){$(this).rules("add",{required:!1})}),$(".installerDesignerDiv").find("[idClass='installerDesignerNotRequired']").each(function(){$(this).rules("add",{required:!1})})}function isValidPhone(e,t){return!!e.ctrlKey||(43==e.which&&$("#"+t.id).val().length<2&&-1==$("#"+t.id).val().indexOf("+")||!(e.which>31&&(e.which<48||e.which>57)))}function removeValidationOnTabChangeInstallerDesigner(){$(".installerDesignerDiv").find("[idClass='installerDesignerRequired']").each(function(){$(this).rules("add",{required:!1})}),$(".installerDesignerDiv").find("[idClass='installerDesignerNotRequired']").each(function(){$(this).rules("add",{required:!1})})}function RemoveValidationMsgAndBorder(){$(".installerDesignerDiv").find("[idClass='installerDesignerRequired']").each(function(){$(this).removeClass("input-validation-error"),$(this).next().find("span").length>0&&$(this).next().find("span").remove()})}function CheckInXero(e,t=-1){$.ajax({url:checkInXeroURL,data:{userId:$("#UserId").val(),isAllowInsert:e,XeroContactAlreadyExists:t},dataType:"json",contentType:"application/json; charset=utf-8",type:"get",success:function(e){if(e&&0==e.status){if(1==e.XeroContactAlreadyExists){var t=confirm("This contact is already exists, would you like to open it?");return!!t&&(CheckInXero(!0,1),!1)}if(0==e.isAllowInsert){t=confirm("This contact is not found, would you like to create this contact in XERO?");return!!t&&(CheckInXero(!0,2),!1)}"specified method is not supported."==e.error.toLowerCase()||"renewtokenexception"==e.error.toLowerCase()||"unauthorizedexception"==e.error.toLowerCase()||"invalid_grant"==e.error.toLowerCase()?window.open(xeroConnectURL,"_blank"):"sessiontimeout"==e.error.toLowerCase()?window.location.href=logoutURL:e.error?showErrorMessage(e.error):showErrorMessage("Contact has not been checked.")}else{var a=jQuery.parseJSON(e.data);$("#LoadContactDetail").load(xeroContactURL,{Data:a}),setTimeout(function(){$("#popupboxContact").modal({backdrop:"static",keyboard:!1}),$("#LoadContactDetail").load(),$("#onOffSwitchAddCustomCompanyName").prop("checked")?($(".custom-company-name").show(),$("#UserView_CustomCompanyName").rules("add","required"),$("#UserView_CustomCompanyName").prev("label").removeClass("required").addClass("required")):($(".custom-company-name").hide(),$("#UserView_CustomCompanyName").val(""),onclick="$('#UsageType').val() == '2'?CheckInXero(false):CheckContactInXero();",$("#UserView_CustomCompanyName").rules("remove","required"),$("#UserView_CustomCompanyName").prev("label").addClass("required").removeClass("required")),HeighlightDifference()},1e3)}},error:function(e){showErrorMessage("Contact has not been checked.")}})}function BindRAMForSolarCompany(e,t){return $("#searchRAM").val(""),$.ajax({type:"get",url:GetRAMByResellerURL,dataType:"json",data:{resellerId:t},success:function(t){RAMList=[],$.each(t,function(e,t){RAMList.push({value:t.Value,text:t.Text})}),e>0&&($("#hdnRAMID").val(e),$.each(RAMList,function(t,a){a.value==e&&$("#searchRAM").val(a.text)}))},error:function(e){alert("Failed to retrieve greenbot account manager."+e)}}),!1}function CheckClientCodePrefix(e,t,a,l){var s,i,n;1==t?(s=a,n=l,i=0):(s=modelResellerId,n=n,i=modelUserId),""!=s&&null!=s&&null!=s||(s=0),""!=n&&null!=n&&null!=n||(n=0);var r=0;return $.ajax({type:"get",url:CheckClientCodePrefixURL,dataType:"json",data:{userTypeId:n,resellerId:s,userId:i,clientCodePrefix:e},async:!1,success:function(e){return e&&(e.count>0?(showErrorMessage(5==n?"Client code prefix is already used by another account manager.":"Client code prefix is already used by another reseller or account manager."),r=0):r=1),0},error:function(e){alert("Failed to check client code prefix")}}),r}function GetClientNumberofSCAOnRAMChange(){var e;e=1==sessionUserTypeId?$("#ResellerID").val():modelResellerId;var t=GetClientNumberOnRAMChangeURL,a="",l=0;""==$("#hdnRAMID").val()?(l=0,a=2):(l=$("#hdnRAMID").val(),a=5),GetClientNumberOnRAMChange(a,e,l,t)}function autoCompleteRAM(e,t){$("#searchRAM").autocomplete({minLength:0,source:function(e,t){var a=[];$("#hdnRAMID").val(""),$.each(RAMList,function(e,t){t.text.toLowerCase().indexOf($("#searchRAM").val().toLowerCase())>-1&&a.push({Title:t.text,id:t.value})}),t($.map(a,function(e){return{label:e.Title,value:e.Title,id:e.id}}))},select:function(e,t){$("#hdnRAMID").val(t.item.id),GetClientNumberofSCAOnRAMChange(),$("#RAMId").val($("#hdnRAMID").val())}}).on("focus",function(){$(this).keydown()}),$("#searchRAM").autocomplete("instance")._renderItem=function(e,t){var a=new RegExp($.trim(this.term.toLowerCase())),l=t.label.replace(a,"<span style='font-weight:600;'>"+$.trim(this.term.toLowerCase())+"</span>");return $("<li style='font-size:14px;'></li>").data("item.autocomplete",t).append("<a>"+l+"</a>").appendTo(e)},BindRAMForSolarCompany(e,t)}function ShowHideCheckInXero(e){4==e?$(".btnCheckInXero").show():$(".btnCheckInXero").hide()}function GetCompanyNameFromCompanyABN(e,t,a,l){$.ajax({type:"GET",url:getGetCompanyABNURL,data:{id:e},async:!1,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){if(0!=e){t.find("option").length>1?(t.empty(),t.append($("<option></option>").val("").html("Select")),$.each(e,function(e,a){t.append($("<option></option>").val(a.CompanyName).html(a.CompanyName))})):$.each(e,function(e,a){t.append($("<option></option>").val(a.CompanyName).html(a.CompanyName))}),initialize(e,t.selector.replace("#",""),l);var s=a;if(-1!=s.indexOf("&#39"))s=s.replace(/&#39;/g,"'");else if(-1!=s.indexOf("&amp"))s=s.replace(/&amp;/g,"&");else if(-1!=s.indexOf("&quot"))s=s.replace(/&quot;/g,'"');else if(-1!=s.indexOf("&lt"))s=s.replace(/&lt;/g,"<");else if(-1!=s.indexOf("&gt"))s=s.replace(/&gt;/g,">");return t.val(s),e}t.empty(),$("#fromDate").val(""),$("#toDate").val(""),t.append($("<option></option>").val("").html("Select"))}})}function initialize(e,t,a){$("#"+t).change(function(){$.each(e,function(e,l){var s=l.CompanyName,i=$("select#"+t+" option:selected").val();a||s==i&&($("#fromDate").val(l.strFromDate),$("#toDate").val(l.strToDate))})})}function ChangeCompanyABN(e,t,a){$.ajax({type:"GET",url:getGetCompanyABNURL,data:{id:e},contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){return 0==e?(t.empty(),$("#fromDate").val(""),$("#toDate").val(""),t.append($("<option></option>").val("").html("Select")),$(".alert").hide(),$("#errorMsgRegion").html(closeButton+"Invalide Company ABN."),$("#errorMsgRegion").show(),$("#CompanyNameRefresh i").removeClass("fa-spin"),!1):(t.find("option").length>1?(t.empty(),t.append($("<option></option>").val("").html("Select")),$.each(e,function(e,a){t.append($("<option></option>").val(a.CompanyName).html(a.CompanyName))})):$.each(e,function(e,a){t.append($("<option></option>").val(a.CompanyName).html(a.CompanyName))}),initialize(e,t.selector.replace("#",""),a),$(".alert").hide(),$("#errorMsgRegion").hide(),$("#CompanyNameRefresh i").removeClass("fa-spin"),e)}})}function TownPostcodeAutoComplete(e,t,a){e.autocomplete({minLength:3,source:function(e,t){$.ajax({type:"GET",url:processRequestURL,dataType:"json",data:{excludePostBoxFlag:!0,q:e.term},success:function(e){var a=JSON.parse(e);console.log(a),a.localities.locality instanceof Array?t($.map(a.localities.locality,function(e){return{label:e.location+", "+e.state+", "+e.postcode,value:e.location,state:e.state,postcode:e.postcode}})):t($.map(a.localities,function(e){return{label:e.location+", "+e.state+", "+e.postcode,value:e.location,state:e.state,postcode:e.postcode}}))}})},select:function(e,l){t.val(l.item.state),a.val(l.item.postcode)}}),a.autocomplete({minLength:3,source:function(e,t){$.ajax({type:"GET",url:processRequestURL,dataType:"json",data:{excludePostBoxFlag:!0,q:e.term},success:function(e){var a=JSON.parse(e);a.localities.locality instanceof Array?t($.map(a.localities.locality,function(e){return{label:e.location+", "+e.state+", "+e.postcode,value:e.postcode,state:e.state,location:e.location}})):t($.map(a.localities,function(e){return{label:e.location+", "+e.state+", "+e.postcode,value:e.postcode,state:e.state,location:e.location}}))}})},select:function(a,l){t.val(l.item.state),e.val(l.item.location)}})}function POAddress(e){$(".POID").find(".field-validation-error").attr("class","field-validation-valid"),1==e?($(".DPA").show(),$(".PDA").hide(),$("#PostalAddressID").attr("class","form-control valid"),$("#PostalDeliveryNumber").attr("class","form-control valid")):($(".DPA").hide(),$(".PDA").show(),$("#UnitTypeId").attr("class","form-control valid"),$("#UnitNumber").attr("class","form-control valid"),$("#StreetNumber").attr("class","form-control valid"),$("#StreetTypeId").attr("class","form-control valid"),$("#StreetName").attr("class","form-control valid"))}function proofUpload(e,t){var a=projectURL+"Upload";$(".btnUploadProofDocs").fileupload({url:a,dataType:"json",done:function(a,l){var s=[];s.length=0;var i=[];i.length=0;for(var n=0;n<l.result.length;n++)if(1==l.result[n].Status){var r=$("#"+e+" tr").length,o=r+1,c=l.result[n].MimeType.split("/"),d=c[0],u="<tr style='margin-top:30px'>";6!=t&&(u+='<td class="tdCount col-sm-2" >'+o+". </td>"),u+='<td class="col-sm-6" style="color:#494949">'+l.result[n].FileName.replace("%","$")+" </td>",u+="image"==d&&6!=t?'<td  class="col-sm-2" style="color:blue"><img src='+ProjectImagePath+'images/view-icon.png style="cursor: pointer" class="'+l.result[n].FileName.replace("%","$")+'" title="Preview" onclick="OpenDocument(this)" proofDocumentType="'+t+'"></td>':'<td  class="col-sm-2" style="color:blue"><img src='+ProjectImagePath+'images/view-icon.png style="cursor: pointer" class="'+l.result[n].FileName.replace("%","$")+'" title="Download" onclick="DownloadDocument(this)" proofDocumentType="'+t+'"></td>';var p="javascript:DeleteFileFromFolder('"+l.result[n].FileName+"','"+t+"')";u+='<td style="color:blue"><img src='+ProjectImagePath+'images/delete-icon.png style="cursor: pointer id="signDelete" title="Delete" onclick="'+p+'"></td>',u+="</tr>",DocCount+=1,6==t?$("#"+e).html(u):$("#"+e).append(u),$('<input type="hidden">').attr({name:"ProofFileNamesCreate["+DocCount+"].FileName",value:l.result[n].FileName.replace("%","$"),proofDocumentType:t,file:l.result[n].FileName.replace("%","$"),class:"ProofFileNamesCreate"}).appendTo("form"),$('<input type="hidden">').attr({name:"ProofFileNamesCreate["+DocCount+"].ProofDocumentType",value:t,proofDocumentType:t,file:l.result[n].FileName.replace("%","$"),class:"ProofFileNamesCreate"}).appendTo("form"),6==t&&($('<input type="hidden">').attr({name:"ContractPathFile["+DocCount+"].FileName",value:l.result[n].FileName.replace("%","$"),proofDocumentType:t,file:l.result[n].FileName.replace("%","$"),class:"ContractPathFile"}).appendTo("form"),$('<input type="hidden">').attr({name:"ContractPathFile["+DocCount+"].ProofDocumentType",value:t,proofDocumentType:t,file:l.result[n].FileName.replace("%","$"),class:"ContractPathFile"}).appendTo("form"))}else 0==l.result[n].Status&&"BigName"==l.result[n].Message?i.push(l.result[n].FileName.replace("%","$")):s.push(l.result[n].FileName.replace("%","$"));s.length>0&&($(".alert").hide(),$("#successMsgRegion").hide(),$("#errorMsgRegion").html(closeButton+s.length+" File has not been uploaded."),$("#errorMsgRegion").show()),i.length>0&&($(".alert").hide(),$("#successMsgRegion").hide(),$("#errorMsgRegion").html(closeButton+i.length+" Uploaded filename is too big."),$("#errorMsgRegion").show()),0==i.length&&0==s.length&&($(".alert").hide(),$("#errorMsgRegion").hide(),$("#successMsgRegion").html(closeButton+"File has been uploaded successfully."),$("#successMsgRegion").show())},progressall:function(e,t){},singleFileUploads:!1,send:function(e,t){if(1==t.files.length)for(var a=0;a<t.files.length;a++){if(t.files[a].name.length>50)return $(".alert").hide(),$("#successMsgRegion").hide(),$("#errorMsgRegion").html(closeButton+"Please upload small filename."),$("#errorMsgRegion").show(),$("html").animate({scrollTop:0},"slow"),$("body").animate({scrollTop:0},"slow"),!1;if(CheckSpecialCharInFileName(t.files[a].name))return ShowErrorMsgForFileName("Please upload file that not conatain <> ^ [] ."),!1}if(t.files.length>1)for(a=0;a<t.files.length;a++){if(t.files[a].size>parseInt(MaxImageSize))return $(".alert").hide(),$("#successMsgRegion").hide(),$("#errorMsgRegion").html(closeButton+" "+t.files[a].name+" Maximum file size limit exceeded. Please upload a file smaller  than "+maxsize+"MB"),$("#errorMsgRegion").show(),!1;if(CheckSpecialCharInFileName(t.files[a].name))return ShowErrorMsgForFileName("Please upload file that not conatain <> ^ [] ."),!1}else if(t.files[0].size>parseInt(MaxImageSize))return $(".alert").hide(),$("#successMsgRegion").hide(),$("#errorMsgRegion").html(closeButton+"Maximum  file size limit exceeded.Please upload a  file smaller than "+maxsize+"MB"),$("#errorMsgRegion").show(),!1;return $(".alert").hide(),$("#errorMsgRegion").html(""),$("#errorMsgRegion").hide(),$('<input type="hidden">').attr({name:"Guid",value:USERID}).appendTo("form"),!0},formData:{userId:USERID,ProofDocumentType:parseInt(t),IsScaProofDocs:6!=t},change:function(e,t){$("#uploadFile").val("C:\\fakepath\\"+t.files[0].name)}}).prop("disabled",!$.support.fileInput).parent().addClass($.support.fileInput?void 0:"disabled")}function proofUploadInstaller(e){var t=projectURL+"Upload";$(".btnUploadProofDocs").fileupload({url:t,dataType:"json",done:function(t,a){var l=[];l.length=0;var s=[];s.length=0;for(var i=0;i<a.result.length;i++)if(1==a.result[i].Status){var n=$("#"+p+" tr").length,r=n+1,o=a.result[i].MimeType.split("/"),c=o[0],d="<tr style='margin-top:30px' id='Doc_"+e+"'>";d+='<td class="tdCount col-sm-2" >'+r+". </td>",d+='<td class="col-sm-6" style="color:#494949">'+a.result[i].FileName.replace("%","$")+" </td>",d+='<td class="col-sm-6" style="color:#494949">'+e+" </td>",d+="image"==c?'<td  class="col-sm-2" style="color:blue"><img src='+ProjectImagePath+'images/view-icon.png style="cursor: pointer" class="'+a.result[i].FileName.replace("%","$")+'" title="Preview" onclick="OpenDocument(this)" proofDocumentType="5"></td>':'<td  class="col-sm-2" style="color:blue"><img src='+ProjectImagePath+'images/view-icon.png style="cursor: pointer" class="'+a.result[i].FileName.replace("%","$")+'" title="Download" onclick="DownloadDocument(this)" proofDocumentType="5"></td>';var u="javascript:DeleteFileFromFolder('"+a.result[i].FileName+"','5')";d+='<td style="color:blue"><img src='+ProjectImagePath+'images/delete-icon.png style="cursor: pointer id="signDelete" title="Delete" onclick="'+u+'"></td>',d+="</tr>",DocCount+=1;var p="tblInstallerDriversLicense",m=a.result[i].FileName;if($("#DriversLic_"+e).length>0){var g=USERID,h="InstallersDriversLicense\\"+$("#DriversLic_"+e).val();$.ajax({url:BaseURL+"DeleteFileFromFolder/User",data:{fileName:h,FolderName:g},method:"get",success:function(t){$("#Doc_"+e).remove(),$("#"+p).append(d),$('<input type="hidden">').attr({name:"ProofFileNamesCreate["+DocCount+"].FileName",value:m.replace("%","$"),proofDocumentType:5,file:m.replace("%","$"),class:"ProofFileNamesCreate",id:"DriversLic_"+e,DocLoc:e}).appendTo("#UserDetails"),$('<input type="hidden">').attr({name:"ProofFileNamesCreate["+DocCount+"].ProofDocumentType",value:5,proofDocumentType:5,file:m.replace("%","$"),class:"ProofFileNamesCreate"}).appendTo("#UserDetails");var a=0;"Front"==e?a=1:"Back"==e&&(a=2),$('<input type="hidden">').attr({name:"ProofFileNamesCreate["+DocCount+"].DocLoc",value:a,proofDocumentType:5,file:m.replace("%","$"),class:"ProofFileNamesCreate"}).appendTo("#UserDetails"),$("#DriversLic_"+e).remove()}})}else{$("#"+p).append(d),$('<input type="hidden">').attr({name:"ProofFileNamesCreate["+DocCount+"].FileName",value:m.replace("%","$"),proofDocumentType:5,file:m.replace("%","$"),class:"ProofFileNamesCreate",id:"DriversLic_"+e}).appendTo("#UserDetails"),$('<input type="hidden">').attr({name:"ProofFileNamesCreate["+DocCount+"].ProofDocumentType",value:5,proofDocumentType:5,file:m.replace("%","$"),class:"ProofFileNamesCreate"}).appendTo("#UserDetails");var D=0;"Front"==e?D=1:"Back"==e&&(D=2),$('<input type="hidden">').attr({name:"ProofFileNamesCreate["+DocCount+"].DocLoc",value:D,proofDocumentType:5,file:m.replace("%","$"),class:"ProofFileNamesCreate"}).appendTo("#UserDetails")}}else 0==a.result[i].Status&&"BigName"==a.result[i].Message?s.push(m.replace("%","$")):l.push(m.replace("%","$"));l.length>0&&($(".alert").hide(),$("#successMsgRegion").hide(),$("#errorMsgRegion").html(closeButton+l.length+" File has not been uploaded."),$("#errorMsgRegion").show()),s.length>0&&($(".alert").hide(),$("#successMsgRegion").hide(),$("#errorMsgRegion").html(closeButton+s.length+" Uploaded filename is too big."),$("#errorMsgRegion").show()),0==s.length&&0==l.length&&($(".alert").hide(),$("#errorMsgRegion").hide(),$("#successMsgRegion").html(closeButton+"File has been uploaded successfully."),$("#successMsgRegion").show())},progressall:function(e,t){},singleFileUploads:!0,send:function(e,t){if(1==t.files.length)for(var a=0;a<t.files.length;a++){if(t.files[a].name.length>50)return $(".alert").hide(),$("#successMsgRegion").hide(),$("#errorMsgRegion").html(closeButton+"Please upload small filename."),$("#errorMsgRegion").show(),$("html").animate({scrollTop:0},"slow"),$("body").animate({scrollTop:0},"slow"),!1;if(CheckSpecialCharInFileName(t.files[a].name))return ShowErrorMsgForFileName("Please upload file that not conatain <> ^ [] ."),!1}if(t.files.length>1)for(a=0;a<t.files.length;a++){if(t.files[a].size>parseInt(MaxImageSize))return $(".alert").hide(),$("#successMsgRegion").hide(),$("#errorMsgRegion").html(closeButton+" "+t.files[a].name+" Maximum file size limit exceeded. Please upload a file smaller  than "+maxsize+"MB"),$("#errorMsgRegion").show(),!1;if(CheckSpecialCharInFileName(t.files[a].name))return ShowErrorMsgForFileName("Please upload file that not conatain <> ^ [] ."),!1}else if(t.files[0].size>parseInt(MaxImageSize))return $(".alert").hide(),$("#successMsgRegion").hide(),$("#errorMsgRegion").html(closeButton+"Maximum  file size limit exceeded.Please upload a  file smaller than "+maxsize+"MB"),$("#errorMsgRegion").show(),!1;return $(".alert").hide(),$("#errorMsgRegion").html(""),$("#errorMsgRegion").hide(),$('<input type="hidden">').attr({name:"Guid",value:USERID}).appendTo("form"),!0},formData:{userId:USERID,ProofDocumentType:5,IsScaProofDocs:!0,DocLoc:e},change:function(e,t){$("#uploadFile").val("C:\\fakepath\\"+t.files[0].name)}}).prop("disabled",!$.support.fileInput).parent().addClass($.support.fileInput?void 0:"disabled")}function DeviceLogout(e,t){$.ajax({type:"get",url:urlDeviceLogout,dataType:"json",data:{id:e,isLogoutAll:t},success:function(e){e.status?(showSuccessMessage("Device logged out successfully."),$("#datatableUserDevice").data("kendoGrid").dataSource.read(),t&&$("#allDeviceLogout").attr("disabled","disabled")):showErrorMessage(e.msg)},error:function(e){alert("Failed to logout.")}})}function GetRECAccounts(e){var t=$("#CERLoginId").val(),a=$("#RecPassword").val();if("Admin"==e&&(t=$("#CERSuperAdminLoginId").val(),a=$("#RecSuperAdminPassword").val()),""==t||""==a)return alert("Please enter REC Credentials."),!1;$.ajax({url:getRECAccountsURL,dataType:"json",type:"get",data:{recUsername:t,recPassword:a},contentType:"application/json",success:function(l){console.log(l);var s="";if(l.status)if(1==l.Items.length){var i=l.Items[0];if(0==l.isAccess){var n="<ul style='list-style: circle'><li><b>This REC account does not have bulk upload permissions. REC upload cannot continue</b></li><li><b>REC Company Name: </b>"+i.RECCompName+"</li><li><b>REC Account: </b>"+i.RECAccName+"</li><li><b>REC Name: </b>"+i.RECName+"</li></ul>";return showErrorMessage(n),$("html").animate({scrollTop:0},"slow"),$("body").animate({scrollTop:0},"slow"),ClearData(e),!1}SelectRECAcc(i.RECAccName,i.RECCompName,i.RECName,e,t,a)}else $.each(l.Items,function(l,i){
s+='<tr><td><input type="button" onclick="SelectRECAcc(\''+i.RECAccName+"','"+i.RECCompName+"','"+i.RECName+"','"+e+"','"+t+"','"+a+'\')" class="btn primary" name="recAcc" data-id="'+i.RECAccName+'" value="Select" /></td><td>'+i.RECAccName+"</td><td>"+i.RECCompName+"</td>"}),$("#recAcc").html(s),$("#popupboxREC").modal({backdrop:"static",keyboard:!1});else showErrorMessage(l.message)},error:function(){showErrorMessage("UserName/Password is wrong.")}})}function SelectRECAcc(e,t,a,l,s,i){"Reseller"==l?($("#RecCompUserName").val(e),$("#RecCompUserNamelbl").text(e),$("#RECName").val(a),$("#RECNamelbl").text(a),$("#RECCompName").val(t),$("#RECCompNamelbl").text(t)):($("#RecSuperAdminUserName").val(e),$("#SuperAdminRECName").val(a),$("#SuperAdminRECCompName").val(t),$("#RecSuperAdminUserNamelbl").text(e),$("#SuperAdminRECNamelbl").text(a),$("#SuperAdminRECCompNamelbl").text(t)),"Normal User"!=e&&($("#popupboxREC").modal("toggle"),$.ajax({url:getRECNameURL,type:"GET",data:{recUsername:s,recPassword:i,RECAccName:e},dataType:"json",contentType:"application/json",success:function(a){if(0==a.isAccess){var s="<ul style='list-style: circle'><li><b>This REC account does not have bulk upload permissions. REC upload cannot continue</b></li><li><b>REC Company Name: </b>"+t+"</li><li><b>REC Account: </b>"+e+"</li><li><b>REC Name: </b>"+a.RECName+"</li></ul>";return showErrorMessage(s),$("html").animate({scrollTop:0},"slow"),$("body").animate({scrollTop:0},"slow"),ClearData(l),!1}"Reseller"==l?($("#RECName").val(a.RECName),$("#RECNamelbl").text(a.RECName)):($("#SuperAdminRECName").val(a.RECName),$("#SuperAdminRECNamelbl").text(a.RECName))},error:function(e){alert(e)}}))}function CheckChange(){$("#UseCredentialFrom").prop("checked",$("#adminResellerSwitch").prop("checked"))}function UpdateContactInXeroLog(){var e=modelUserId;$.ajax({url:getLogsForUpdateContactURL,type:"GET",data:{UserId:e},dataType:"json",contentType:"application/json",success:function(e){if($("#popupUpdateContactXeroLog").modal("toggle"),$("#listOfLog").html(""),e.UpdateContactXeroLogs.length>0)for(var t=0;t<e.UpdateContactXeroLogs.length;t++)$("#listOfLog").append('<ul style="background-color:#f6f9f5;margin:6px;   padding: 3px;" ><li class="UpdateContactlog"><span>'+e.UpdateContactXeroLogs[t].HistoryMessage+".</span></li></ul>")},error:function(e){alert(e)}})}function ClearData(e){"Reseller"==e?($("#RecCompUserName").val(""),$("#RecCompUserNamelbl").text(""),$("#RECName").val(""),$("#RECNamelbl").text(""),$("#RECCompName").val(""),$("#RECCompNamelbl").text(""),$("#CERLoginId").val(""),$("#RecPassword").val("")):($("#RecSuperAdminUserName").val(""),$("#SuperAdminRECName").val(""),$("#SuperAdminRECCompName").val(""),$("#RecSuperAdminUserNamelbl").text(""),$("#SuperAdminRECNamelbl").text(""),$("#SuperAdminRECCompNamelbl").text(""),$("#CERSuperAdminLoginId").val(""),$("#RecSuperAdminPassword").val(""))}function clearSAASfields(){$("#InvoicerFirstName").val(""),$("#InvoicerLastName").val(""),$("#InvoicerPhone").val(""),$("#InvoicerAddressID").val("1"),POInvoicerAddress(1),$("#InvoicerUnitTypeID").val(""),$("#InvoicerUnitNumber").val(""),$("#InvoicerStreetNumber").val(""),$("#InvoicerStreetName").val(""),$("#InvoicerStreetTypeID").val(""),$("#InvoicerTown").val(""),$("#InvoicerState").val(""),$("#InvoicerPostCode").val(""),$("#InvoicerPostalAddressID").val(""),$("#InvoicerPostalDeliveryNumber").val("")}function GetInvoicerDetails(){$.ajax({type:"GET",url:"/User/GetInvoicerDetailsList",data:{},success:function(e){for(var t='<option value="0">Select</option>',a=0;a<e.length;a++)modelInvoicer==e[a].InvoicerId.toString()?(t+='<option value="'+e[a].InvoicerId+'" AccountCode="'+e[a].AccountCode+'" selected>'+e[a].InvoicerName+"</option>",$("#AccountCode").val(e[a].AccountCode)):t+='<option value="'+e[a].InvoicerId+'" AccountCode="'+e[a].AccountCode+'">'+e[a].InvoicerName+"</option>";$("#Invoicer").html(t)}})}$(document).ready(function(){if($("input[name='InstallerUserType'][value='0']").prop("checked",!0),$(".showSWH").hide(),$("input[type=radio][name=InstallerUserType]").change(function(){$("#UserDetails").find("input[type=text]").each(function(){$(this).val("")}),ShowHidePVD()}),7==userTypeId&&$("#AutoRequestSwitch").prop("checked","true"==$("#IsAutoRequest").val().toLowerCase()),1==sessionUserTypeId&&2==userTypeId?($("#RecUsernamePwd").show(),$("#RecSuperadmin").show()):2==sessionUserTypeId&&($("#RecUsernamePwd").show(),$("#RecSuperadmin").hide()),2!=sessionUserTypeId&&1!=sessionUserTypeId||4!=userTypeId||"False"!=modelWholeSaler?$(".btnCheckInXero").hide():$(".btnCheckInXero").show(),4==userTypeId&&(null==SCisAllowedSPV||""==SCisAllowedSPV?$("#onOffSwitchSPV").prop("checked",!1):$("#onOffSwitchSPV").prop("checked","true"==SCisAllowedSPV.toString().toLowerCase())),$("#searchRAM").change(function(){GetClientNumberofSCAOnRAMChange(),""==$("#hdnRAMID").val()?$("#RAMId").val(0):$("#RAMId").val($("#hdnRAMID").val())}),$("#CompanyNameRefresh").click(function(){ChangeCompanyABN($("#CompanyABN").val(),$("#CompanyName"),!1),$("#CompanyNameRefresh i").addClass("fa-spin")}),$("#CompanyName").change(function(){$.ajax({url:getEntityNameURL,type:"GET",data:{companyABN:$("#CompanyABN").val()},dataType:"json",contentType:"application/json",success:function(e){e.success&&$("#EntityName").val(e.data)},error:function(e){alert(e)}})}),4==userTypeId&&"profile"!=pageType&&"viewdetail"!=pageType&&autoCompleteRAM(modelRAMId,modelResellerId),$("#checkInXero").click(function(){CheckInXero(!1,-1)}),$("#btnCloseRecAcc").click(function(){$("#popupboxREC").modal("toggle")}),""!=$("#imgSelfieImage").attr("src")){var e=$("#imgSelfieImage").attr("src"),t=modelUserId,a=UploadedDocumentPath,l=a+"UserDocuments/"+t,s=l+"/"+e;SRCSelfie=s,$("#imgSelfieImage").attr("class",e),$("#imgSelfie").show()}if($("#txtName").focus(),Array.prototype.pushArray=function(){for(var e=this.concat.apply([],arguments),t=0,a=e.length;t<a;++t)this.push(e[t])},$.fn.serializeToJson=function(){var e=$(this[0]),t=e.serializeArray(),a={},l=[];return $.each(t,function(e,t){if(-1!=t.name.indexOf(".")){var s=t.name.split(".");l.indexOf(s[0])<0&&l.push(s[0]);var i=a[l[l.indexOf(s[0])]]||{};i[s[1]]||(i[s[1]]=t.value),a[l[l.indexOf(s[0])]]=i}else a[t.name]||(a[t.name]=t.value)}),a},dropDownData.push({id:"installerDesignerView_UnitTypeID",key:"UnitType",value:installerDesignerUnitTypeId,hasSelect:!0,callback:null,defaultText:null,proc:"UnitType_BindDropdown",param:[],bText:"UnitTypeName",bValue:"UnitTypeID"},{id:"installerDesignerView_StreetTypeID",key:"StreetType",value:installerDesignerStreetTypeId,hasSelect:!0,callback:null,defaultText:null,proc:"StreetType_BindDropdown",param:[],bText:"StreetTypeName",bValue:"StreetTypeID"},{id:"installerDesignerView_PostalAddressID",key:"PostalAddress",value:installerDesignerPostalAddressID,hasSelect:!0,callback:null,defaultText:null,proc:"PostalAddress_BindDropdown",param:[],bText:"PostalDeliveryType",bValue:"PostalAddressID"}),$("#btnClosePopUpBoxInsallerDesigner").click(function(){$("#popupboxInsallerDesigner").modal("toggle")}),2==userTypeId&&dropDownData.push({id:"WholesalerUnitTypeID",key:"UnitType",value:WholesalerUnitTypeID,hasSelect:!0,callback:null,defaultText:null,proc:"UnitType_BindDropdown",param:[],bText:"UnitTypeName",bValue:"UnitTypeID"},{id:"WholesalerStreetTypeID",key:"StreetType",value:WholesalerStreetTypeID,hasSelect:!0,callback:null,defaultText:null,proc:"StreetType_BindDropdown",param:[],bText:"StreetTypeName",bValue:"StreetTypeID"},{id:"WholesalerPostalAddressID",key:"PostalAddress",value:WholesalerPostalAddressID,hasSelect:!0,callback:null,defaultText:null,proc:"PostalAddress_BindDropdown",param:[],bText:"PostalDeliveryType",bValue:"PostalAddressID"}),dropDownData.push({id:"InvoicerUnitTypeID",key:"UnitType",value:InvoicerUnitTypeID,hasSelect:!0,callback:null,defaultText:null,proc:"UnitType_BindDropdown",param:[],bText:"UnitTypeName",bValue:"UnitTypeID"},{id:"InvoicerStreetTypeID",key:"StreetType",value:InvoicerStreetTypeID,hasSelect:!0,callback:null,defaultText:null,proc:"StreetType_BindDropdown",param:[],bText:"StreetTypeName",bValue:"StreetTypeID"},{id:"InvoicerPostalAddressID",key:"PostalAddress",value:InvoicerPostalAddressID,hasSelect:!0,callback:null,defaultText:null,proc:"PostalAddress_BindDropdown",param:[],bText:"PostalDeliveryType",bValue:"PostalAddressID"}),GetInvoicerDetails(),$("#uploadBtnSignatureInstallDesign").fileupload({url:projectURL+"Upload",dataType:"json",done:function(e,t){var a=[];a.length=0;var l=[];l.length=0;for(var s=0;s<t.result.length;s++)if(1==t.result[s].Status){var i=USERID,n=$("#imgSignInstallDesign").attr("class");$("[name='installerDesignerView.SESignature']").each(function(){$(this).remove()}),null!=n&&""!=n&&DeleteFileFromLogoOnUpload(n,i,installerDesignerSESignature);var r=UploadedDocumentPath,o=r+"UserDocuments/"+i;SRCSignInstallDesign=o+"/"+t.result[s].FileName,$("#imgSignInstallDesign").attr("src",SRCSignInstallDesign),$("#imgSignInstallDesign").attr("class",t.result[s].FileName),$("#imgSignatureInstallDesign").show(),$('<input type="hidden">').attr({name:"installerDesignerView.SESignature",value:t.result[s].FileName,id:t.result[s].FileName}).appendTo("form")}else 0==t.result[s].Status&&"BigName"==t.result[s].Message?l.push(t.result[s].FileName):a.push(t.result[s].FileName);a.length>0&&showErrorMessage(a.length+" File has not been uploaded."),l.length>0&&showErrorMessage(l.length+" Uploaded filename is too big."),0==l.length&&0==a.length&&showSuccessMessage("File has been uploaded successfully.")},progressall:function(e,t){},singleFileUploads:!1,send:function(e,t){var a=t.files[0].type.split("/"),l=a[0];if(1==t.files.length)for(var s=0;s<t.files.length;s++){if(t.files[s].name.length>50)return showErrorMessage("Please upload small filename."),$("html").animate({scrollTop:0},"slow"),$("body").animate({scrollTop:0},"slow"),!1;if(CheckSpecialCharInFileName(t.files[s].name))return showErrorMessage("Please upload file that not conatain <> ^ [] ."),$("html").animate({scrollTop:0},"slow"),$("body").animate({scrollTop:0},"slow"),!1}if(t.files.length>1)for(s=0;s<t.files.length;s++){if(t.files[s].size>parseInt(MaxLogoSize))return showErrorMessage(" "+t.files[s].name+" Maximum file size limit exceeded. Please upload a file smaller  than "+maxLogoSize+"MB"),!1;if(CheckSpecialCharInFileName(t.files[s].name))return showErrorMessage("Please upload file that not conatain <> ^ [] ."),!1}else if(t.files[0].size>parseInt(MaxLogoSize))return showErrorMessage("Maximum  file size limit exceeded.Please upload a  file smaller than "+maxLogoSize+"MB"),!1;return"image"!=l?(showErrorMessage("Please upload a file with .jpg , .jpeg or .png extension."),$("html").animate({scrollTop:0},"slow"),$("body").animate({scrollTop:0},"slow"),!1):($(".alert").hide(),$("#errorMsgRegion").html(""),$("#errorMsgRegion").hide(),!0)},formData:{userId:USERID},change:function(e,t){$("#uploadFile").val("C:\\fakepath\\"+t.files[0].name)}}).prop("disabled",!$.support.fileInput).parent().addClass($.support.fileInput?void 0:"disabled"),""!=$("#imgSignInstallDesign").attr("src")&&""!=installerDesignerSESignature){e=$("#imgSignInstallDesign").attr("src"),t=modelUserId,l=a+"UserDocuments/"+t,s=l+"/"+e;SRCSignInstallDesign=s,$("#imgSignInstallDesign").attr("class",e),$("#imgSignatureInstallDesign").show()}$("#imgSignatureInstallDesign").click(function(){$("#loading-image").css("display",""),$("#imgSignInstallDesign").attr("src",SRCSignInstallDesign).load(function(){logoWidthSignInstallDesign=this.width,logoHeightSignInstallDesign=this.height,$("#popupboxInsallerDesigner").modal({backdrop:"static",keyboard:!1}),$(window).height()<=logoHeightSignInstallDesign?($("#imgSignInstallDesign").closest("div").height($(window).height()-205),$("#imgSignInstallDesign").closest("div").css("overflow-y","scroll"),$("#imgSignInstallDesign").height(logoHeightSignInstallDesign)):($("#imgSignInstallDesign").height(logoHeightSignInstallDesign),$("#imgSignInstallDesign").closest("div").removeAttr("style")),screen.width<=logoWidthSignInstallDesign||logoWidthSignInstallDesign>=screen.width-250?($("#popupboxInsallerDesigner").find(".modal-dialog").width(screen.width-250),$("#imgSignInstallDesign").width(logoWidthSignInstallDesign)):($("#imgSignInstallDesign").width(logoWidthSignInstallDesign),$("#popupboxInsallerDesigner").find(".modal-dialog").width(logoWidthSignInstallDesign)),$("#loading-image").css("display","none")}),$("#imgSignInstallDesign").unbind("error"),$("#imgSignInstallDesign").attr("src",SRCSignInstallDesign).error(function(){alert("Image does not exist."),$("#loading-image").css("display","none")})}),$("#imgSelfie").click(function(){$("#loading-image").css("display",""),modelUserId>0&&(SRCSelfie=a+"UserDocuments/"+modelUserId+"/"+$("#imgSelfieImage").attr("class")),$("#imgSelfieImage").attr("src",SRCSelfie),$("#imgSelfieImage").load(function(){logoWidth=this.width,logoHeight=this.height,$("#popupboxSelfie").modal({backdrop:"static",keyboard:!1}),$(window).height()<=logoHeight?($("#imgSelfieImage").closest("div").height($(window).height()-205),$("#imgSelfieImage").closest("div").css("overflow-y","scroll"),$("#imgSelfieImage").height(logoHeight)):($("#imgSelfieImage").height(logoHeight),$("#imgSelfieImage").closest("div").removeAttr("style")),screen.width<=logoWidth||logoWidth>=screen.width-250?($("#popupboxSelfie").find(".modal-dialog").width(screen.width-250),$("#imgSelfieImage").width(logoWidth)):($("#imgSelfieImage").width(logoWidth),$("#popupboxSelfie").find(".modal-dialog").width(logoWidth)),$("#loading-image").css("display","none")}),$("#imgSelfieImage").unbind("error"),$("#imgSelfieImage").attr("src",SRCSelfie).error(function(){alert("Image does not exist."),$("#loading-image").css("display","none")})}),$("#installerDesignerView_AddressID").change(function(){var e=$("#installerDesignerView_AddressID option:selected").val();POAddressInstallerDesigner(e)}),$("#addSWHInstaller").click(function(){$("#addInstallerDesigner").click()}),$("#addInstallerDesigner").click(function(){var e=0;if(e=GetSolarCompanyIdforInstallerDesigner(),4!=userTypeId&&6!=userTypeId&&8!=userTypeId||($(".installerDesignerDiv").find("[idClass='installerDesignerRequired']").each(function(){$(this).rules("add",{required:!0})}),$(".installerDesignerDiv").find("[idClass='installerDesignerNotRequired']").each(function(){$(this).rules("add",{required:!1})}),$("#txtName").length>0&&$("#txtName").rules("add",{required:!1}),$("#txtCECAccreditationNumber").length>0&&$("#txtCECAccreditationNumber").rules("add",{required:!1}),1==userTypeId&&1!=SendBy&&$("#searchSolarCompany").rules("add",{required:!1})),8==userTypeId&&($("#installerDesignerView_UnitTypeID").rules("remove","required"),$("#installerDesignerView_StreetTypeID").rules("remove","required")),$("#UserDetails").valid()){$("[name='installerDesignerView.SESignature']").val();var t=JSON.stringify($("form").serializeToJson()),a=JSON.parse(t),l={};l.SESignature=$("#imgSignInstallDesign").attr("class"),l.InstallerDesignerId=a.installerDesignerView.InstallerDesignerId,l.FirstName=a.installerDesignerView.FirstName,l.LastName=a.installerDesignerView.LastName,l.SolarCompanyId=e,l.Email=a.installerDesignerView.Email,l.Phone=a.installerDesignerView.Phone,l.Mobile=a.installerDesignerView.Mobile,l.CreatedBy=USERID;var s=$("input[name='InstallerUserType']:checked").val();0==s?(l.IsSWHUser=!1,l.SEDesignRoleId=a.SEDesignRoleId,l.CECAccreditationNumber=a.installerDesignerView.CECAccreditationNumber,l.ElectricalContractorsLicenseNumber=a.installerDesignerView.ElectricalContractorsLicenseNumber):1==s&&(l.IsSWHUser=!0,l.ElectricalContractorsLicenseNumber=a.installerDesignerView.SWHLicenseNumber),1==$("#installerDesignerView_AddressID").val()?(l.IsPostalAddress=0,""==a.installerDesignerView.UnitTypeID||null==a.installerDesignerView.UnitTypeID||null==a.installerDesignerView.UnitTypeID?l.UnitTypeID=0:l.UnitTypeID=a.installerDesignerView.UnitTypeID,l.UnitNumber=a.installerDesignerView.UnitNumber,l.StreetNumber=a.installerDesignerView.StreetNumber,l.StreetName=a.installerDesignerView.StreetName,""==$("#installerDesignerView_StreetTypeID").val()||null==$("#installerDesignerView_StreetTypeID").val()||null==$("#installerDesignerView_StreetTypeID").val()?l.StreetTypeID=0:l.StreetTypeID=$("#installerDesignerView_StreetTypeID").val()):(l.IsPostalAddress=1,""==$("#installerDesignerView_PostalAddressID").val()||null==$("#installerDesignerView_PostalAddressID").val()||null==$("#installerDesignerView_PostalAddressID").val()?l.PostalAddressID=0:l.PostalAddressID=$("#installerDesignerView_PostalAddressID").val(),l.PostalDeliveryNumber=$("#installerDesignerView_PostalDeliveryNumber").val()),l.Town=a.installerDesignerView.Town,l.State=a.installerDesignerView.State,l.PostCode=a.installerDesignerView.PostCode;var i=JSON.stringify(l);$.ajax({type:"GET",url:processRequestURL,dataType:"json",data:{excludePostBoxFlag:!0,q:l.Town},success:function(e){var t=JSON.parse(e),a=$("#installerDesignerView_Town").val().toUpperCase(),l=$("#installerDesignerView_State").val(),s=$("#installerDesignerView_PostCode").val(),n=!1;if(t.localities&&t.localities.locality)if(t.localities.locality.length){for(var r=0;r<t.localities.locality.length;r++)if(t.localities.locality[r].location==a&&t.localities.locality[r].state==l&&t.localities.locality[r].postcode==s){n=!0;break}}else t.localities.locality.location==a&&t.localities.locality.state==l&&t.localities.locality.postcode==s&&(n=!0);if(!n)return alert("Please enter valid address."),!1;$.ajax({url:installerDesignerAddURL,dataType:"json",contentType:"application/json; charset=utf-8",type:"post",data:i,success:function(e){e.status?(ResetInstallerDesigner(),$("#datatable").dataTable().fnDraw(),showSuccessMessage(e.message),$("#btnResetInstallerDesigner").show(),$("#btnCancelInstallerDesigner").hide()):showErrorMessage(e.message)},error:function(){showErrorMessage("Installer/Designer has not been added.")}})}})}}),TownPostcodeAutoComplete($("#txtTown"),$("#txtState"),$("#txtPostCode")),TownPostcodeAutoComplete($("#installerDesignerView_Town"),$("#installerDesignerView_State"),$("#installerDesignerView_PostCode")),TownPostcodeAutoComplete($("#WholesalerTown"),$("#WholesalerState"),$("#WholesalerPostCode")),TownPostcodeAutoComplete($("#InvoicerTown"),$("#InvoicerState"),$("#InvoicerPostCode")),$("#WholesalerIsPostalAddress").change(function(){var e=$("#WholesalerIsPostalAddress option:selected").val();POWholesalerAddress(e)}),$("#InvoicerAddressID").change(function(){var e=$("#InvoicerAddressID option:selected").val();POInvoicerAddress(e)}),$("#AddressID").change(function(){var e=$("#AddressID option:selected").val();POAddress(e)}),7!=userTypeId&&9!=userTypeId||($("#datatableUserDevice").kendoGrid({dataSource:{type:"json",transport:{read:{url:urlGetUserDeviceKendo,data:{},contentType:"application/json",dataType:"json",type:"POST",async:!1},parameterMap:function(e){return e.userId=userID,JSON.stringify(e)}},schema:{data:"data",total:"total"},pageSize:10},noRecords:!0,pageable:{buttonCount:5,pageSizes:[10,25,50,100]},columns:[{template:"#= ++rowNumber #",field:"",title:"No.",width:"60px"},{template:"#=Kendo_DeviceType(data) #",field:"Type",title:"Platform",width:"100px"},{field:"DeviceInfo",title:"Device Info"},{template:function(e){return'<button type="button" class="btn primary" userDeviceId="'+e.UserDeviceID+'"onclick="DeviceLogout('+e.UserDeviceID+',false);">Logout</button>'},field:"",headerTemplate:function(e){return'<button type="button" class="btn primary" id="allDeviceLogout" onclick="DeviceLogout('+userID+',true);">Logout All Devices</button>'},width:"200px",attributes:{style:"text-align: -webkit-center;"}}],dataBinding:function(){rowNumber=(this.dataSource.page()-1)*this.dataSource.pageSize()}}),0==$("#datatableUserDevice").data("kendoGrid").dataSource.total()&&$("#allDeviceLogout").attr("disabled","disabled"))});var Kendo_DeviceType=function(e){return null!=e.Type?"iphone"==e.Type.toLowerCase()?'<span class="icon"><img src="../../Images/ios.svg" /></span>':'<span class="icon"><img src="../../Images/android.svg" /></span>':""};$("#CompanyABN").change(function(){ChangeCompanyABN($("#CompanyABN").val(),$("#CompanyName"),!1)}),$("#WholesalerCompanyABN").change(function(){2==userTypeId&&ChangeCompanyABN($("#WholesalerCompanyABN").val(),$("#WholesalerCompanyName"),!0)}),$("#Invoicer").change(function(){var e=$(this).find("option:selected").attr("accountcode");$("#AccountCode").val(e)});