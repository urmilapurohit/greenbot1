function getDropDownValue(){return $(".SlectBox option:selected").each(function(e){$('<input type="hidden">').attr({name:"FCOGroupSelected",value:$(this).val(),id:$(this).val()}).appendTo("form")}),validateForm()}function validateForm(){addRules();var e=[];return $.validator.unobtrusive.parse("#UserDetails"),$.each($("#FCOGroupId").parent().find("ul").find("li"),function(o,t){"selected"==$(this).attr("class")&&e.push($(this).val())}),$("#FCOGroupId").is(":visible")?$("#UserDetails").valid()?e.length>0?($("#spanFCOGroup").hide(),CheckShowMessages()):($("#spanFCOGroup").show(),CheckShowMessages(),!1):(e.length>0?$("#spanFCOGroup").hide():$("#spanFCOGroup").show(),CheckShowMessages(),!1):!(!$("#UserDetails").valid()||!CheckShowMessages())}function initialize(e){$("#CompanyName").change(function(){$.each(e,function(e,o){var t=o.CompanyName,i=$("select#CompanyName option:selected").val();t==i&&($("#fromDate").val(o.strFromDate),$("#toDate").val(o.strToDate))})})}function ChangeUserType(e,o){$("#horizontalTab").show(),$("#spanFCOGroup").hide(),$("input[type=text]").each(function(){$(this).attr("class","form-control valid")}),$(".field-validation-error").attr("class","field-validation-valid"),""==e?($("#horizontalTab").hide(),defaultHideField()):1==e?($(".RA").hide(),$(".RAM").hide(),$(".SCA").hide(),$(".FCO").hide(),$(".SCO").hide(),$(".SE").hide(),$(".SSC").hide(),$(".SC").hide(),$(".FSA").show(),$(".defaultFormBot").show(),FillDropDown("RoleID",getRoleURL1,modelRoleId,!0,null)):2==e?($(".FSA").hide(),$(".FCO").hide(),$(".RAM").hide(),$(".SCA").hide(),$(".SCO").hide(),$(".SSC").hide(),$(".SE").hide(),$(".SC").hide(),$(".RA").show(),"3"==$("#UsageType").val()&&$(".SAAS").show(),$(".defaultFormBot").show(),$(".ProfileSCO").show(),$(".ProfileRA").hide(),FillDropDown("RoleID",getRoleURL2,modelRoleId,!0,null)):3==e?($(".FSA").hide(),$(".RA").hide(),$(".RAM").hide(),$(".SCA").hide(),$(".SCO").hide(),$(".SE").hide(),$(".SSC").hide(),$(".SC").hide(),$(".FCO").show(),$(".defaultFormBot").show(),FillDropDown("RoleID",getRoleURL3,modelRoleId,!0,null),1==o&&$("#UserTypeId").val("3")):4==e?($(".FSA").hide(),$(".FCO").hide(),$(".RA").hide(),$(".RAM").hide(),$(".SCO").hide(),$(".SE").hide(),$(".SSC").hide(),$(".SC").hide(),$(".SCA").show(),$(".defaultFormBot").show(),$(".ProfileSCO").show(),$(".SCOProfile").show(),$(".ProfileRA").hide(),FillDropDown("RoleID",getRoleURL4,modelRoleId,!0,null)):5==e?($(".RA").hide(),$(".SCA").hide(),$(".FCO").hide(),$(".FSA").hide(),$(".SCO").hide(),$(".SE").hide(),$(".SSC").hide(),$("#UserTypeId").val("5"),$(".SC").hide(),$(".RAM").show(),$(".defaultFormBot").show(),FillDropDown("RoleID",getRoleURL5,modelRoleId,!0,null),1==o&&($(".RAMdrp").hide(),$("#UserTypeId").prop("disabled",!0))):6==e?($(".RA").hide(),$(".SCA").hide(),$(".FCO").hide(),$(".FSA").hide(),$(".SCO").hide(),$(".RAM").hide(),$(".SE").hide(),$(".SC").hide(),$(".SSC").show(),$(".defaultFormBot").show(),$(".ProfileSCO").show(),$(".SCOProfile").show(),$(".ProfileRA").hide(),FillDropDown("RoleID",getRoleURL6,modelRoleId,!0,null)):7==e?($(".RA").hide(),$(".SCA").hide(),$(".FCO").hide(),$(".FSA").hide(),$(".SCO").hide(),$(".RAM").hide(),$(".SSC").hide(),$(".SC").hide(),$(".SE").show(),$(".defaultFormBot").show(),$(".ProfileSCO").show(),$(".SCOProfile").show(),$(".ProfileRA").hide(),$("[name=SEDesigner][value="+SEDesigner+"]").prop("checked",!0),FillDropDown("RoleID",getRoleURL7,modelRoleId,!0,null)):8==e?($(".RA").hide(),$(".SCA").hide(),$(".FCO").hide(),$(".FSA").hide(),$(".RAM").hide(),$(".SE").hide(),$(".SSC").hide(),$(".SC").hide(),$(".SCO").show(),$("#UserTypeId").val("8"),$(".defaultFormBot").show(),$(".ProfileSCO").show(),$(".SCOProfile").hide(),$(".ProfileRA").hide(),FillDropDown("RoleID",getRoleURL8,modelRoleId,!0,null),1==o&&($(".SCdrp").hide(),$("#UserTypeId").prop("disabled",!0))):($(".RA").hide(),$(".SCA").hide(),$(".FCO").hide(),$(".FSA").hide(),$(".RAM").hide(),$(".SE").hide(),$(".SSC").hide(),$(".SC0").hide(),$(".SC").show(),$(".ProfileSCO").show(),$(".SCOProfile").show(),$(".ProfileRA").hide(),FillDropDown("RoleID",getRoleURL9,modelRoleId,!0,null))}function getNameFromPath(e){var o=new RegExp(/([^\/\\]+)$/),t=o.exec(e);return null==t?null:t[0]}function POAddress(e){1==e?($(".DPA").show(),$(".PDA").hide(),$("#PostalAddressID").val(""),$("#PostalDeliveryNumber").val("")):($(".DPA").hide(),$(".PDA").show(),$("#UnitTypeId").val(""),$("#UnitNumber").val(""),$("#StreetNumber").val(""),$("#StreetName").val(""),$("#StreetTypeId").val(""))}function SelectFCOGroup(e){$.each(e,function(e,o){$.each($("#FCOGroupId")[0],function(e,t){o&&t.value&&parseInt(o)==parseInt(t.value)&&$("#FCOGroupId")[0].sumo.selectItem(e)})})}function DeleteDocumentFolderOnCancel(){var e=USERID,o=[];o=document.getElementsByName("FileNamesCreate");var t=document.getElementsByName("Signature");t[0].id;if(o.length>0)for(var i=0;i<o.length;i++){var a=o[i].id;DeleteFileFromUserOnCancel(a,e)}}function addRules(){$("#Password").rules("add",{required:!1})}$(document).ready(function(){$("#UserDetails").find("input").keypress(function(e){if(13==e.keyCode)return!1}),dropDownData.push({id:"UserTypeId",value:userTypeId,key:"UserType",hasSelect:!0,callback:null,defaultText:null,proc:"UserType_BindDropdown",param:[],bText:"UserTypeName",bValue:"UserTypeID"},{id:"UnitTypeId",value:unitTypeID,key:"UnitType",hasSelect:!0,callback:null,defaultText:null,proc:"UnitType_BindDropdown",param:[],bText:"UnitTypeName",bValue:"UnitTypeID"},{id:"StreetTypeId",value:streetTypeId,key:"StreetType",hasSelect:!0,callback:null,defaultText:null,proc:"StreetType_BindDropdown",param:[],bText:"StreetTypeName",bValue:"StreetTypeID"},{id:"ResellerID",value:modelResellerId,key:"Reseller",hasSelect:!0,callback:null,defaultText:null,proc:"Reseller_BindDropDown",param:[],bText:"ResellerName",bValue:"ResellerID"},{id:"PostalAddressID",value:postalAddressID,key:"PostalAddress",hasSelect:!0,callback:null,defaultText:null,proc:"PostalAddress_BindDropdown",param:[],bText:"PostalDeliveryType",bValue:"PostalAddressID"},{id:"FCOGroupId",value:modelFCOGroupId,key:"FCOGroup",hasSelect:!0,callback:null,defaultText:null,proc:"FCOGroup_BindDropdown",param:[],bText:"GroupName",bValue:"FCOGroupId"},{id:"SolarCompanyId",value:modelSolarCompanyId,key:"SolarCompany",hasSelect:!0,callback:null,defaultText:null,proc:"SolarCompany_BindDropDown",param:[],bText:"CompanyName",bValue:"SolarCompanyId"},{id:"RoleID",value:modelRoleId,key:"Role",hasSelect:!0,callback:null,defaultText:null,proc:"Role_BindDropDown",param:[],bText:"Name",bValue:"RoleId"}),dropDownData.bindDropdown(),$("#UserTypeId").prop("disabled",!0);var e=!1;if("2"==sessionUserTypeID&&(userTypeId="5",e=!0),"4"==sessionUserTypeID&&(userTypeId="8",e=!0),"6"==sessionUserTypeID&&(userTypeId="8",e=!0),""==strFromDate&&$("#fromDate").val(""),"0001-01-01"==strToDate&&$("#toDate").val(""),0!=userTypeId&&setTimeout(function(){ChangeUserType(userTypeId,e)},1e3),addressID=addressId,POAddress(addressID),""!=$("#imgSign").attr("src")){var o=$("#imgSign").attr("src"),t=modelUserId,i=i,a=i+"UserDocuments/"+t,l=a+"/"+o;SRCSign=l,$("#imgSign").attr("class",o),$("#imgSignature").show()}0==chkSTC?$(".chkSCASignUp").hide():$(".chkSCASignUp").show(),$("#btnClosePopUpBox").click(function(){$("#popupbox").modal("toggle")}),$("#btnClosePopUpBoxSE").click(function(){$("#popupboxSE").modal("toggle")}),$("#btnClosepopupProof").click(function(){$("#popupProof").modal("toggle")}),$("#btnClosePopUpBoxSelfie").click(function(){$("#popupboxSelfie").modal("toggle")}),document.getElementById("uploadBtnSignature").disabled=!0,document.getElementById("uploadBtn1").disabled=!0,$("#signDelete").hide(),$("#horizontalTab").easyResponsiveTabs({type:"default",width:"auto",fit:!0,closed:"accordion",activate:function(e){addRules();var o=[];$.each($("#FCOGroupId").parent().find("ul").find("li"),function(e,t){"selected"==$(this).attr("class")&&o.push($(this).val())});var t=$(this);if($("#FCOGroupId").is(":visible")){if(!(isValid&&o.length>0&&CheckShowMessages()))return t.removeClass("resp-tab-active"),$(".resp-tab-content-active").css("display","none").removeClass("resp-tab-content-active"),$("#"+activeTab).addClass("resp-tab-active"),$(".tab"+activeTab.replace("t","")).addClass("resp-tab-content-active").css("display","block"),o.length>0?$("#spanFCOGroup").hide():$("#spanFCOGroup").show(),CheckShowMessages(),!1;$("#spanFCOGroup").hide(),activeTab=t.attr("id")}else{if(!isValid||!CheckShowMessages())return t.removeClass("resp-tab-active"),$(".resp-tab-content-active").css("display","none").removeClass("resp-tab-content-active"),$("#"+activeTab).addClass("resp-tab-active"),$(".tab"+activeTab.replace("t","")).addClass("resp-tab-content-active").css("display","block"),CheckShowMessages(),!1;activeTab=t.attr("id")}"t6"==activeTab&&$.ajax({type:"GET",url:getInstallerDesignerAddedByProfileURL,data:{usertypeId:userTypeId,solarcompanyId:modelSolarCompanyId},contentType:"application/json",success:function(e){$("instDesignerAddedByProfile").html(e)}})}}),$("#verticalTab").easyResponsiveTabs({type:"vertical",width:"auto",fit:!0}),window.asd=$(".SlectBox").SumoSelect({csvDispCount:4});var d=[];d=model.ArrFcoGroup,SelectFCOGroup(d),$("#FCOGroupId").change(function(e){var o=[];""==$("#FCOGroupId")[0][0].value&&$("#FCOGroupId")[0][0].remove(),$.each($("#FCOGroupId").parent().find("ul").find("li"),function(e,t){"selected"==$(this).attr("class")&&($("#FCOGroupId")[0].sumo.selectItem(e),o.push($(this).val()))}),o.length>0?$("#spanFCOGroup").hide():$("#spanFCOGroup").show()}),$("#AddressID").val(parseInt(addressId)),5==userTypeId&&$(".RAMCreate").show(),5==userTypeId&&2==sessionUserTypeId&&$(".RAMCreate").hide(),8==userTypeId&&4==sessionUserTypeId&&($(".SCACreate").hide(),$(".chkSCASignUp").hide(),$(".uploadSCA").hide()),9==userTypeId&&($(".SCACreate").show(),$(".SCOPro").hide()),6==userTypeId&&($(".chkSCASignUp").show(),$(".SCOProfile").show()),8==userTypeId&&($(".SCACreate").show(),$(".ProfileSCO").show(),$(".uploadSCA").hide(),$("#t3").hide(),$(".SCProfile").hide()),8==userTypeId&&6==sessionUserTypeId&&($(".SCACreate").hide(),$(".chkSCASignUp").hide(),$(".uploadSCA").hide()),2==userTypeId&&$(".uploadSCA").hide(),""==$("#UnitTypeId option:selected").val()?($("#lblUnitNumber").removeClass("required"),$("#lblUnitTypeID").removeClass("required"),$("#lblStreetNumber").addClass("required")):($("#lblUnitNumber").addClass("required"),$("#lblUnitTypeID").addClass("required"),$("#lblStreetNumber").removeClass("required"));var s=companyName;-1!=s.indexOf("&#39")?s=s.replace(/&#39;/g,"'"):-1!=s.indexOf("&amp")?str=s.replace(/&amp;/g,"&"):-1!=s.indexOf("&quot")?s=s.replace(/&quot;/g,'"'):-1!=s.indexOf("&lt")?s=s.replace(/&lt;/g,"<"):-1!=s.indexOf("&gt")&&(s=s.replace(/&gt;/g,">")),$("#CompanyName").append($("<option></option>").val(s).html(s)),$("#CompanyName").val(s)}),$("#UserTypeId").change(function(){var e=$("#UserTypeId option:selected").val();ChangeUserType(e)}),$("#btnCancel").click(function(){window.location.href=getUserIndexURL}),$("#btnCancelLast").click(function(){window.location.href=getUserIndexURL}),$("#CompanyABN").change(function(){var e=$("#CompanyABN").val();$.ajax({type:"GET",url:getGetCompanyABNURL,data:{id:e},contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){if(0!=e)return $("#CompanyName option").length>1?($("#CompanyName").empty(),$("#CompanyName").append($("<option></option>").val("").html("Select")),$(".alert").hide(),$("#errorMsgRegion").html(closeButton+"Invalide Company ABN."),$("#errorMsgRegion").show(),!1):($.each(e,function(e,o){$("#CompanyName").append($("<option></option>").val(o.CompanyName).html(o.CompanyName))}),initialize(e),e);$("#CompanyName").empty(),$("#fromDate").val(""),$("#toDate").val(""),$("#CompanyName").append($("<option></option>").val("").html("Select"))}})}),$(document).ready(function(){$("#txtTown").autocomplete({minLength:3,source:function(e,o){$.ajax({type:"GET",url:processRequestURL,dataType:"json",data:{excludePostBoxFlag:!0,q:e.term},success:function(e){var t=JSON.parse(e);t.localities.locality instanceof Array?o($.map(t.localities.locality,function(e){return{label:e.location+", "+e.state+", "+e.postcode,value:e.location,state:e.state,postcode:e.postcode}})):o($.map(t.localities,function(e){return{label:e.location+", "+e.state+", "+e.postcode,value:e.location,state:e.state,postcode:e.postcode}}))}})},select:function(e,o){$("#txtState").val(o.item.state),$("#txtPostCode").val(o.item.postcode)}}),$("#txtPostCode").autocomplete({minLength:3,source:function(e,o){$.ajax({type:"GET",url:processRequestURL,dataType:"json",data:{excludePostBoxFlag:!0,q:e.term},success:function(e){var t=JSON.parse(e);t.localities.locality instanceof Array?o($.map(t.localities.locality,function(e){return{label:e.location+", "+e.state+", "+e.postcode,value:e.postcode,state:e.state,location:e.location}})):o($.map(t.localities,function(e){return{label:e.location+", "+e.state+", "+e.postcode,value:e.postcode,state:e.state,location:e.location}}))}})},select:function(e,o){$("#txtState").val(o.item.state),$("#txtTown").val(o.item.location)}})}),$("#imgSignature").click(function(){$("#loading-image").css("display",""),$("#imgSign").attr("src",SRCSign).load(function(){logoWidth=this.width,logoHeight=this.height,$("#popupbox").modal({backdrop:"static",keyboard:!1}),$(window).height()<=logoHeight?($("#imgSign").closest("div").height($(window).height()-205),$("#imgSign").closest("div").css("overflow-y","scroll"),$("#imgSign").height(logoHeight)):($("#imgSign").height(logoHeight),$("#imgSign").closest("div").removeAttr("style")),screen.width<=logoWidth||logoWidth>=screen.width-250?($("#popupbox").find(".modal-dialog").width(screen.width-250),$("#imgSign").width(logoWidth)):($("#imgSign").width(logoWidth),$("#popupbox").find(".modal-dialog").width(logoWidth)),$("#loading-image").css("display","none")}),$("#imgSign").unbind("error"),$("#imgSign").attr("src",SRCSign).error(function(){alert("Image does not exist."),$("#loading-image").css("display","none")})}),$("#imgSignatureSE").click(function(){$("#loading-image").css("display",""),modelUserId>0&&(SRCSign=proofDocumentURL+"UserDocuments/"+modelUserId+"/"+$("#imgSign").attr("class")),$("#imgSignSE").attr("src",SRCSign),$("#imgSignSE").load(function(){logoWidth=this.width,logoHeight=this.height,$("#popupboxSE").modal({backdrop:"static",keyboard:!1}),$(window).height()<=logoHeight?($("#imgSignSE").closest("div").height($(window).height()-205),$("#imgSignSE").closest("div").css("overflow-y","scroll"),$("#imgSignSE").height(logoHeight)):($("#imgSignSE").height(logoHeight),$("#imgSignSE").closest("div").removeAttr("style")),screen.width<=logoWidth||logoWidth>=screen.width-250?($("#popupboxSE").find(".modal-dialog").width(screen.width-250),$("#imgSignSE").width(logoWidth)):($("#imgSignSE").width(logoWidth),$("#popupboxSE").find(".modal-dialog").width(logoWidth)),$("#loading-image").css("display","none")}),$("#imgSignSE").unbind("error"),$("#imgSignSE").attr("src",SRCSign).error(function(){alert("Image does not exist."),$("#loading-image").css("display","none")})}),$(".resp-tabs-list li").click(function(e,o){$(this);addRules(),isValid=$("#UserDetails").valid()}),$("#AddressID").change(function(){var e=$("#AddressID option:selected").val();POAddress(e)});