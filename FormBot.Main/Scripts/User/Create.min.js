function getDropDownValue(){return 7==userTypeId&&ValidateFieldBasedOnWorkType(),7==$("#UserTypeId").val()&&$("#IsAutoRequest").val($("#AutoRequestSwitch").prop("checked")),!!validateForm()&&($(".SlectBox option:selected").each(function(e){$('<input type="hidden">').attr({name:"FCOGroupSelected",value:$(this).val(),id:$(this).val()}).appendTo("form")}),!0)}function validateForm(){if(7==$("#UserTypeId").val()&&!$("#IsPVDUser").prop("checked")&&!$("#IsSWHUser").prop("checked"))return alert("At least one work type should be selected."),!1;if(4!=sessionUserTypeId&&(8==$("#UserTypeId").val()||9==$("#UserTypeId").val())){if(!(null!=$("#ResellerID").val()&&null!=$("#SolarCompanyId").val()||null!=$("#SolarSubContractorID").val()&&""!=$("#SolarSubContractorID").val()))return alert('Please select either "ResellerName and SolarCompany" or "SolarSubContractor"'),!1;if($("#ResellerID").val()>0&&$("#SolarSubContractorID").val()>0)return alert("Please select either SolarCompany or SolarSubContractor"),!1;$("#SolarSubContractorID").val()>0&&($("#ResellerID").rules("remove","required"),$("#SolarCompanyId").rules("remove","required"))}if($("#UserDetails").valid()&&(2==userTypeId||5==userTypeId||2==$("#UserTypeId").val()||5==$("#UserTypeId").val())){var e=CheckClientCodePrefix($("#ClientCodePrefix").val(),1,$("#ResellerID").val(),$("#UserTypeId").val());if(0==e)return!1}4==$("#UserTypeId").val()&&$("#RAMId").val($("#hdnRAMID").val()),addressValidation();var l=[];return $.validator.unobtrusive.parse("#UserDetails"),$.each($("#FCOGroupId").parent().find("ul").find("li"),function(e,o){-1!=$(this).attr("class").indexOf("selected")&&l.push($(this).val())}),$("#FCOGroupId").is(":visible")?$("#UserDetails").valid()?l.length>0?($("#spanFCOGroup").hide(),CheckShowMessages()):($("#spanFCOGroup").show(),CheckShowMessages(),!1):(l.length>0?$("#spanFCOGroup").hide():$("#spanFCOGroup").show(),CheckShowMessages(),!1):!!($("#UserDetails").valid()&&CheckShowMessages()&&addRules())||(addRules(),!1)}function focusToSearch(){document.getElementById("btnSubmit").focus()}function defaultHideField(){$(".RA").hide(),$(".RAM").hide(),$(".SCA").hide(),$(".FCO").hide(),$(".SCO").hide(),$(".SE").hide(),$(".SWH").hide(),$(".FSA").hide(),$(".SSC").hide(),$(".showWholeSaler").hide(),$(".defaultFormBot").hide(),$(".drpjobtype").hide()}function ChangeUserType(e,l){ClearAllJobTypeCheckBoxValue(),chkUserName=!0,chkCompanyABN=!0,chkCECAccreditationNumber=!0,$("#horizontalTab").show(),$(".form-box").find("input:first").focus(),$("#spanFCOGroup").hide(),$("#FCOGroupId")[0].sumo&&$("#FCOGroupId")[0].sumo.unSelectAll(),0==accreditedInstallerId&&($("#tblDocuments").html(""),$("input[type=text]").each(function(){$(this).val(""),$(this).attr("class","form-control valid")}),$("input[type=PassWord]").each(function(){$(this).val(""),$(this).attr("class","form-control valid")})),$(".field-validation-error").attr("class","field-validation-valid"),$("#lblCECAccreditationNumber").removeClass("required"),$("#chkSCA").prop("checked",!1),userTypeId=e,""==e?($("#horizontalTab").hide(),defaultHideField(),$(".Role").hide(),$("#RecUsernamePwd").hide()):1==e?($(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".RAM").hide(),$(".SCA").hide(),$(".FCO").hide(),$(".SCO").hide(),$(".SE").hide(),$(".SWH").hide(),$(".SSC").hide(),$(".SC").hide(),$(".FSA").show(),$(".Role").show(),$(".showWholeSaler").hide(),$(".drpjobtype").hide(),$("#RecUsernamePwd").hide(),$.ajax({url:getRoleURL1,type:"get",async:!1,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){if(0==e)$("#RoleID").empty(),$("#RoleID").append('<option value="">Select</option>');else{$("#RoleID").empty(),$("#RoleID").append('<option value="">Select</option>');var l="";$.each(e,function(e,o){1==o.Selected&&(l=o.Value,CheckRoleHasSaasUser(o.Value)),$("#RoleID").append('<option value="'+o.Value+'">'+o.Text+"</option>")}),$("#RoleID").val(parseInt(l))}}}),$(".defaultFormBot").show()):2==e?($(".FSA").hide(),$(".FCO").hide(),$(".RAM").hide(),$(".SCA").hide(),$(".SCO").hide(),$(".SSC").hide(),$(".SE").hide(),$(".SWH").hide(),$(".SC").hide(),$(".RA").show(),$(".PDA").hide(),$(".Role").show(),$(".ProfileSCO").show(),$(".ProfileRA").hide(),$(".showWholeSaler").show(),$("#RecUsernamePwd").show(),ShowHideWholeSalerInvoice(),$.ajax({url:getRoleURL2,type:"get",async:!1,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){if(0==e)$("#RoleID").empty(),$("#RoleID").append('<option value="">Select</option>');else{$("#RoleID").empty(),$("#RoleID").append('<option value="">Select</option>');var l="";$.each(e,function(e,o){1==o.Selected&&(l=o.Value,CheckRoleHasSaasUser(o.Value)),$("#RoleID").append('<option value="'+o.Value+'">'+o.Text+"</option>")}),$("#RoleID").val(parseInt(l))}}}),$(".defaultFormBot").show(),$("#RecUsernamePwd").show()):3==e?($(".FSA").hide(),$(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".RAM").hide(),$(".SCA").hide(),$(".SCO").hide(),$(".SE").hide(),$(".SWH").hide(),$(".SSC").hide(),$(".SC").hide(),$(".FCO").show(),$(".Role").show(),$(".showWholeSaler").hide(),$(".defaultFormBot").show(),$(".drpjobtype").hide(),$.ajax({url:getRoleURL3,type:"get",async:!1,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){if(0==e)$("#RoleID").empty(),$("#RoleID").append('<option value="">Select</option>');else{$("#RoleID").empty(),$("#RoleID").append('<option value="">Select</option>');var l="";$.each(e,function(e,o){1==o.Selected&&(l=o.Value,CheckRoleHasSaasUser(o.Value)),$("#RoleID").append('<option value="'+o.Value+'">'+o.Text+"</option>")}),$("#RoleID").val(parseInt(l))}}}),1==l&&$("#UserTypeId").val("3")):4==e?($(".FSA").hide(),$(".FCO").hide(),$(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".RAM").hide(),$(".SCO").hide(),$(".SE").hide(),$(".SWH").hide(),$(".SSC").hide(),$(".SC").hide(),$(".SCA").show(),$(".PDA").hide(),$(".ProfileSCO").show(),$(".SCOProfile").show(),$(".ProfileRA").hide(),$(".chkSCASignUp").hide(),$(".Role").show(),$(".showWholeSaler").hide(),$(".drpjobtype").hide(),$("#RecUsernamePwd").hide(),$("#lblCECAccreditationNumber").addClass("required"),$.ajax({url:getRoleURL4,type:"get",async:!1,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){if(0==e)$("#RoleID").empty(),$("#RoleID").append('<option value="">Select</option>');else{$("#RoleID").empty(),$("#RoleID").append('<option value="">Select</option>');var l="";$.each(e,function(e,o){1==o.Selected&&(l=o.Value,CheckRoleHasSaasUser(o.Value)),$("#RoleID").append('<option value="'+o.Value+'">'+o.Text+"</option>")}),$("#RoleID").val(parseInt(l))}}}),checkIsWholeSaler($("#ResellerID").val()),$(".defaultFormBot").show()):5==e?($(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".SCA").hide(),$(".FCO").hide(),$(".FSA").hide(),$(".SCO").hide(),$(".SE").hide(),$(".SWH").hide(),$(".SSC").hide(),$("#UserTypeId").val("5"),$(".SC").hide(),$(".RAM").show(),$(".Role").show(),$(".showWholeSaler").hide(),$(".defaultFormBot").show(),$(".drpjobtype").hide(),$("#RecUsernamePwd").hide(),$.ajax({url:getRoleURL5,type:"get",async:!1,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){if(0==e)$("#RoleID").empty(),$("#RoleID").append('<option value="">Select</option>');else{$("#RoleID").empty(),$("#RoleID").append('<option value="">Select</option>');var l="";$.each(e,function(e,o){1==o.Selected&&(l=o.Value,CheckRoleHasSaasUser(o.Value)),$("#RoleID").append('<option value="'+o.Value+'">'+o.Text+"</option>")}),$("#RoleID").val(parseInt(l))}}}),1==l&&($(".RAMdrp").hide(),$("#UserTypeId").prop("disabled",!0))):6==e?($(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".SCA").hide(),$(".FCO").hide(),$(".FSA").hide(),$(".SCO").hide(),$(".RAM").hide(),$(".SE").hide(),$(".SWH").hide(),$(".SC").hide(),$(".SSC").show(),$(".PDA").hide(),$(".ProfileSCO").show(),$(".SCOProfile").show(),$(".ProfileRA").hide(),$(".Role").show(),$(".showWholeSaler").hide(),$(".drpjobtype").hide(),$("#RecUsernamePwd").hide(),$.ajax({url:getRoleURL6,type:"get",async:!1,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){if(0==e)$("#RoleID").empty(),$("#RoleID").append('<option value="">Select</option>');else{$("#RoleID").empty(),$("#RoleID").append('<option value="">Select</option>');var l="";$.each(e,function(e,o){1==o.Selected&&(l=o.Value,CheckRoleHasSaasUser(o.Value)),$("#RoleID").append('<option value="'+o.Value+'">'+o.Text+"</option>")}),$("#RoleID").val(parseInt(l))}}}),$(".defaultFormBot").show()):7==e?($(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".SCA").hide(),$(".FCO").hide(),$(".FSA").hide(),$(".SCO").hide(),$(".RAM").hide(),$(".SSC").hide(),$(".SC").hide(),$(".SE").show(),$(".SWH").hide(),$(".hideSESWH").hide(),$(".PDA").hide(),$(".defaultFormBot").show(),$(".ProfileSCO").show(),$(".SCOProfile").show(),$(".ProfileRA").hide(),$(".Role").show(),$(".showWholeSaler").hide(),$("#RecUsernamePwd").hide(),$(".drpjobtype").show(),userTypeId=e,InitializeClickEventForJobTypeClickEvent(),$("#lblCECAccreditationNumber").addClass("required"),$.ajax({url:getRoleURL7,type:"get",async:!1,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){if(0==e)$("#RoleID").empty(),$("#RoleID").append('<option value="">Select</option>');else{$("#RoleID").empty(),$("#RoleID").append('<option value="">Select</option>');var l="";$.each(e,function(e,o){1==o.Selected&&(l=o.Value,CheckRoleHasSaasUser(o.Value)),$("#RoleID").append('<option value="'+o.Value+'">'+o.Text+"</option>")}),$("#RoleID").val(parseInt(l))}}})):10==e?($(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".SCA").hide(),$(".FCO").hide(),$(".FSA").hide(),$(".SCO").hide(),$(".RAM").hide(),$(".SSC").hide(),$(".SC").hide(),$(".SE").show(),$(".hideForSWH").hide(),$(".SWH").show(),$(".hideSESWH").hide(),$(".PDA").hide(),$(".defaultFormBot").show(),$(".ProfileSCO").show(),$(".SCOProfile").show(),$(".ProfileRA").hide(),$("#RecUsernamePwd").hide(),$(".Role").show(),$(".showWholeSaler").hide(),$(".drpjobtype").hide(),$.ajax({url:getRoleURL10,type:"get",async:!1,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){if(0==e)$("#RoleID").empty(),$("#RoleID").append('<option value="">Select</option>');else{$("#RoleID").empty(),$("#RoleID").append('<option value="">Select</option>');var l="";$.each(e,function(e,o){1==o.Selected&&(l=o.Value,CheckRoleHasSaasUser(o.Value)),$("#RoleID").append('<option value="'+o.Value+'">'+o.Text+"</option>")}),$("#RoleID").val(parseInt(l))}}})):8==e?($(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".SCA").hide(),$(".FCO").hide(),$(".FSA").hide(),$(".RAM").hide(),$(".SE").hide(),$(".SWH").hide(),$(".SSC").hide(),$(".SC").hide(),$(".SCO").show(),$("#UserTypeId").val("8"),$(".defaultFormBot").show(),$(".ProfileSCO").show(),$(".SCOProfile").hide(),$(".ProfileRA").hide(),$("#RecUsernamePwd").hide(),$(".Role").show(),$("#t3").hide(),$(".SCProfile").hide(),$(".showWholeSaler").hide(),$("#lblResellerID").removeClass("required"),$("#lblSolarCompanyId").removeClass("required"),$(".drpjobtype").hide(),FillDropDown("SolarSubContractorID",getSCAIsSSCByRAIdURL+"?id="+$("#ResellerID").val()+"&IsSSC=true",modelSSCId,!0,null),$.ajax({url:getRoleURL8,type:"get",async:!1,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){if(0==e)$("#RoleID").empty(),$("#RoleID").append('<option value="">Select</option>');else{$("#RoleID").empty(),$("#RoleID").append('<option value="">Select</option>');var l="";$.each(e,function(e,o){1==o.Selected&&(l=o.Value,CheckRoleHasSaasUser(o.Value)),$("#RoleID").append('<option value="'+o.Value+'">'+o.Text+"</option>")}),$("#RoleID").val(parseInt(l))}}}),1==l&&($(".SCdrp").hide(),$("#UserTypeId").prop("disabled",!0))):($(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".SCA").hide(),$(".FCO").hide(),$(".FSA").hide(),$(".RAM").hide(),$(".SE").hide(),$(".SWH").hide(),$(".SSC").hide(),$(".SC0").hide(),$(".SC").show(),$(".PDA").hide(),$(".ProfileSCO").show(),$(".SCOProfile").show(),$(".ProfileRA").hide(),$(".SCNext").hide(),$(".Role").show(),$(".SCOPro").hide(),$(".showWholeSaler").hide(),$(".drpjobtype").hide(),$("#lblResellerID").removeClass("required"),$("#lblSolarCompanyId").removeClass("required"),$("#RecUsernamePwd").hide(),FillDropDown("SolarSubContractorID",getSCAIsSSCByRAIdURL+"?id="+$("#ResellerID").val()+"&IsSSC=true",modelSSCId,!0,null),$.ajax({url:getRoleURL9,type:"get",async:!1,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){if(0==e)$("#RoleID").empty(),$("#RoleID").append('<option value="">Select</option>');else{$("#RoleID").empty(),$("#RoleID").append('<option value="">Select</option>');var l="";$.each(e,function(e,o){1==o.Selected&&(l=o.Value,CheckRoleHasSaasUser(o.Value)),$("#RoleID").append('<option value="'+o.Value+'">'+o.Text+"</option>")}),$("#RoleID").val(parseInt(l))}}}))}function readURL(e){e.files&&e.files[0]&&($.each(e.files,function(){var l=getNameFromPath($("#fileToUploadPassport").val()),o=(l.substring(0,l.length-4),l.split(".").pop(),e.files[0].size,new FileReader);o.onload=function(e){$("img.imgFiles").length>0?($images.append('<img src="'+e.target.result+'" style="display:none;" id="imgFile'+$("img.imgFiles").length+'"  file-id="'+id+'" Status="Add" class="imgFiles" />'),selector.find("#Next").addClass("ic_disable"),$("img.imgFiles").length>1&&CurrImage<$("img.imgFiles").length-1&&selector.find("#Next").removeClass("ic_disable"),$("#msgSection").html(""),$("#msgSection").append('<div class="alert alert-success" onclick="$(this).fadeOut(3000)">Image has been added successfully at the end.<button type="button" class="close" onclick="$(this).parent().hide();" aria-hidden="true">×</button></div>')):($images.append('<img src="'+e.target.result+'" id="imgFile'+$("img.imgFiles").length+'"  file-id="'+id+'" Status="Add" class="imgFiles" />'),$("#msgSection").html(""),$("#msgSection").append('<div class="alert alert-success" onclick="$(this).fadeOut(3000)">Image has been added successfully.<button type="button" class="close" onclick="$(this).parent().hide();" aria-hidden="true">×</button></div>')),selector.find("#imgFile"+CurrImage).attr("style","width:100%;height:100%")},o.readAsDataURL(this)}),setTimeout(function(){ShowHideAddDeleteIcon()},100))}function getNameFromPath(e){var l=new RegExp(/([^\/\\]+)$/),o=l.exec(e);return null==o?null:o[0]}function ShowAddPreview(e,l,o){var i=getNameFromPath($("#"+o).val()),r=(i.substring(0,i.length-4),i.split(".").pop(),e.files[0].size,!1);if(null!=i){var a=i.substr(i.lastIndexOf("."));a.toLowerCase()}return 0==r?($(".alert").hide(),$("#errorMsgRegion").show(),setTimeout(function(){$(".alert").fadeOut(4e3)},4e3),$("#"+o).val(""),!1):parseFloat(e.files[0].size/1048576)>errorFileSize?($(".alert").hide(),$("#errorMsgRegion").html(closeButton+"File size exceeds it's maximum limit of "+errorFileSize+" MB."),$("#errorMsgRegion").show(),$("#"+o).val(""),!1):void 0}function addRules(){4!=userTypeId&&6!=userTypeId&&8!=userTypeId||removeValidationOnTabChangeInstallerDesigner();var e=$("#UserTypeId").val();return(4==e||7==e&&$("#IsPVDUser").prop("checked"))&&$("#CECAccreditationNumber").rules("add",{required:!0,messages:{required:"CEC Accreditation Number is required."}}),1!=$("#chkSCA").is(":checked")||(0!=$("#tblDocuments1 tr").length||($(".alert").hide(),$("#errorMsgRegion").html(closeButton+"Please upload atleast one proof of identity document."),$("#errorMsgRegion").show(),!1))}function showErrorMessages(e,l){return 0!=e||($("#errorMsgRegion").html(closeButton+l),$("#errorMsgRegion").show(),!1)}function DeleteDocumentFolderOnCancel(){USERID}function BindRoles(e){$.ajax({url:getRoleURL,type:"get",async:!1,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){if(0==e)$("#RoleID").empty(),$("#RoleID").append('<option value="">Select</option>');else{$("#RoleID").empty(),$("#RoleID").append('<option value="">Select</option>');var l="";$.each(e,function(e,o){1==o.Selected&&(l=o.Value),$("#RoleID").append('<option value="'+o.Value+'">'+o.Text+"</option>")}),$("#RoleID").val(parseInt(l))}}})}function addressValidation(){$("#UnitTypeId").rules("add",{required:!1}),$("#UnitNumber").rules("add",{required:!1}),""==$("#UnitTypeId").val()&&""==$("#UnitNumber").val()&&($("#lblUnitNumber").removeClass("required"),$("#lblUnitTypeID").removeClass("required"),$("#UnitNumber").rules("add",{required:!1}),$("#UnitTypeId").rules("add",{required:!1}),$("#UnitNumber").next("span").attr("class","field-validation-valid"),$("#lblStreetNumber").addClass("required"),$("#StreetNumber").rules("add",{required:!0,messages:{required:"Street Number is required."}})),$("#UnitTypeId").val()>0&&""!=$("#UnitNumber").val()&&($("#lblStreetNumber").removeClass("required"),$("#StreetNumber").rules("add",{required:!1}),$("#lblUnitNumber").removeClass("required"),$("#lblUnitTypeID").removeClass("required"),$("#UnitNumber").rules("add",{required:!1}),$("#UnitTypeId").rules("add",{required:!1})),$("#UnitTypeId").val()>0&&""==$("#UnitNumber").val()&&($("#UnitNumber").rules("add",{required:!0,messages:{required:"Unit Number is required."}}),$("#lblUnitNumber").addClass("required"),$("#lblStreetNumber").removeClass("required"),$("#StreetNumber").rules("add",{required:!1})),""==$("#UnitTypeId").val()&&""!=$("#UnitNumber").val()&&($("#lblUnitNumber").removeClass("required"),$("#lblUnitTypeID").removeClass("required"),$("#UnitNumber").rules("add",{required:!1}),$("#UnitTypeId").rules("add",{required:!1}),$("#lblStreetNumber").addClass("required"),$("#StreetNumber").rules("add",{required:!0,messages:{required:"Street Number is required."}})),"2"==$("#UsageType").val()&&2==$("#UserTypeId").val()&&($("#WholesalerUnitTypeID").rules("add",{required:!1}),$("#WholesalerUnitNumber").rules("add",{required:!1}),""==$("#WholesalerUnitTypeID").val()&&0==$("#WholesalerUnitNumber").val().length&&($("#lblWholesalerUnitNumber").removeClass("required"),$("#lblWholesalerUnitTypeID").removeClass("required"),$("#WholesalerUnitNumber").rules("add",{required:!1}),$("#WholesalerUnitTypeID").rules("add",{required:!1}),$("#WholesalerUnitNumber").next("span").attr("class","field-validation-valid"),$("#lblWholesalerStreetNumber").addClass("required"),$("#WholesalerStreetNumber").rules("add",{required:!0,messages:{required:"Street Number is required."}})),$("#WholesalerUnitTypeID").val()>0&&0!=$("#WholesalerUnitNumber").val().length&&($("#lblWholesalerStreetNumber").removeClass("required"),$("#WholesalerStreetNumber").rules("add",{required:!1}),$("#lblWholesalerUnitNumber").removeClass("required"),$("#lblWholesalerUnitTypeID").removeClass("required"),$("#WholesalerUnitNumber").rules("add",{required:!1}),$("#WholesalerUnitTypeID").rules("add",{required:!1})),$("#WholesalerUnitTypeID").val()>0&&0==$("#WholesalerUnitNumber").val().length&&($("#WholesalerUnitNumber").rules("add",{required:!0,messages:{required:"Unit Number is required."}}),$("#lblWholesalerUnitNumber").addClass("required"),$("#lblWholesalerStreetNumber").removeClass("required"),$("#WholesalerStreetNumber").rules("add",{required:!1})),""==$("#WholesalerUnitTypeID").val()&&0!=$("#WholesalerUnitNumber").val().length&&($("#lblWholesalerUnitNumber").removeClass("required"),$("#lblWholesalerUnitTypeID").removeClass("required"),$("#WholesalerUnitNumber").rules("add",{required:!1}),$("#WholesalerUnitTypeID").rules("add",{required:!1}),$("#lblWholesalerStreetNumber").addClass("required"),$("#WholesalerStreetNumber").rules("add",{required:!0,messages:{required:"Street Number is required."}}))),"3"==$("#UsageType").val()&&2==$("#UserTypeId").val()&&($("#InvoicerUnitTypeID").rules("add",{required:!1}),$("#InvoicerUnitNumber").rules("add",{required:!1}),""==$("#InvoicerUnitTypeID").val()&&0==$("#InvoicerUnitNumber").val().length&&($("#lblInvoicerUnitNumber").removeClass("required"),$("#lblInvoicerUnitTypeID").removeClass("required"),$("#InvoicerUnitNumber").rules("add",{required:!1}),$("#InvoicerUnitTypeID").rules("add",{required:!1}),$("#InvoicerUnitNumber").next("span").attr("class","field-validation-valid"),$("#lblInvoicerStreetNumber").addClass("required"),$("#InvoicerStreetNumber").rules("add",{required:!0,messages:{required:"Street Number is required."}})),$("#InvoicerUnitTypeID").val()>0&&0!=$("#InvoicerUnitNumber").val().length&&($("#lblInvoicerStreetNumber").removeClass("required"),$("#InvoicerStreetNumber").rules("add",{required:!1}),$("#lblInvoicerUnitNumber").removeClass("required"),$("#lblInvoicerUnitTypeID").removeClass("required"),$("#InvoicerUnitNumber").rules("add",{required:!1}),$("#InvoicerUnitTypeID").rules("add",{required:!1})),$("#InvoicerUnitTypeID").val()>0&&0==$("#InvoicerUnitNumber").val().length&&($("#InvoicerUnitNumber").rules("add",{required:!0,messages:{required:"Unit Number is required."}}),$("#lblInvoicerUnitNumber").addClass("required"),$("#lblInvoicerStreetNumber").removeClass("required"),$("#InvoicerStreetNumber").rules("add",{required:!1})),""==$("#InvoicerUnitTypeID").val()&&0!=$("#InvoicerUnitNumber").val().length&&($("#lblInvoicerUnitNumber").removeClass("required"),$("#lblInvoicerUnitTypeID").removeClass("required"),$("#InvoicerUnitNumber").rules("add",{required:!1}),$("#InvoicerUnitTypeID").rules("add",{required:!1}),$("#lblInvoicerStreetNumber").addClass("required"),$("#InvoicerStreetNumber").rules("add",{required:!0,messages:{required:"Street Number is required."}})))}function SaveUser(){if(10==$("#UserTypeId").val()&&$("#tblDocuments tr").length<=0)return alert("Please upload document(s)."),!1;for(var e=[],l=0;l<$("[name='FileNamesCreate']").length;l++)e.push({Name:$("[name='FileNamesCreate']")[l].id});$("#FileNamesCreate").val(JSON.stringify(e));var o=JSON.stringify($("#UserDetails").serializeToJson());return o=JSON.parse(o),o.FileNamesCreate=JSON.stringify(e),isValid=$("#UserDetails").valid(),!!isValid&&(1==$("#chkSCA").is(":checked")&&0==$("#tblDocuments1 tr").length?($(".alert").hide(),$("#errorMsgRegion").html(closeButton+"Please upload atleast one proof of identity document."),$("#errorMsgRegion").show(),!1):($.ajax({url:getUserCreateURL,type:"POST",dataType:"json",data:JSON.stringify(o),async:!0,processData:!1,cache:!1,contentType:"application/json; charset=utf-8",success:function(e){"true"==e?window.location.href=getUserIndexURL:($("#errorMsgRegion").removeClass("alert-success"),$("#errorMsgRegion").addClass("alert-danger"),$("#errorMsgRegion").html(closeButton+e),$("#errorMsgRegion").show())}}),!1))}function GetSolarCompanyBasedOnRA(){var e=GetClientNumberOnRAMChangeURL;4!=$("#UserTypeId").val()&&5!=$("#UserTypeId").val()||GetClientNumberOnRAMChange(2,$("#ResellerID").val()>0?$("#ResellerID").val():0,0,e),BindRAMForSolarCompany(0,$("#ResellerID").val()),FillDropDown("SolarCompanyId",getSCAIsSSCByRAIdURL+"?id="+$("#ResellerID").val()+"&IsSSC=false",modelSolarCompanyId,!0,null)}function checkIsWholeSaler(e){4==$("#UserTypeId").val()&&$.ajax({url:getCheckWholesalerByRAIdURL+"?id="+e,type:"get",async:!1,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){var l=JSON.parse(e);void 0!==l&&null!=l.Table[0]&&RoleDropdown_forSolarCompany(l.Table[0].IsWholeSaler)}})}function RoleDropdown_forSolarCompany(e){e?$("#RoleID").val(76):$("#RoleID").val(38)}function DownloadContractDocument(e){var l=e.id;l+="\\SAAS",window.location.href=BaseURL+"ViewDownloadFile/User?FileName="+e.className+"&FolderName="+l}function DeleteContractFileFromFolder(e){var l=$("#Invoicer").val();e="SAAS\\"+e,confirm("Are you sure you want to delete this file ?")&&$.ajax({url:BaseURL+"DeleteContractFileFromFolder/User",data:{fileName:e,FolderName:l},method:"get",success:function(){$("#SAASContractPath").html(""),$(".alert").hide(),$("#successMsgRegion").html(closeButton+"File has been Deleted successfully."),$("#successMsgRegion").show()}})}function CheckRoleHasSaasUser(e){$.ajax({url:urlRoleHasSaasUser,data:{RoleId:e},method:"GET",success:function(e){"true"==e.toLowerCase()?$("#IsSAASUser").prop("checked",!0):$("#IsSAASUser").prop("checked",!1)}})}$(document).ready(function(){0!=accreditedInstallerId&&($("#Password").val(modelPassword),$("input[name=SEDesigner][value='"+modelSEDesignRoleId+"']").prop("checked",!0)),FillDropDownUser("UserTypeId",getUserTypeURL,userTypeId||0,!0,ChangeUserType(userTypeId)),dropDownData.push({id:"UnitTypeId",value:unitTypeID,key:"UnitType",hasSelect:!0,callback:null,defaultText:null,proc:"UnitType_BindDropdown",param:[],bText:"UnitTypeName",bValue:"UnitTypeID"},{id:"StreetTypeId",value:streetTypeId,key:"StreetType",hasSelect:!0,callback:null,defaultText:null,proc:"StreetType_BindDropdown",param:[],bText:"StreetTypeName",bValue:"StreetTypeID"},{id:"ResellerID",value:modelResellerId,key:"Reseller",hasSelect:!0,callback:null,defaultText:null,proc:"Reseller_BindDropDown",param:[],bText:"ResellerName",bValue:"ResellerID"},{id:"PostalAddressID",value:postalAddressID,key:"PostalAddress",hasSelect:!0,callback:null,defaultText:null,proc:"PostalAddress_BindDropdown",param:[],bText:"PostalDeliveryType",bValue:"PostalAddressID"},{id:"WholesalerUnitTypeID",key:"UnitType",value:WholesalerUnitTypeID,hasSelect:!0,callback:null,defaultText:null,proc:"UnitType_BindDropdown",param:[],bText:"UnitTypeName",bValue:"UnitTypeID"},{id:"WholesalerStreetTypeID",key:"StreetType",value:WholesalerStreetTypeID,hasSelect:!0,callback:null,defaultText:null,proc:"StreetType_BindDropdown",param:[],bText:"StreetTypeName",bValue:"StreetTypeID"},{id:"WholesalerPostalAddressID",key:"PostalAddress",value:WholesalerPostalAddressID,hasSelect:!0,callback:null,defaultText:null,proc:"PostalAddress_BindDropdown",param:[],bText:"PostalDeliveryType",bValue:"PostalAddressID"},{id:"InvoicerUnitTypeID",key:"UnitType",value:InvoicerUnitTypeID,hasSelect:!0,callback:null,defaultText:null,proc:"UnitType_BindDropdown",param:[],bText:"UnitTypeName",bValue:"UnitTypeID"},{id:"InvoicerStreetTypeID",key:"StreetType",value:InvoicerStreetTypeID,hasSelect:!0,callback:null,defaultText:null,proc:"StreetType_BindDropdown",param:[],bText:"StreetTypeName",bValue:"StreetTypeID"},{id:"InvoicerPostalAddressID",key:"PostalAddress",value:InvoicerPostalAddressID,hasSelect:!0,callback:null,defaultText:null,proc:"PostalAddress_BindDropdown",param:[],bText:"PostalDeliveryType",bValue:"PostalAddressID"}),dropDownData.bindDropdown(),$("#btnClosePopUpBox").click(function(){$("#popupbox").modal("toggle")}),$("#btnClosePopUpBoxSE").click(function(){$("#popupboxSE").modal("toggle")}),$("#btnClosepopupProof").click(function(){$("#popupProof").modal("toggle")}),$("#btnClosePopUpBoxSelfie").click(function(){$("#popupboxSelfie").modal("toggle")}),$("#fromDate").val(""),$("#toDate").val(""),$("#horizontalTab").easyResponsiveTabs({type:"default",width:"auto",fit:!0,closed:"accordion",activate:function(e){addressValidation();var l=[];$.each($("#FCOGroupId").parent().find("ul").find("li"),function(e,o){-1!=$(this).attr("class").indexOf("selected")&&l.push($(this).val())});var o=$(this);if(7==userTypeId&&!$("#IsPVDUser").prop("checked")&&!$("#IsSWHUser").prop("checked"))return o.removeClass("resp-tab-active"),$(".resp-tab-content-active").css("display","none").removeClass("resp-tab-content-active"),$("#"+activeTab).addClass("resp-tab-active"),$(".tab"+activeTab.replace("t","")).addClass("resp-tab-content-active").css("display","block"),alert("At least one work type should be selected."),!1;if($("#FCOGroupId").is(":visible")){if(!(isValid&&l.length>0&&CheckShowMessages()))return o.removeClass("resp-tab-active"),$(".resp-tab-content-active").css("display","none").removeClass("resp-tab-content-active"),$("#"+activeTab).addClass("resp-tab-active"),$(".tab"+activeTab.replace("t","")).addClass("resp-tab-content-active").css("display","block"),l.length>0?$("#spanFCOGroup").hide():$("#spanFCOGroup").show(),CheckShowMessages(),!1;$("#spanFCOGroup").hide(),activeTab=o.attr("id"),$(".form-box").find("input:first").focus()}else{if(!(isValid&&CheckShowMessages()&&addRules()))return o.removeClass("resp-tab-active"),$(".resp-tab-content-active").css("display","none").removeClass("resp-tab-content-active"),$("#"+activeTab).addClass("resp-tab-active"),$(".tab"+activeTab.replace("t","")).addClass("resp-tab-content-active").css("display","block"),CheckShowMessages(),addRules(),!1;activeTab=o.attr("id"),$(".form-box").find("input:first").focus()}"t6"==activeTab&&$.ajax({type:"GET",url:getInstallerDesignerAddedByProfileURL,data:{usertypeId:userTypeId,solarcompanyId:modelSolarCompanyId},contentType:"application/json",success:function(e){$("#instDesignerAddedByProfile").html(e)}})}}),window.asd=$(".SlectBox").SumoSelect({csvDispCount:4}),$("#verticalTab").easyResponsiveTabs({type:"vertical",width:"auto",fit:!0}),$("#fromDate").val(""),$("#toDate").val(""),BindRoles(userTypeId),"2"==sessionUserTypeId&&$("#UserTypeId").prop("disabled",!0),"4"==sessionUserTypeId&&$("#UserTypeId").prop("disabled",!0),"6"==sessionUserTypeId&&$("#UserTypeId").prop("disabled",!0),"8"==sessionUserTypeId&&$("#UserTypeId").prop("disabled",!0),"2"==userTypeId&&($("#RecUsernamePwd").show(),1==sessionUserTypeId?$(".RECSuperAdmin").show():$(".RECSuperAdmin").hide()),$("#IsActive").prop("checked",!0),5==userTypeId&&$(".RAMCreate").hide(),8==userTypeId&&($(".SCACreate").hide(),$(".ProfileSCO").show(),$(".ProfileRA").hide(),$(".SCOProfile").hide()),8==userTypeId&&4==sessionUserTypeId&&($(".chkSCASignUp").hide(),$(".uploadSCA").hide(),$(".SCO").show(),$(".SCProfile").hide(),$(".SCACreate").hide(),$(".SCACreateSCO").hide(),$("#t3").hide()),8==userTypeId&&6==sessionUserTypeId&&($(".chkSCASignUp").hide(),$(".uploadSCA").hide(),$(".SCO").show(),$(".SCProfile").hide(),$(".SCACreate").hide(),$(".SCACreateSCO").hide(),$("#t3").hide())}),$("#FCOGroupId").change(function(e){var l=[];""==$("#FCOGroupId")[0][0].value&&$("#FCOGroupId")[0][0].remove(),$.each($("#FCOGroupId").parent().find("ul").find("li"),function(e,o){-1!=$(this).attr("class").indexOf("selected")&&($("#FCOGroupId")[0].sumo.selectItem(e),l.push($(this).val()))}),l.length>0?$("#spanFCOGroup").hide():$("#spanFCOGroup").show()}),$("#ResellerID").change(function(){4!=$("#UserTypeId").val()&&5!=$("#UserTypeId").val()||GetClientNumberOnRAMChange(2,$("#ResellerID").val()>0?$("#ResellerID").val():0,0,GetClientNumberOnRAMChangeURL),BindRAMForSolarCompany(0,$("#ResellerID").val()),FillDropDown("SolarCompanyId",getSCAByRAIdURL+"?id="+$("#ResellerID").val(),modelSolarCompanyId,!0,null),GetSolarCompanyBasedOnRA(),checkIsWholeSaler($("#ResellerID").val())}),$(document).ready(function(){TownPostcodeAutoComplete($("#txtTown"),$("#txtState"),$("#txtPostCode")),$("#btnCancel").click(function(){window.location.href=getUserIndexURL}),$("#btnCancelLast").click(function(){window.location.href=getUserIndexURL}),$("#btnCancelTab7").click(function(){window.location.href=getUserIndexURL}),$("#btnCancelTab10").click(function(){window.location.href=getUserIndexURL})}),$images=$("#MainDiv").find("div.divFiles"),$(".imageUpload").change(function(e){readURL(this)}),$(".resp-tabs-list li").click(function(e,l){$(this);addRules(),isValid=$("#UserDetails").valid()}),$("#imgSignature").click(function(){$("#loading-image").css("display",""),modelUserId>0&&(SRCSign=proofDocumentURL+"UserDocuments/"+modelUserId+"/"+$("#imgSign").attr("class")),$("#imgSign").attr("src",SRCSign),$("#imgSign").load(function(){logoWidth=this.width,logoHeight=this.height,$("#popupbox").modal({backdrop:"static",keyboard:!1}),$(window).height()<=logoHeight?($("#imgSign").closest("div").height($(window).height()-205),$("#imgSign").closest("div").css("overflow-y","scroll"),$("#imgSign").height(logoHeight)):($("#imgSign").height(logoHeight),$("#imgSign").closest("div").removeAttr("style")),
screen.width<=logoWidth||logoWidth>=screen.width-250?($("#popupbox").find(".modal-dialog").width(screen.width-250),$("#imgSign").width(logoWidth)):($("#imgSign").width(logoWidth),$("#popupbox").find(".modal-dialog").width(logoWidth)),$("#loading-image").css("display","none")}),$("#imgSign").unbind("error"),$("#imgSign").attr("src",SRCSign).error(function(){alert("Image does not exist."),$("#loading-image").css("display","none")})}),$("#imgSignatureSE").click(function(){$("#loading-image").css("display",""),modelUserId>0&&(SRCSign=proofDocumentURL+"UserDocuments/"+modelUserId+"/"+$("#imgSign").attr("class")),$("#imgSignSE").attr("src",SRCSign),$("#imgSignSE").load(function(){logoWidth=this.width,logoHeight=this.height,$("#popupboxSE").modal({backdrop:"static",keyboard:!1}),$(window).height()<=logoHeight?($("#imgSignSE").closest("div").height($(window).height()-205),$("#imgSignSE").closest("div").css("overflow-y","scroll"),$("#imgSignSE").height(logoHeight)):($("#imgSignSE").height(logoHeight),$("#imgSignSE").closest("div").removeAttr("style")),screen.width<=logoWidth||logoWidth>=screen.width-250?($("#popupboxSE").find(".modal-dialog").width(screen.width-250),$("#imgSignSE").width(logoWidth)):($("#imgSignSE").width(logoWidth),$("#popupboxSE").find(".modal-dialog").width(logoWidth)),$("#loading-image").css("display","none")}),$("#imgSignSE").unbind("error"),$("#imgSignSE").attr("src",SRCSign).error(function(){alert("Image does not exist."),$("#loading-image").css("display","none")})}),$("#chkSCA").change(function(){$(this).is(":checked")?$(".chkSCASignUp").show():$(".chkSCASignUp").hide()}),$.fn.serializeToJson=function(){var e=$(this[0]),l=e.serializeArray(),o={},i=[];return $.each(l,function(e,l){if(-1!=l.name.indexOf(".")){var r=l.name.split(".");i.indexOf(r[0])<0&&i.push(r[0]);var a=o[i[i.indexOf(r[0])]]||{};a[r[1]]||(a[r[1]]=l.value),o[i[i.indexOf(r[0])]]=a}else o[l.name]||(o[l.name]=l.value)}),o},$("#UsageType").change(function(){ShowHideWholeSalerInvoice()}),$("#IsSAASUser").change(function(){if(ShowHideWholeSalerInvoice(),$("#IsSAASUser").is(":checked")){var e=$("#InvoicerAddressID").val();POInvoicerAddress(e)}}),$("#IsWholeSaler").change(function(){ShowHideWholeSalerInvoice()}),$("#RoleID").on("change",function(){CheckRoleHasSaasUser($("#RoleID").val())});