function getDropDownValue(){return removeSolarElecticianValidation(),!!validateForm()&&($(".SlectBox option:selected").each(function(e){$('<input type="hidden">').attr({name:"FCOGroupSelected",value:$(this).val(),id:$(this).val()}).appendTo("form")}),!0)}function validateForm(){if(2==userTypeId||5==userTypeId){var e=CheckClientCodePrefix($("#ClientCodePrefix").val());if(0==e)return!1}removeSolarElecticianValidation(),addRules();var l=[];return $.validator.unobtrusive.parse("#UserDetails"),$.each($("#FCOGroupId").parent().find("ul").find("li"),function(e,r){-1!=$(this).attr("class").indexOf("selected")&&l.push($(this).val())}),$("#FCOGroupId").is(":visible")?$("#UserDetails").valid()?l.length>0?($("#spanFCOGroup").hide(),CheckShowMessages()):($("#spanFCOGroup").show(),CheckShowMessages(),!1):(l.length>0?$("#spanFCOGroup").hide():$("#spanFCOGroup").show(),CheckShowMessages(),!1):!(!$("#UserDetails").valid()||!CheckShowMessages())}function ChangeUserType(e,l){$("#horizontalTab").show(),$("#spanFCOGroup").hide(),$(".form-box").find("input:first").focus(),$("input[type=text]").each(function(){$(this).attr("class","form-control valid")}),$(".field-validation-error").attr("class","field-validation-valid"),""==e?($("#horizontalTab").hide(),defaultHideField()):1==e?($(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".RAM").hide(),$(".SCA").hide(),$(".FCO").hide(),$(".SCO").hide(),$(".SE").hide(),$(".SSC").hide(),$(".SC").hide(),$(".FSA").show(),$(".defaultFormBot").show(),$(".showWholeSaler").hide(),FillDropDown("RoleID",getRoleURL1,modelRoleId,!0,null)):2==e?($(".FSA").hide(),$(".FCO").hide(),$(".RAM").hide(),$(".SCA").hide(),$(".SCO").hide(),$(".SSC").hide(),$(".SE").hide(),$(".SC").hide(),$(".RA").show(),$("#dvIsWholeSaler").show(),"3"==$("#UsageType").val()&&$(".SAAS").show(),$("#IsSAASUser").is(":checked")&&$(".SAAS").show(),$(".RAcode").show(),$(".defaultFormBot").show(),$(".ProfileSCO").show(),$(".ProfileRA").hide(),$(".showWholeSaler").show(),$(".SCAcode").show(),ShowHideWholeSalerInvoice(),FillDropDown("RoleID",getRoleURL2,modelRoleId,!0,null)):3==e?($(".FSA").hide(),$(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".RAM").hide(),$(".SCA").hide(),$(".SCO").hide(),$(".SE").hide(),$(".SSC").hide(),$(".SC").hide(),$(".FCO").show(),$(".defaultFormBot").show(),$(".showWholeSaler").hide(),$(".SCAcode").show(),FillDropDown("RoleID",getRoleURL3,modelRoleId,!0,null),1==l&&$("#UserTypeId").val("3")):4==e?($(".FSA").hide(),$(".FCO").hide(),$(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".RAM").hide(),$(".SCO").hide(),$(".SE").hide(),$(".SSC").hide(),$(".SC").hide(),$(".SCA").show(),$(".defaultFormBot").show(),$(".ProfileSCO").show(),$(".SCOProfile").show(),$(".ProfileRA").hide(),$(".showWholeSaler").hide(),$(".SCAcode").show(),FillDropDown("RoleID",getRoleURL4,modelRoleId,!0,null)):5==e?($(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".SCA").hide(),$(".FCO").hide(),$(".FSA").hide(),$(".SCO").hide(),$(".SE").hide(),$(".SSC").hide(),$("#UserTypeId").val("5"),$(".SC").hide(),$(".RAM").show(),$(".defaultFormBot").show(),$(".showWholeSaler").hide(),$(".SCAcode").show(),FillDropDown("RoleID",getRoleURL5,modelRoleId,!0,null),1==l&&($(".RAMdrp").hide(),$("#UserTypeId").prop("disabled",!0))):6==e?($(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".SCA").hide(),$(".FCO").hide(),$(".FSA").hide(),$(".SCO").hide(),$(".RAM").hide(),$(".SE").hide(),$(".SC").hide(),$(".SSC").show(),$(".defaultFormBot").show(),$(".ProfileSCO").show(),$(".SCOProfile").show(),$(".ProfileRA").hide(),$(".showWholeSaler").hide(),FillDropDown("RoleID",getRoleURL6,modelRoleId,!0,null)):7==e?($(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".SCA").hide(),$(".FCO").hide(),$(".FSA").hide(),$(".SCO").hide(),$(".RAM").hide(),$(".SSC").hide(),$(".SC").hide(),$(".SE").show(),$(".defaultFormBot").show(),$(".ProfileSCO").show(),$(".SCOProfile").show(),$(".ProfileRA").hide(),$("[name=SEDesigner][value="+SEDesigner+"]").prop("checked",!0),$(".showWholeSaler").hide(),FillDropDown("RoleID",getRoleURL7,modelRoleId,!0,null)):8==e?($(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".SCA").hide(),$(".FCO").hide(),$(".FSA").hide(),$(".RAM").hide(),$(".SE").hide(),$(".SSC").hide(),$(".SC").hide(),$(".SCO").show(),$("#UserTypeId").val("8"),$(".defaultFormBot").show(),$(".ProfileSCO").show(),$(".SCOProfile").hide(),$(".ProfileRA").hide(),$(".showWholeSaler").hide(),FillDropDown("RoleID",getRoleURL8,modelRoleId,!0,null),1==l&&($(".SCdrp").hide(),$("#UserTypeId").prop("disabled",!0))):($(".RA").show(),$("#dvIsWholeSaler").hide(),ShowHideWholeSalerInvoice(),$(".SCA").hide(),$(".FCO").hide(),$(".FSA").hide(),$(".RAM").hide(),$(".SE").hide(),$(".SSC").hide(),$(".SC0").hide(),$(".SC").show(),$(".ProfileSCO").show(),$(".SCOProfile").show(),$(".ProfileRA").hide(),$(".showWholeSaler").hide(),FillDropDown("RoleID",getRoleURL9,modelRoleId,!0,null))}function getNameFromPath(e){var l=new RegExp(/([^\/\\]+)$/),r=l.exec(e);return null==r?null:r[0]}function SelectFCOGroup(e){$.each(e,function(e,l){$.each($("#FCOGroupId")[0],function(e,r){l&&r.value&&parseInt(l)==parseInt(r.value)&&$("#FCOGroupId")[0].sumo.selectItem(e)})})}function addRules(){4!=userTypeId&&6!=userTypeId&&8!=userTypeId||removeValidationOnTabChangeInstallerDesigner(),$("#UnitTypeId").rules("add",{required:!1}),$("#UnitNumber").rules("add",{required:!1}),$("#Password").rules("add",{required:!1}),$("#UnitTypeId").val()>0&&""==$("#UnitNumber").val()&&($("#UnitNumber").rules("add",{required:!0,messages:{required:"Unit Number is required."}}),$("#UnitNumber").next("span").attr("class","field-validation-valid"),$("#lblUnitNumber").addClass("required"),$("#lblStreetNumber").removeClass("required"),$("#StreetNumber").rules("add",{required:!1})),$("#UnitTypeId").val()>0&&""!=$("#UnitNumber").val()&&($("#lblStreetNumber").removeClass("required"),$("#StreetNumber").rules("add",{required:!1}),$("#lblUnitNumber").removeClass("required"),$("#lblUnitTypeID").removeClass("required"),$("#UnitNumber").rules("add",{required:!1}),$("#UnitTypeId").rules("add",{required:!1})),""==$("#UnitTypeId").val()&&""==$("#UnitNumber").val()&&($("#lblUnitNumber").removeClass("required"),$("#lblUnitTypeID").removeClass("required"),$("#UnitNumber").rules("add",{required:!1}),$("#UnitTypeId").rules("add",{required:!1}),$("#lblStreetNumber").addClass("required"),$("#StreetNumber").rules("add",{required:!0,messages:{required:"Street Number is required."}})),""==$("#UnitTypeId").val()&&""!=$("#UnitNumber").val()&&($("#lblUnitNumber").removeClass("required"),$("#lblUnitTypeID").removeClass("required"),$("#UnitNumber").rules("add",{required:!1}),$("#UnitTypeId").rules("add",{required:!1}),$("#lblStreetNumber").addClass("required"),$("#StreetNumber").rules("add",{required:!0,messages:{required:"Street Number is required."}})),$("#IsWholeSaler").is(":checked")&&2==$("#UserTypeId").val()&&($("#WholesalerUnitTypeID").rules("add",{required:!1}),$("#WholesalerUnitNumber").rules("add",{required:!1}),""==$("#WholesalerUnitTypeID").val()&&0==$("#WholesalerUnitNumber").val().length&&($("#lblWholesalerUnitNumber").removeClass("required"),$("#lblWholesalerUnitTypeID").removeClass("required"),$("#WholesalerUnitNumber").rules("add",{required:!1}),$("#WholesalerUnitTypeID").rules("add",{required:!1}),$("#WholesalerUnitNumber").next("span").attr("class","field-validation-valid"),$("#lblWholesalerStreetNumber").addClass("required"),$("#WholesalerStreetNumber").rules("add",{required:!0,messages:{required:"Street Number is required."}})),$("#WholesalerUnitTypeID").val()>0&&0!=$("#WholesalerUnitNumber").val().length&&($("#lblWholesalerStreetNumber").removeClass("required"),$("#WholesalerStreetNumber").rules("add",{required:!1}),$("#lblWholesalerUnitNumber").removeClass("required"),$("#lblWholesalerUnitTypeID").removeClass("required"),$("#WholesalerUnitNumber").rules("add",{required:!1}),$("#WholesalerUnitTypeID").rules("add",{required:!1})),$("#WholesalerUnitTypeID").val()>0&&0==$("#WholesalerUnitNumber").val().length&&($("#WholesalerUnitNumber").rules("add",{required:!0,messages:{required:"Unit Number is required."}}),$("#lblWholesalerUnitNumber").addClass("required"),$("#lblWholesalerStreetNumber").removeClass("required"),$("#WholesalerStreetNumber").rules("add",{required:!1})),""==$("#WholesalerUnitTypeID").val()&&0!=$("#WholesalerUnitNumber").val().length&&($("#lblWholesalerUnitNumber").removeClass("required"),$("#lblWholesalerUnitTypeID").removeClass("required"),$("#WholesalerUnitNumber").rules("add",{required:!1}),$("#WholesalerUnitTypeID").rules("add",{required:!1}),$("#lblWholesalerStreetNumber").addClass("required"),$("#WholesalerStreetNumber").rules("add",{required:!0,messages:{required:"Street Number is required."}})))}function DeleteDocumentFolderOnCancel(){var e=USERID,l=[];l=document.getElementsByName("FileNamesCreate");var r=document.getElementsByName("Signature");r[0].id;if(l.length>0)for(var i=0;i<l.length;i++){var o=l[i].id;DeleteFileFromUserOnCancel(o,e)}}$(document).ready(function(){if(dropDownData.push({id:"UserTypeId",value:userTypeId,key:"UserType",hasSelect:!0,callback:null,defaultText:null,proc:"UserType_BindDropdown",param:[],bText:"UserTypeName",bValue:"UserTypeID"},{id:"UnitTypeId",value:unitTypeID,key:"UnitType",hasSelect:!0,callback:null,defaultText:null,proc:"UnitType_BindDropdown",param:[],bText:"UnitTypeName",bValue:"UnitTypeID"},{id:"StreetTypeId",value:streetTypeId,key:"StreetType",hasSelect:!0,callback:null,defaultText:null,proc:"StreetType_BindDropdown",param:[],bText:"StreetTypeName",bValue:"StreetTypeID"},{id:"ResellerID",value:modelResellerId,key:"Reseller",hasSelect:!0,callback:null,defaultText:null,proc:"Reseller_BindDropDown",param:[],bText:"ResellerName",bValue:"ResellerID"},{id:"PostalAddressID",value:postalAddressID,key:"PostalAddress",hasSelect:!0,callback:null,defaultText:null,proc:"PostalAddress_BindDropdown",param:[],bText:"PostalDeliveryType",bValue:"PostalAddressID"},{id:"SolarCompanyId",value:modelSolarCompanyId,key:"SolarCompany",hasSelect:!0,callback:null,defaultText:null,proc:"SolarCompany_BindDropDown",param:[],bText:"CompanyName",bValue:"SolarCompanyId"}),dropDownData.bindDropdown(),$("#UserTypeId").prop("disabled",!0),ChangeUserType(userTypeId,!1),""!=strFromDate&&"0001-01-01"!=strFromDate||$("#fromDate").val(""),"0001-01-01"!=strToDate&&""!=strToDate||$("#toDate").val(""),$(".ProfileSCO").show(),$(".ProfileRA").hide(),$(".SCOPro").hide(),$(".SCOPro1").hide(),8==userTypeId&&$(".SCOPro").show(),7!=userTypeId&&9!=userTypeId&&2!=userTypeId||$(".SCOPro1").show(),addressID=addressId,POAddress(addressID),$("#IsWholeSaler").is(":checked")&&(wholesalerAddressId=wholesalerIsPostalAddress,POWholesalerAddress(wholesalerAddressId)),$("#IsSAASUser").is(":checked")&&(InvoicerAddressId=InvoicerIsPostalAddress,POInvoicerAddress(InvoicerAddressId)),""!=$("#imgSign").attr("src")){var e=$("#imgSign").attr("src"),l=userID,r=r,i=r+"UserDocuments/"+l,o=i+"/"+e;SRCSign=o,$("#imgSign").attr("class",e),$("#imgSignature").show()}0==chkSTC?$(".chkSCASignUp").hide():$(".chkSCASignUp").show(),$("#btnClosePopUpBox").click(function(){$("#popupbox").modal("toggle")}),$("#btnClosePopUpBoxSE").click(function(){$("#popupboxSE").modal("toggle")}),$("#btnClosepopupProof").click(function(){$("#popupProof").modal("toggle")}),$("#btnClosePopUpBoxSelfie").click(function(){$("#popupboxSelfie").modal("toggle")}),$("#horizontalTab").easyResponsiveTabs({type:"default",width:"auto",fit:!0,closed:"accordion",activate:function(e){addRules();var l=[];$.each($("#FCOGroupId").parent().find("ul").find("li"),function(e,r){-1!=$(this).attr("class").indexOf("selected")&&l.push($(this).val())});var r=$(this);if($("#FCOGroupId").is(":visible")){if(!(isValid&&l.length>0&&CheckShowMessages()))return r.removeClass("resp-tab-active"),$(".resp-tab-content-active").css("display","none").removeClass("resp-tab-content-active"),$("#"+activeTab).addClass("resp-tab-active"),$(".tab"+activeTab.replace("t","")).addClass("resp-tab-content-active").css("display","block"),l.length>0?$("#spanFCOGroup").hide():$("#spanFCOGroup").show(),CheckShowMessages(),!1;$("#spanFCOGroup").hide(),activeTab=r.attr("id")}else{if(!isValid||!CheckShowMessages())return r.removeClass("resp-tab-active"),$(".resp-tab-content-active").css("display","none").removeClass("resp-tab-content-active"),$("#"+activeTab).addClass("resp-tab-active"),$(".tab"+activeTab.replace("t","")).addClass("resp-tab-content-active").css("display","block"),CheckShowMessages(),!1;activeTab=r.attr("id")}"t6"==activeTab&&$.ajax({type:"GET",url:getInstallerDesignerAddedByProfileURL,data:{usertypeId:userTypeId,solarcompanyId:modelSolarCompanyId},contentType:"application/json",success:function(e){$("#instDesignerAddedByProfile").html(e)}})}}),$("#verticalTab").easyResponsiveTabs({type:"vertical",width:"auto",fit:!0}),window.asd=$(".SlectBox").SumoSelect({csvDispCount:4});var d=[];d=model.ArrFcoGroup,SelectFCOGroup(d),$("#FCOGroupId").change(function(e){var l=[];""==$("#FCOGroupId")[0][0].value&&$("#FCOGroupId")[0][0].remove(),$.each($("#FCOGroupId").parent().find("ul").find("li"),function(e,r){-1!=$(this).attr("class").indexOf("selected")&&($("#FCOGroupId")[0].sumo.selectItem(e),l.push($(this).val()))}),l.length>0?$("#spanFCOGroup").hide():$("#spanFCOGroup").show()}),$("#AddressID").val(parseInt(addressId)),5==userTypeId&&$(".RAMCreate").show(),5==userTypeId&&2==sessionUserTypeId&&$(".RAMCreate").hide(),8==userTypeId&&($(".SCACreate").show(),$(".ProfileSCO").show(),$(".uploadSCA").hide(),$(".SCO").show(),$(".SCProfile").hide(),$("#t3").hide()),8==userTypeId&&4==sessionUserTypeId&&($(".SCACreate").hide(),$(".chkSCASignUp").hide(),$(".uploadSCA").hide()),9==userTypeId&&$(".SCACreate").show(),6==userTypeId&&($(".chkSCASignUp").show(),$(".SCOProfile").show()),8==userTypeId&&6==sessionUserTypeId&&($(".SCACreate").hide(),$(".chkSCASignUp").hide(),$(".uploadSCA").hide()),2==userTypeId&&$(".uploadSCA").hide(),""==$("#UnitTypeId option:selected").val()?($("#lblUnitNumber").removeClass("required"),$("#lblUnitTypeID").removeClass("required"),$("#lblStreetNumber").addClass("required")):($("#lblUnitNumber").addClass("required"),$("#lblUnitTypeID").addClass("required"),$("#lblStreetNumber").removeClass("required")),GetCompanyNameFromCompanyABN(companyABN,$("#CompanyName"),companyName,!1),GetCompanyNameFromCompanyABN(wholesalerCompanyABN,$("#WholesalerCompanyName"),wholesalerCompanyName,!0)}),$("#UserTypeId").change(function(){var e=$("#UserTypeId option:selected").val();ChangeUserType(e)}),$("#btnCancel").click(function(){window.location.href=getUserIndexURL}),$("#btnCancelLast").click(function(){window.location.href=getUserIndexURL}),$("#btnCancelTab7").click(function(){window.location.href=getUserIndexURL}),$("#btnCancelTab10").click(function(){window.location.href=getUserIndexURL}),$(".resp-tabs-list li").click(function(e,l){$(this);addRules(),isValid=$("#UserDetails").valid()}),$("#imgSignature").click(function(){$("#loading-image").css("display",""),modelUserId>0&&(SRCSign=proofDocumentURL+"UserDocuments/"+modelUserId+"/"+$("#imgSign").attr("class")),$("#imgSign").attr("src",SRCSign),$("#imgSign").load(function(){logoWidth=this.width,logoHeight=this.height,$("#popupbox").modal({backdrop:"static",keyboard:!1}),$(window).height()<=logoHeight?($("#imgSign").closest("div").height($(window).height()-205),$("#imgSign").closest("div").css("overflow-y","scroll"),$("#imgSign").height(logoHeight)):($("#imgSign").height(logoHeight),$("#imgSign").closest("div").removeAttr("style")),screen.width<=logoWidth||logoWidth>=screen.width-250?($("#popupbox").find(".modal-dialog").width(screen.width-250),$("#imgSign").width(logoWidth)):($("#imgSign").width(logoWidth),$("#popupbox").find(".modal-dialog").width(logoWidth)),$("#loading-image").css("display","none")}),$("#imgSign").unbind("error"),$("#imgSign").attr("src",SRCSign).error(function(){alert("Image does not exist."),$("#loading-image").css("display","none")})}),$("#imgSignatureSE").click(function(){$("#loading-image").css("display",""),modelUserId>0&&(SRCSign=proofDocumentURL+"UserDocuments/"+modelUserId+"/"+$("#imgSign").attr("class")),$("#imgSignSE").attr("src",SRCSign),$("#imgSignSE").load(function(){logoWidth=this.width,logoHeight=this.height,$("#popupboxSE").modal({backdrop:"static",keyboard:!1}),$(window).height()<=logoHeight?($("#imgSignSE").closest("div").height($(window).height()-205),$("#imgSignSE").closest("div").css("overflow-y","scroll"),$("#imgSignSE").height(logoHeight)):($("#imgSignSE").height(logoHeight),$("#imgSignSE").closest("div").removeAttr("style")),screen.width<=logoWidth||logoWidth>=screen.width-250?($("#popupboxSE").find(".modal-dialog").width(screen.width-250),$("#imgSignSE").width(logoWidth)):($("#imgSignSE").width(logoWidth),$("#popupboxSE").find(".modal-dialog").width(logoWidth)),$("#loading-image").css("display","none")}),$("#imgSignSE").unbind("error"),$("#imgSignSE").attr("src",SRCSign).error(function(){alert("Image does not exist."),$("#loading-image").css("display","none")})}),$("#chkSCA").change(function(){$(this).is(":checked")?$(".chkSCASignUp").show():$(".chkSCASignUp").hide()}),$("#IsSAASUser").change(function(){if(ShowHideWholeSalerInvoice(),$("#IsSAASUser").is(":checked")){var e=$("#InvoicerAddressID").val();POInvoicerAddress(e)}}),$("#IsWholeSaler").change(function(){ShowHideWholeSalerInvoice()});